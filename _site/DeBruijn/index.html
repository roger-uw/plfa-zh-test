<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>DeBruijn: Inherently typed de Bruijn representation | 编程语言基础：Agda 描述
</title><!-- Begin Jekyll SEO tag v2.5.0 -->
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="DeBruijn: Inherently typed de Bruijn representation" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="编程语言基础：Agda 描述" />
<meta property="og:description" content="编程语言基础：Agda 描述" />
<link rel="canonical" href="https://roger-uw.github.io/PLFA-zh/DeBruijn/" />
<meta property="og:url" content="https://roger-uw.github.io/PLFA-zh/DeBruijn/" />
<meta property="og:site_name" content="编程语言基础：Agda 描述" />
<script type="application/ld+json">
{"description":"编程语言基础：Agda 描述","@type":"WebPage","url":"https://roger-uw.github.io/PLFA-zh/DeBruijn/","headline":"DeBruijn: Inherently typed de Bruijn representation","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/PLFA-zh/assets/main.css"></head>
<body><header class="site-header" role="banner">

    <div class="wrapper">

        <a class="site-title" href="/PLFA-zh/">编程语言基础：Agda 描述
</a>

        <nav class="site-nav">
            <span class="menu-icon">
                <svg viewBox="0 0 18 15" width="18px" height="15px">
                    <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
                    <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
                    <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
                </svg>
            </span>

            <div class="trigger">
                <a class="page-link" href="/PLFA-zh/">目录</a>
                <a class="page-link" href="/PLFA-zh/GettingStarted/">使用说明</a>
            </div>
        </nav>

    </div>

</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
      <h1 class="post-title">DeBruijn: Inherently typed de Bruijn representation</h1>
  </header>

  <p style="text-align:center;">
    
    <a alt="Previous chapter" href="/PLFA-zh/Properties/">前一章</a>
    &bullet;
    
    
    <a alt="Source code" href="https://github.com/roger-uw/PLFA-zh/blob/dev/src/plfa/DeBruijn.lagda">源代码</a>
    
    
    &bullet;
    <a alt="Next chapter" href="/PLFA-zh/More/">后一章</a>
    
</p>


  <div class="post-content">
    <pre class="Agda"><a id="173" class="Keyword">module</a> <a id="180" href="/PLFA-zh/DeBruijn/" class="Module">plfa.DeBruijn</a> <a id="194" class="Keyword">where</a></pre>

<p>The previous two chapters introduced lambda calculus, with a
formalisation based on named variables, and terms defined
separately from types.  We began with that approach because it
is traditional, but it is not the one we recommend.  This
chapter presents an alternative approach, where named
variables are replaced by de Bruijn indices and terms are
inherently typed.  Our new presentation is more compact, using
less than half the lines of code required previously to cover
the same ground.</p>

<p>The inherently typed representation was first proposed by
Thorsten Altenkirch and Bernhard Reus.
The formalisation of renaming and substitution
we use is due to Conor McBride.
Related work has been carried out by
James Chapman, James McKinna, and many others.</p>

<h2 id="imports">Imports</h2>

<pre class="Agda"><a id="993" class="Keyword">import</a> <a id="1000" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="1038" class="Symbol">as</a> <a id="1041" class="Module">Eq</a>
<a id="1044" class="Keyword">open</a> <a id="1049" href="https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html" class="Module">Eq</a> <a id="1052" class="Keyword">using</a> <a id="1058" class="Symbol">(</a><a id="1059" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">_≡_</a><a id="1062" class="Symbol">;</a> <a id="1064" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a><a id="1068" class="Symbol">)</a>
<a id="1070" class="Keyword">open</a> <a id="1075" class="Keyword">import</a> <a id="1082" href="https://agda.github.io/agda-stdlib/Data.Empty.html" class="Module">Data.Empty</a> <a id="1093" class="Keyword">using</a> <a id="1099" class="Symbol">(</a><a id="1100" href="https://agda.github.io/agda-stdlib/Data.Empty.html#243" class="Datatype">⊥</a><a id="1101" class="Symbol">;</a> <a id="1103" href="https://agda.github.io/agda-stdlib/Data.Empty.html#360" class="Function">⊥-elim</a><a id="1109" class="Symbol">)</a>
<a id="1111" class="Keyword">open</a> <a id="1116" class="Keyword">import</a> <a id="1123" href="https://agda.github.io/agda-stdlib/Data.Nat.html" class="Module">Data.Nat</a> <a id="1132" class="Keyword">using</a> <a id="1138" class="Symbol">(</a><a id="1139" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a><a id="1140" class="Symbol">;</a> <a id="1142" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Nat.html#115" class="InductiveConstructor">zero</a><a id="1146" class="Symbol">;</a> <a id="1148" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Nat.html#128" class="InductiveConstructor">suc</a><a id="1151" class="Symbol">)</a>
<a id="1153" class="Keyword">open</a> <a id="1158" class="Keyword">import</a> <a id="1165" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="1182" class="Keyword">using</a> <a id="1188" class="Symbol">(</a><a id="1189" href="https://agda.github.io/agda-stdlib/Relation.Nullary.html#464" class="Function Operator">¬_</a><a id="1191" class="Symbol">)</a></pre>

<h2 id="introduction">Introduction</h2>

<p>There is a close correspondence between the structure of a
term and the structure of the derivation showing that it is
well-typed.  For example, here is the term for the Church
numeral two:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>twoᶜ  : Term
twoᶜ  = ƛ "s" ⇒ ƛ "z" ⇒ ` "s" · (` "s" · ` "z")
</code></pre></div></div>

<p>And here is its corresponding type derivation:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>⊢twoᶜ  :  ∀ {A} ⇒ ∅ ⊢ two ⦂ Ch A
⊢twoᶜ  =  ⊢ƛ (⊢ƛ (⊢` ∋s · (⊢` ∋s · ⊢` ∋z)))
           where    
           ∋s = S ("s" ≠ "z") Z
           ∋z = Z
</code></pre></div></div>

<p>(These are both taken from Chapter
<a href="/PLFA-zh/Lambda/">Lambda</a>
and you can see the corresponding derivation tree written out
in full
<a href="/PLFA-zh/Lambda/#derivation">here</a>.)
The two definitions are in close correspondence, where:</p>

<ul>
  <li><code class="highlighter-rouge">`_</code> corresponds to <code class="highlighter-rouge">⊢`</code></li>
  <li><code class="highlighter-rouge">ƛ_⇒_</code>   corresponds to <code class="highlighter-rouge">⊢ƛ</code></li>
  <li><code class="highlighter-rouge">_·_</code>    corresponds to <code class="highlighter-rouge">_·_</code></li>
</ul>

<p>Further, if we think of <code class="highlighter-rouge">Z</code> as zero and <code class="highlighter-rouge">S</code> as successor, then
the lookup derivation for each variable corresponds to a
number which tells us how many enclosing binding terms to
count to find the binding of that variable.  Here <code class="highlighter-rouge">"z"</code>
corresponds to <code class="highlighter-rouge">Z</code> or zero and <code class="highlighter-rouge">"s"</code> corresponds to <code class="highlighter-rouge">S Z</code> or
one.  And, indeed, “z” is bound by the inner abstraction
(count outward past zero abstractions) and “s” is bound by the
outer abstraction (count outward past one abstraction).</p>

<p>In this chapter, we are going to exploit this correspondence,
and introduce a new notation for terms that simultaneously
represents the term and its type derivation.  Now we will
write the following:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>twoᶜ  :  ∅ ⊢ Ch `ℕ
twoᶜ  =  ƛ ƛ (# 1 · (# 1 · # 0))
</code></pre></div></div>

<p>A variable is represented by a natural number (written with
<code class="highlighter-rouge">Z</code> and <code class="highlighter-rouge">S</code>, and abbreviated in the usual way), and tells us
how many enclosing binding terms to count to find the binding
of that variable. Thus, <code class="highlighter-rouge"># 0</code> is bound at the inner <code class="highlighter-rouge">ƛ</code>, and
<code class="highlighter-rouge"># 1</code> at the outer <code class="highlighter-rouge">ƛ</code>.</p>

<p>Replacing variables by numbers in this way is called <em>de
Bruijn representation</em>, and the numbers themselves are called
<em>de Bruijn indices</em>, after the Dutch mathematician Nicolaas
Govert (Dick) de Bruijn (1918—2012), a pioneer in the creation
of proof assistants.  One advantage of replacing named
variables with de Bruijn indices is that each term now has a
unique representation, rather than being represented by the
equivalence class of terms under alpha renaming.</p>

<p>The other important feature of our chosen representation is
that it is <em>inherently typed</em>.  In the previous two chapters,
the definition of terms and the definition of types are
completely separate.  All terms have type <code class="highlighter-rouge">Term</code>, and nothing
in Agda prevents one from writing a nonsense term such as <code class="highlighter-rouge">
`zero · `suc `zero</code> which has no type.  Such terms that
exist independent of types are sometimes called <em>preterms</em> or
<em>raw terms</em>.  Here we are going to replace the type <code class="highlighter-rouge">Term</code> of
raw terms by the more sophisticated type <code class="highlighter-rouge">Γ ⊢ A</code> of inherently
typed terms, which in context <code class="highlighter-rouge">Γ</code> have type <code class="highlighter-rouge">A</code>.</p>

<p>While these two choices fit well, they are independent.  One
can use De Bruijn indices in raw terms, or (with more
difficulty) have inherently typed terms with names.  In
Chapter <a href="/PLFA-zh/Untyped/">Untyped</a>,
we will introduce terms with De Bruijn indices that
are inherently scoped but not typed.</p>

<h2 id="a-second-example">A second example</h2>

<p>De Bruijn indices can be tricky to get the hang of, so before
proceeding further let’s consider a second example.  Here is
the term that adds two naturals:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>plus : Term
plus =  μ "+" ⇒ ƛ "m" ⇒ ƛ "n" ⇒
         case ` "m"
           [zero⇒ ` "n"
           |suc "m" ⇒ `suc (` "+" · ` "m" · ` "n") ]
</code></pre></div></div>

<p>Note variable “m” is bound twice, once in a lambda abstraction
and once in the successor branch of the case.  Any appearance
of “m” in the successor branch must refer to the latter
binding, due to shadowing.</p>

<p>Here is its corresponding type derivation:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>⊢plus : ∅ ⊢ plus ⦂ `ℕ ⇒ `ℕ ⇒ `ℕ
⊢plus = ⊢μ (⊢ƛ (⊢ƛ (⊢case (Ax ∋m) (Ax ∋n)
         (⊢suc (Ax ∋+ · Ax ∋m′ · Ax ∋n′)))))
  where
  ∋+  = (S ("+" ≠ "m") (S ("+" ≠ "n") (S ("+" ≠ "m") Z)))
  ∋m  = (S ("m" ≠ "n") Z)
  ∋n  = Z
  ∋m′ = Z
  ∋n′ = (S ("n" ≠ "m") Z)
</code></pre></div></div>

<p>The two definitions are in close correspondence, where in
addition to the previous correspondences we have:</p>

<ul>
  <li><code class="highlighter-rouge">`zero</code> corresponds to <code class="highlighter-rouge">⊢zero</code></li>
  <li><code class="highlighter-rouge">`suc_</code> corresponds to <code class="highlighter-rouge">⊢suc</code></li>
  <li><code class="highlighter-rouge">case_[zero⇒_|suc_⇒_]</code> corresponds to <code class="highlighter-rouge">⊢case</code></li>
  <li><code class="highlighter-rouge">μ_⇒_</code> corresponds to <code class="highlighter-rouge">⊢μ</code></li>
</ul>

<p>Note the two lookup judgments <code class="highlighter-rouge">∋m</code> and <code class="highlighter-rouge">∋m′</code> refer to two
different bindings of variables named <code class="highlighter-rouge">"m"</code>.  In contrast, the
two judgments <code class="highlighter-rouge">∋n</code> and <code class="highlighter-rouge">∋n′</code> both refer to the same binding
of <code class="highlighter-rouge">"n"</code> but accessed in different contexts, the first where
“n” is the last binding in the context, and the second after
“m” is bound in the successor branch of the case.</p>

<p>Here is the term and its type derivation in the notation of this chapter:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>plus : ∀ {Γ} → Γ ⊢ `ℕ ⇒ `ℕ ⇒ `ℕ
plus = μ ƛ ƛ case (# 1) (# 0) (`suc (# 3 · # 0 · # 1))
</code></pre></div></div>

<p>Reading from left to right, each de Bruijn index corresponds
to a lookup derivation:</p>

<ul>
  <li><code class="highlighter-rouge"># 1</code> corresponds to <code class="highlighter-rouge">∋m</code></li>
  <li><code class="highlighter-rouge"># 0</code> corresponds to <code class="highlighter-rouge">∋n</code></li>
  <li><code class="highlighter-rouge"># 3</code> corresponds to <code class="highlighter-rouge">∋+</code></li>
  <li><code class="highlighter-rouge"># 0</code> corresponds to <code class="highlighter-rouge">∋m′</code></li>
  <li><code class="highlighter-rouge"># 1</code> corresponds to <code class="highlighter-rouge">∋n′</code></li>
</ul>

<p>The de Bruijn index counts the number of <code class="highlighter-rouge">S</code> constructs in the
corresponding lookup derivation.  Variable “n” bound in the
inner abstraction is referred to as <code class="highlighter-rouge"># 0</code> in the zero branch
of the case but as <code class="highlighter-rouge"># 1</code> in the successor branch of the case,
because of the intervening binding.  Variable “m” bound in the
lambda abstraction is referred to by the first <code class="highlighter-rouge"># 1</code> in the
code, while variable “m” bound in the successor branch of the
case is referred to by the second <code class="highlighter-rouge"># 0</code>.  There is no
shadowing: with variable names, there is no way to refer to
the former binding in the scope of the latter, but with de
Bruijn indices it could be referred to as <code class="highlighter-rouge"># 2</code>.</p>

<h2 id="order-of-presentation">Order of presentation</h2>

<p>In the current chapter, the use of inherently-typed terms
necessitates that we cannot introduce operations such as
substitution or reduction without also showing that they
preserve types.  Hence, the order of presentation must change.</p>

<p>The syntax of terms now incorporates their typing rules, and the
definition of values now incorporates the Canonical Forms lemma.  The
definition of substitution is somewhat more involved, but incorporates
the trickiest part of the previous proof, the lemma establishing that
substitution preserves types.  The definition of reduction
incorporates preservation, which no longer requires a separate proof.</p>

<h2 id="syntax">Syntax</h2>

<p>We now begin our formal development.</p>

<p>First, we get all our infix declarations out of the way.
We list separately operators for judgments, types, and terms:</p>
<pre class="Agda"><a id="7812" class="Keyword">infix</a>  <a id="7819" class="Number">4</a> <a id="7821" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">_⊢_</a>
<a id="7825" class="Keyword">infix</a>  <a id="7832" class="Number">4</a> <a id="7834" href="/PLFA-zh/DeBruijn/#9267" class="Datatype Operator">_∋_</a>
<a id="7838" class="Keyword">infixl</a> <a id="7845" class="Number">5</a> <a id="7847" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">_,_</a>

<a id="7852" class="Keyword">infixr</a> <a id="7859" class="Number">7</a> <a id="7861" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">_⇒_</a>

<a id="7866" class="Keyword">infix</a>  <a id="7873" class="Number">5</a> <a id="7875" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ_</a>
<a id="7878" class="Keyword">infix</a>  <a id="7885" class="Number">5</a> <a id="7887" href="/PLFA-zh/DeBruijn/#10942" class="InductiveConstructor Operator">μ_</a>
<a id="7890" class="Keyword">infixl</a> <a id="7897" class="Number">7</a> <a id="7899" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">_·_</a>
<a id="7903" class="Keyword">infix</a>  <a id="7910" class="Number">8</a> <a id="7912" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc_</a>
<a id="7918" class="Keyword">infix</a>  <a id="7925" class="Number">9</a> <a id="7927" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`_</a>
<a id="7930" class="Keyword">infix</a>  <a id="7937" class="Number">9</a> <a id="7939" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S_</a>
<a id="7942" class="Keyword">infix</a>  <a id="7949" class="Number">9</a> <a id="7951" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#_</a></pre>

<p>Since terms are inherently typed, we must define types and
contexts before terms.</p>

<h3 id="types">Types</h3>

<p>As before, we have just two types, functions and naturals.
The formal definition is unchanged:</p>
<pre class="Agda"><a id="8169" class="Keyword">data</a> <a id="Type"></a><a id="8174" href="/PLFA-zh/DeBruijn/#8174" class="Datatype">Type</a> <a id="8179" class="Symbol">:</a> <a id="8181" class="PrimitiveType">Set</a> <a id="8185" class="Keyword">where</a>
  <a id="Type._⇒_"></a><a id="8193" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">_⇒_</a> <a id="8197" class="Symbol">:</a> <a id="8199" href="/PLFA-zh/DeBruijn/#8174" class="Datatype">Type</a> <a id="8204" class="Symbol">→</a> <a id="8206" href="/PLFA-zh/DeBruijn/#8174" class="Datatype">Type</a> <a id="8211" class="Symbol">→</a> <a id="8213" href="/PLFA-zh/DeBruijn/#8174" class="Datatype">Type</a>
  <a id="Type.`ℕ"></a><a id="8220" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a>  <a id="8224" class="Symbol">:</a> <a id="8226" href="/PLFA-zh/DeBruijn/#8174" class="Datatype">Type</a></pre>

<h3 id="contexts">Contexts</h3>

<p>Contexts are as before, but we drop the names.
Contexts are formalised as follows:</p>
<pre class="Agda"><a id="8353" class="Keyword">data</a> <a id="Context"></a><a id="8358" href="/PLFA-zh/DeBruijn/#8358" class="Datatype">Context</a> <a id="8366" class="Symbol">:</a> <a id="8368" class="PrimitiveType">Set</a> <a id="8372" class="Keyword">where</a>
  <a id="Context.∅"></a><a id="8380" href="/PLFA-zh/DeBruijn/#8380" class="InductiveConstructor">∅</a>   <a id="8384" class="Symbol">:</a> <a id="8386" href="/PLFA-zh/DeBruijn/#8358" class="Datatype">Context</a>
  <a id="Context._,_"></a><a id="8396" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">_,_</a> <a id="8400" class="Symbol">:</a> <a id="8402" href="/PLFA-zh/DeBruijn/#8358" class="Datatype">Context</a> <a id="8410" class="Symbol">→</a> <a id="8412" href="/PLFA-zh/DeBruijn/#8174" class="Datatype">Type</a> <a id="8417" class="Symbol">→</a> <a id="8419" href="/PLFA-zh/DeBruijn/#8358" class="Datatype">Context</a></pre>
<p>A context is just a list of types, with the type of the most
recently bound variable on the right.  As before, we let <code class="highlighter-rouge">Γ</code>
and <code class="highlighter-rouge">Δ</code> range over contexts.  We write <code class="highlighter-rouge">∅</code> for the empty
context, and <code class="highlighter-rouge">Γ , A</code> for the context <code class="highlighter-rouge">Γ</code> extended by type <code class="highlighter-rouge">A</code>.
For example</p>
<pre class="Agda"><a id="8705" href="/PLFA-zh/DeBruijn/#8705" class="Function">_</a> <a id="8707" class="Symbol">:</a> <a id="8709" href="/PLFA-zh/DeBruijn/#8358" class="Datatype">Context</a>
<a id="8717" class="Symbol">_</a> <a id="8719" class="Symbol">=</a> <a id="8721" href="/PLFA-zh/DeBruijn/#8380" class="InductiveConstructor">∅</a> <a id="8723" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="8725" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="8728" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="8730" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="8733" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="8735" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a></pre>
<p>is a context with two variables in scope, where the outer
bound one has type <code class="highlighter-rouge">`ℕ → `ℕ</code>, and the inner bound one has
type <code class="highlighter-rouge">`ℕ</code>.</p>

<h3 id="variables-and-the-lookup-judgment">Variables and the lookup judgment</h3>

<p>Inherently typed variables correspond to the lookup judgment.
They are represented by de Bruijn indices, and hence also
correspond to natural numbers.  We write</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Γ ∋ A
</code></pre></div></div>

<p>for variables which in context <code class="highlighter-rouge">Γ</code> have type <code class="highlighter-rouge">A</code>.  Their
formalisation looks exactly like the old lookup judgment, but
with all variable names dropped:</p>
<pre class="Agda"><a id="9262" class="Keyword">data</a> <a id="_∋_"></a><a id="9267" href="/PLFA-zh/DeBruijn/#9267" class="Datatype Operator">_∋_</a> <a id="9271" class="Symbol">:</a> <a id="9273" href="/PLFA-zh/DeBruijn/#8358" class="Datatype">Context</a> <a id="9281" class="Symbol">→</a> <a id="9283" href="/PLFA-zh/DeBruijn/#8174" class="Datatype">Type</a> <a id="9288" class="Symbol">→</a> <a id="9290" class="PrimitiveType">Set</a> <a id="9294" class="Keyword">where</a>

  <a id="_∋_.Z"></a><a id="9303" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a> <a id="9305" class="Symbol">:</a> <a id="9307" class="Symbol">∀</a> <a id="9309" class="Symbol">{</a><a id="9310" href="/PLFA-zh/DeBruijn/#9310" class="Bound">Γ</a> <a id="9312" href="/PLFA-zh/DeBruijn/#9312" class="Bound">A</a><a id="9313" class="Symbol">}</a>
      <a id="9321" class="Comment">----------</a>
    <a id="9336" class="Symbol">→</a> <a id="9338" href="/PLFA-zh/DeBruijn/#9310" class="Bound">Γ</a> <a id="9340" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="9342" href="/PLFA-zh/DeBruijn/#9312" class="Bound">A</a> <a id="9344" href="/PLFA-zh/DeBruijn/#9267" class="Datatype Operator">∋</a> <a id="9346" href="/PLFA-zh/DeBruijn/#9312" class="Bound">A</a>

  <a id="_∋_.S_"></a><a id="9351" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S_</a> <a id="9354" class="Symbol">:</a> <a id="9356" class="Symbol">∀</a> <a id="9358" class="Symbol">{</a><a id="9359" href="/PLFA-zh/DeBruijn/#9359" class="Bound">Γ</a> <a id="9361" href="/PLFA-zh/DeBruijn/#9361" class="Bound">A</a> <a id="9363" href="/PLFA-zh/DeBruijn/#9363" class="Bound">B</a><a id="9364" class="Symbol">}</a>
    <a id="9370" class="Symbol">→</a> <a id="9372" href="/PLFA-zh/DeBruijn/#9359" class="Bound">Γ</a> <a id="9374" href="/PLFA-zh/DeBruijn/#9267" class="Datatype Operator">∋</a> <a id="9376" href="/PLFA-zh/DeBruijn/#9361" class="Bound">A</a>
      <a id="9384" class="Comment">---------</a>
    <a id="9398" class="Symbol">→</a> <a id="9400" href="/PLFA-zh/DeBruijn/#9359" class="Bound">Γ</a> <a id="9402" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="9404" href="/PLFA-zh/DeBruijn/#9363" class="Bound">B</a> <a id="9406" href="/PLFA-zh/DeBruijn/#9267" class="Datatype Operator">∋</a> <a id="9408" href="/PLFA-zh/DeBruijn/#9361" class="Bound">A</a></pre>
<p>Constructor <code class="highlighter-rouge">S</code> no longer requires an additional parameter,
since without names shadowing is no longer an issue.  Now
constructors <code class="highlighter-rouge">Z</code> and <code class="highlighter-rouge">S</code> correspond even more closely to the
constructors <code class="highlighter-rouge">here</code> and <code class="highlighter-rouge">there</code> for the element-of relation
<code class="highlighter-rouge">_∈_</code> on lists, as well as to constructors <code class="highlighter-rouge">zero</code> and <code class="highlighter-rouge">suc</code>
for natural numbers.</p>

<p>For example, consider the following old-style lookup
judgments:</p>

<ul>
  <li><code class="highlighter-rouge">∅ , "s" ⦂ `ℕ ⇒ `ℕ , "z" ⦂ `ℕ ∋ "z" ⦂ `ℕ</code></li>
  <li><code class="highlighter-rouge">∅ , "s" ⦂ `ℕ ⇒ `ℕ , "z" ⦂ `ℕ ∋ "s" ⦂ `ℕ ⇒ `ℕ</code></li>
</ul>

<p>They correspond to the following inherently-typed variables:</p>
<pre class="Agda"><a id="9983" href="/PLFA-zh/DeBruijn/#9983" class="Function">_</a> <a id="9985" class="Symbol">:</a> <a id="9987" href="/PLFA-zh/DeBruijn/#8380" class="InductiveConstructor">∅</a> <a id="9989" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="9991" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="9994" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="9996" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="9999" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="10001" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="10004" href="/PLFA-zh/DeBruijn/#9267" class="Datatype Operator">∋</a> <a id="10006" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a>
<a id="10009" class="Symbol">_</a> <a id="10011" class="Symbol">=</a> <a id="10013" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a>

<a id="10016" href="/PLFA-zh/DeBruijn/#10016" class="Function">_</a> <a id="10018" class="Symbol">:</a> <a id="10020" href="/PLFA-zh/DeBruijn/#8380" class="InductiveConstructor">∅</a> <a id="10022" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="10024" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="10027" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="10029" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="10032" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="10034" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="10037" href="/PLFA-zh/DeBruijn/#9267" class="Datatype Operator">∋</a> <a id="10039" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="10042" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="10044" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a>
<a id="10047" class="Symbol">_</a> <a id="10049" class="Symbol">=</a> <a id="10051" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="10053" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a></pre>
<p>In the given context, <code class="highlighter-rouge">"z"</code> is represented by <code class="highlighter-rouge">Z</code>
(as the most recently bound variable),
and <code class="highlighter-rouge">"s"</code> by <code class="highlighter-rouge">S Z</code>
(as the next most recently bound variable).</p>

<h3 id="terms-and-the-typing-judgment">Terms and the typing judgment</h3>

<p>Inherently typed terms correspond to the typing judgment.
We write</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Γ ⊢ A
</code></pre></div></div>

<p>for terms which in context <code class="highlighter-rouge">Γ</code> has type <code class="highlighter-rouge">A</code>.  Their
formalisation looks exactly like the old typing judgment, but
with all terms and variable names dropped:</p>
<pre class="Agda"><a id="10503" class="Keyword">data</a> <a id="_⊢_"></a><a id="10508" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">_⊢_</a> <a id="10512" class="Symbol">:</a> <a id="10514" href="/PLFA-zh/DeBruijn/#8358" class="Datatype">Context</a> <a id="10522" class="Symbol">→</a> <a id="10524" href="/PLFA-zh/DeBruijn/#8174" class="Datatype">Type</a> <a id="10529" class="Symbol">→</a> <a id="10531" class="PrimitiveType">Set</a> <a id="10535" class="Keyword">where</a>

  <a id="_⊢_.`_"></a><a id="10544" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`_</a> <a id="10547" class="Symbol">:</a> <a id="10549" class="Symbol">∀</a> <a id="10551" class="Symbol">{</a><a id="10552" href="/PLFA-zh/DeBruijn/#10552" class="Bound">Γ</a><a id="10553" class="Symbol">}</a> <a id="10555" class="Symbol">{</a><a id="10556" href="/PLFA-zh/DeBruijn/#10556" class="Bound">A</a><a id="10557" class="Symbol">}</a>
    <a id="10563" class="Symbol">→</a> <a id="10565" href="/PLFA-zh/DeBruijn/#10552" class="Bound">Γ</a> <a id="10567" href="/PLFA-zh/DeBruijn/#9267" class="Datatype Operator">∋</a> <a id="10569" href="/PLFA-zh/DeBruijn/#10556" class="Bound">A</a>
      <a id="10577" class="Comment">------</a>
    <a id="10588" class="Symbol">→</a> <a id="10590" href="/PLFA-zh/DeBruijn/#10552" class="Bound">Γ</a> <a id="10592" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="10594" href="/PLFA-zh/DeBruijn/#10556" class="Bound">A</a>

  <a id="_⊢_.ƛ_"></a><a id="10599" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ_</a>  <a id="10603" class="Symbol">:</a>  <a id="10606" class="Symbol">∀</a> <a id="10608" class="Symbol">{</a><a id="10609" href="/PLFA-zh/DeBruijn/#10609" class="Bound">Γ</a><a id="10610" class="Symbol">}</a> <a id="10612" class="Symbol">{</a><a id="10613" href="/PLFA-zh/DeBruijn/#10613" class="Bound">A</a> <a id="10615" href="/PLFA-zh/DeBruijn/#10615" class="Bound">B</a><a id="10616" class="Symbol">}</a>
    <a id="10622" class="Symbol">→</a> <a id="10624" href="/PLFA-zh/DeBruijn/#10609" class="Bound">Γ</a> <a id="10626" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="10628" href="/PLFA-zh/DeBruijn/#10613" class="Bound">A</a> <a id="10630" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="10632" href="/PLFA-zh/DeBruijn/#10615" class="Bound">B</a>
      <a id="10640" class="Comment">----------</a>
    <a id="10655" class="Symbol">→</a> <a id="10657" href="/PLFA-zh/DeBruijn/#10609" class="Bound">Γ</a> <a id="10659" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="10661" href="/PLFA-zh/DeBruijn/#10613" class="Bound">A</a> <a id="10663" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="10665" href="/PLFA-zh/DeBruijn/#10615" class="Bound">B</a>

  <a id="_⊢_._·_"></a><a id="10670" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">_·_</a> <a id="10674" class="Symbol">:</a> <a id="10676" class="Symbol">∀</a> <a id="10678" class="Symbol">{</a><a id="10679" href="/PLFA-zh/DeBruijn/#10679" class="Bound">Γ</a><a id="10680" class="Symbol">}</a> <a id="10682" class="Symbol">{</a><a id="10683" href="/PLFA-zh/DeBruijn/#10683" class="Bound">A</a> <a id="10685" href="/PLFA-zh/DeBruijn/#10685" class="Bound">B</a><a id="10686" class="Symbol">}</a>
    <a id="10692" class="Symbol">→</a> <a id="10694" href="/PLFA-zh/DeBruijn/#10679" class="Bound">Γ</a> <a id="10696" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="10698" href="/PLFA-zh/DeBruijn/#10683" class="Bound">A</a> <a id="10700" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="10702" href="/PLFA-zh/DeBruijn/#10685" class="Bound">B</a>
    <a id="10708" class="Symbol">→</a> <a id="10710" href="/PLFA-zh/DeBruijn/#10679" class="Bound">Γ</a> <a id="10712" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="10714" href="/PLFA-zh/DeBruijn/#10683" class="Bound">A</a>
      <a id="10722" class="Comment">----------</a>
    <a id="10737" class="Symbol">→</a> <a id="10739" href="/PLFA-zh/DeBruijn/#10679" class="Bound">Γ</a> <a id="10741" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="10743" href="/PLFA-zh/DeBruijn/#10685" class="Bound">B</a>

  <a id="_⊢_.`zero"></a><a id="10748" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a> <a id="10754" class="Symbol">:</a> <a id="10756" class="Symbol">∀</a> <a id="10758" class="Symbol">{</a><a id="10759" href="/PLFA-zh/DeBruijn/#10759" class="Bound">Γ</a><a id="10760" class="Symbol">}</a>
      <a id="10768" class="Comment">----------</a>
    <a id="10783" class="Symbol">→</a> <a id="10785" href="/PLFA-zh/DeBruijn/#10759" class="Bound">Γ</a> <a id="10787" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="10789" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a>

  <a id="_⊢_.`suc_"></a><a id="10795" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc_</a> <a id="10801" class="Symbol">:</a> <a id="10803" class="Symbol">∀</a> <a id="10805" class="Symbol">{</a><a id="10806" href="/PLFA-zh/DeBruijn/#10806" class="Bound">Γ</a><a id="10807" class="Symbol">}</a>
    <a id="10813" class="Symbol">→</a> <a id="10815" href="/PLFA-zh/DeBruijn/#10806" class="Bound">Γ</a> <a id="10817" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="10819" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a>
      <a id="10828" class="Comment">-------</a>
    <a id="10840" class="Symbol">→</a> <a id="10842" href="/PLFA-zh/DeBruijn/#10806" class="Bound">Γ</a> <a id="10844" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="10846" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a>

  <a id="_⊢_.case"></a><a id="10852" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="10857" class="Symbol">:</a> <a id="10859" class="Symbol">∀</a> <a id="10861" class="Symbol">{</a><a id="10862" href="/PLFA-zh/DeBruijn/#10862" class="Bound">Γ</a> <a id="10864" href="/PLFA-zh/DeBruijn/#10864" class="Bound">A</a><a id="10865" class="Symbol">}</a>
    <a id="10871" class="Symbol">→</a> <a id="10873" href="/PLFA-zh/DeBruijn/#10862" class="Bound">Γ</a> <a id="10875" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="10877" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a>
    <a id="10884" class="Symbol">→</a> <a id="10886" href="/PLFA-zh/DeBruijn/#10862" class="Bound">Γ</a> <a id="10888" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="10890" href="/PLFA-zh/DeBruijn/#10864" class="Bound">A</a>
    <a id="10896" class="Symbol">→</a> <a id="10898" href="/PLFA-zh/DeBruijn/#10862" class="Bound">Γ</a> <a id="10900" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="10902" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="10905" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="10907" href="/PLFA-zh/DeBruijn/#10864" class="Bound">A</a>
      <a id="10915" class="Comment">-----------</a>
    <a id="10931" class="Symbol">→</a> <a id="10933" href="/PLFA-zh/DeBruijn/#10862" class="Bound">Γ</a> <a id="10935" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="10937" href="/PLFA-zh/DeBruijn/#10864" class="Bound">A</a>

  <a id="_⊢_.μ_"></a><a id="10942" href="/PLFA-zh/DeBruijn/#10942" class="InductiveConstructor Operator">μ_</a> <a id="10945" class="Symbol">:</a> <a id="10947" class="Symbol">∀</a> <a id="10949" class="Symbol">{</a><a id="10950" href="/PLFA-zh/DeBruijn/#10950" class="Bound">Γ</a> <a id="10952" href="/PLFA-zh/DeBruijn/#10952" class="Bound">A</a><a id="10953" class="Symbol">}</a>
    <a id="10959" class="Symbol">→</a> <a id="10961" href="/PLFA-zh/DeBruijn/#10950" class="Bound">Γ</a> <a id="10963" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="10965" href="/PLFA-zh/DeBruijn/#10952" class="Bound">A</a> <a id="10967" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="10969" href="/PLFA-zh/DeBruijn/#10952" class="Bound">A</a>
      <a id="10977" class="Comment">----------</a>
    <a id="10992" class="Symbol">→</a> <a id="10994" href="/PLFA-zh/DeBruijn/#10950" class="Bound">Γ</a> <a id="10996" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="10998" href="/PLFA-zh/DeBruijn/#10952" class="Bound">A</a></pre>
<p>The definition exploits the close correspondence between the
structure of terms and the structure of a derivation showing
that it is well-typed: now we use the derivation <em>as</em> the
term.  For example, consider the following three terms,
building up the Church numeral two.</p>

<p>For example, consider the following old-style typing
judgments:</p>

<ul>
  <li><code class="highlighter-rouge">∅ , "s" ⦂ `ℕ ⇒ `ℕ , "z" ⦂ `ℕ ⊢ ` "z" ⦂ `ℕ</code></li>
  <li><code class="highlighter-rouge">∅ , "s" ⦂ `ℕ ⇒ `ℕ , "z" ⦂ `ℕ ⊢ ` "s" ⦂ `ℕ ⇒ `ℕ</code></li>
  <li><code class="highlighter-rouge">∅ , "s" ⦂ `ℕ ⇒ `ℕ , "z" ⦂ `ℕ ⊢ ` "s" · ` "z" ⦂  `ℕ</code></li>
  <li><code class="highlighter-rouge">∅ , "s" ⦂ `ℕ ⇒ `ℕ , "z" ⦂ `ℕ ⊢ ` "s" · (` "s" · ` "z") ⦂  `ℕ</code></li>
  <li><code class="highlighter-rouge">∅ , "s" ⦂ `ℕ ⇒ `ℕ ⊢ (ƛ "z" ⇒ ` "s" · (` "s" · ` "z")) ⦂  `ℕ ⇒ `ℕ</code></li>
  <li><code class="highlighter-rouge">∅ ⊢ ƛ "s" ⇒ ƛ "z" ⇒ ` "s" · (` "s" · ` "z")) ⦂  (`ℕ ⇒ `ℕ) ⇒ `ℕ ⇒ `ℕ</code></li>
</ul>

<p>They correspond to the following inherently-typed terms:</p>
<pre class="Agda"><a id="11802" href="/PLFA-zh/DeBruijn/#11802" class="Function">_</a> <a id="11804" class="Symbol">:</a> <a id="11806" href="/PLFA-zh/DeBruijn/#8380" class="InductiveConstructor">∅</a> <a id="11808" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="11810" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="11813" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="11815" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="11818" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="11820" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="11823" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="11825" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a>
<a id="11828" class="Symbol">_</a> <a id="11830" class="Symbol">=</a> <a id="11832" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="11834" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a>

<a id="11837" href="/PLFA-zh/DeBruijn/#11837" class="Function">_</a> <a id="11839" class="Symbol">:</a> <a id="11841" href="/PLFA-zh/DeBruijn/#8380" class="InductiveConstructor">∅</a> <a id="11843" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="11845" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="11848" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="11850" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="11853" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="11855" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="11858" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="11860" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="11863" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="11865" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a>
<a id="11868" class="Symbol">_</a> <a id="11870" class="Symbol">=</a> <a id="11872" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="11874" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="11876" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a>

<a id="11879" href="/PLFA-zh/DeBruijn/#11879" class="Function">_</a> <a id="11881" class="Symbol">:</a> <a id="11883" href="/PLFA-zh/DeBruijn/#8380" class="InductiveConstructor">∅</a> <a id="11885" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="11887" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="11890" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="11892" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="11895" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="11897" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="11900" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="11902" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a>
<a id="11905" class="Symbol">_</a> <a id="11907" class="Symbol">=</a> <a id="11909" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="11911" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="11913" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a> <a id="11915" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="11917" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="11919" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a>

<a id="11922" href="/PLFA-zh/DeBruijn/#11922" class="Function">_</a> <a id="11924" class="Symbol">:</a> <a id="11926" href="/PLFA-zh/DeBruijn/#8380" class="InductiveConstructor">∅</a> <a id="11928" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="11930" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="11933" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="11935" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="11938" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="11940" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="11943" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="11945" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a>
<a id="11948" class="Symbol">_</a> <a id="11950" class="Symbol">=</a> <a id="11952" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="11954" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="11956" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a> <a id="11958" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="11960" class="Symbol">(</a><a id="11961" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="11963" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="11965" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a> <a id="11967" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="11969" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="11971" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="11972" class="Symbol">)</a>

<a id="11975" href="/PLFA-zh/DeBruijn/#11975" class="Function">_</a> <a id="11977" class="Symbol">:</a> <a id="11979" href="/PLFA-zh/DeBruijn/#8380" class="InductiveConstructor">∅</a> <a id="11981" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="11983" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="11986" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="11988" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="11991" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="11993" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="11996" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="11998" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a>
<a id="12001" class="Symbol">_</a> <a id="12003" class="Symbol">=</a> <a id="12005" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="12007" class="Symbol">(</a><a id="12008" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="12010" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="12012" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a> <a id="12014" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="12016" class="Symbol">(</a><a id="12017" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="12019" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="12021" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a> <a id="12023" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="12025" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="12027" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="12028" class="Symbol">))</a>

<a id="12032" href="/PLFA-zh/DeBruijn/#12032" class="Function">_</a> <a id="12034" class="Symbol">:</a> <a id="12036" href="/PLFA-zh/DeBruijn/#8380" class="InductiveConstructor">∅</a> <a id="12038" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="12040" class="Symbol">(</a><a id="12041" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="12044" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="12046" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a><a id="12048" class="Symbol">)</a> <a id="12050" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="12052" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="12055" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="12057" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a>
<a id="12060" class="Symbol">_</a> <a id="12062" class="Symbol">=</a> <a id="12064" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="12066" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="12068" class="Symbol">(</a><a id="12069" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="12071" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="12073" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a> <a id="12075" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="12077" class="Symbol">(</a><a id="12078" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="12080" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="12082" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a> <a id="12084" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="12086" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="12088" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="12089" class="Symbol">))</a></pre>
<p>The final inherently-typed term represents the Church numeral
two.</p>

<h3 id="abbreviating-de-bruijn-indices">Abbreviating de Bruijn indices</h3>

<p>We can use a natural number to select a type from a context:</p>
<pre class="Agda"><a id="lookup"></a><a id="12281" href="/PLFA-zh/DeBruijn/#12281" class="Function">lookup</a> <a id="12288" class="Symbol">:</a> <a id="12290" href="/PLFA-zh/DeBruijn/#8358" class="Datatype">Context</a> <a id="12298" class="Symbol">→</a> <a id="12300" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a> <a id="12302" class="Symbol">→</a> <a id="12304" href="/PLFA-zh/DeBruijn/#8174" class="Datatype">Type</a>
<a id="12309" href="/PLFA-zh/DeBruijn/#12281" class="Function">lookup</a> <a id="12316" class="Symbol">(</a><a id="12317" href="/PLFA-zh/DeBruijn/#12317" class="Bound">Γ</a> <a id="12319" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="12321" href="/PLFA-zh/DeBruijn/#12321" class="Bound">A</a><a id="12322" class="Symbol">)</a> <a id="12324" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Nat.html#115" class="InductiveConstructor">zero</a>     <a id="12333" class="Symbol">=</a>  <a id="12336" href="/PLFA-zh/DeBruijn/#12321" class="Bound">A</a>
<a id="12338" href="/PLFA-zh/DeBruijn/#12281" class="Function">lookup</a> <a id="12345" class="Symbol">(</a><a id="12346" href="/PLFA-zh/DeBruijn/#12346" class="Bound">Γ</a> <a id="12348" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="12350" class="Symbol">_)</a> <a id="12353" class="Symbol">(</a><a id="12354" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Nat.html#128" class="InductiveConstructor">suc</a> <a id="12358" href="/PLFA-zh/DeBruijn/#12358" class="Bound">n</a><a id="12359" class="Symbol">)</a>  <a id="12362" class="Symbol">=</a>  <a id="12365" href="/PLFA-zh/DeBruijn/#12281" class="Function">lookup</a> <a id="12372" href="/PLFA-zh/DeBruijn/#12346" class="Bound">Γ</a> <a id="12374" href="/PLFA-zh/DeBruijn/#12358" class="Bound">n</a>
<a id="12376" href="/PLFA-zh/DeBruijn/#12281" class="Function">lookup</a> <a id="12383" href="/PLFA-zh/DeBruijn/#8380" class="InductiveConstructor">∅</a>       <a id="12391" class="Symbol">_</a>        <a id="12400" class="Symbol">=</a>  <a id="12403" href="https://agda.github.io/agda-stdlib/Data.Empty.html#360" class="Function">⊥-elim</a> <a id="12410" href="/PLFA-zh/DeBruijn/#12439" class="Postulate">impossible</a>
  <a id="12423" class="Keyword">where</a> <a id="12429" class="Keyword">postulate</a> <a id="12439" href="/PLFA-zh/DeBruijn/#12439" class="Postulate">impossible</a> <a id="12450" class="Symbol">:</a> <a id="12452" href="https://agda.github.io/agda-stdlib/Data.Empty.html#243" class="Datatype">⊥</a></pre>
<p>We intend to apply the function only when the natural is
shorter than the length of the context, which we indicate by
postulating an <code class="highlighter-rouge">impossible</code> term, just as we did
<a href="/PLFA-zh/Lambda/#impossible">here</a>.</p>

<p>Given the above, we can convert a natural to a corresponding
De Bruijn index, looking up its type in the context:</p>
<pre class="Agda"><a id="count"></a><a id="12792" href="/PLFA-zh/DeBruijn/#12792" class="Function">count</a> <a id="12798" class="Symbol">:</a> <a id="12800" class="Symbol">∀</a> <a id="12802" class="Symbol">{</a><a id="12803" href="/PLFA-zh/DeBruijn/#12803" class="Bound">Γ</a><a id="12804" class="Symbol">}</a> <a id="12806" class="Symbol">→</a> <a id="12808" class="Symbol">(</a><a id="12809" href="/PLFA-zh/DeBruijn/#12809" class="Bound">n</a> <a id="12811" class="Symbol">:</a> <a id="12813" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a><a id="12814" class="Symbol">)</a> <a id="12816" class="Symbol">→</a> <a id="12818" href="/PLFA-zh/DeBruijn/#12803" class="Bound">Γ</a> <a id="12820" href="/PLFA-zh/DeBruijn/#9267" class="Datatype Operator">∋</a> <a id="12822" href="/PLFA-zh/DeBruijn/#12281" class="Function">lookup</a> <a id="12829" href="/PLFA-zh/DeBruijn/#12803" class="Bound">Γ</a> <a id="12831" href="/PLFA-zh/DeBruijn/#12809" class="Bound">n</a>
<a id="12833" href="/PLFA-zh/DeBruijn/#12792" class="Function">count</a> <a id="12839" class="Symbol">{</a><a id="12840" href="/PLFA-zh/DeBruijn/#12840" class="Bound">Γ</a> <a id="12842" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="12844" class="Symbol">_}</a> <a id="12847" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Nat.html#115" class="InductiveConstructor">zero</a>     <a id="12856" class="Symbol">=</a>  <a id="12859" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a>
<a id="12861" href="/PLFA-zh/DeBruijn/#12792" class="Function">count</a> <a id="12867" class="Symbol">{</a><a id="12868" href="/PLFA-zh/DeBruijn/#12868" class="Bound">Γ</a> <a id="12870" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="12872" class="Symbol">_}</a> <a id="12875" class="Symbol">(</a><a id="12876" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Nat.html#128" class="InductiveConstructor">suc</a> <a id="12880" href="/PLFA-zh/DeBruijn/#12880" class="Bound">n</a><a id="12881" class="Symbol">)</a>  <a id="12884" class="Symbol">=</a>  <a id="12887" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="12889" class="Symbol">(</a><a id="12890" href="/PLFA-zh/DeBruijn/#12792" class="Function">count</a> <a id="12896" href="/PLFA-zh/DeBruijn/#12880" class="Bound">n</a><a id="12897" class="Symbol">)</a>
<a id="12899" href="/PLFA-zh/DeBruijn/#12792" class="Function">count</a> <a id="12905" class="Symbol">{</a><a id="12906" href="/PLFA-zh/DeBruijn/#8380" class="InductiveConstructor">∅</a><a id="12907" class="Symbol">}</a>     <a id="12913" class="Symbol">_</a>        <a id="12922" class="Symbol">=</a>  <a id="12925" href="https://agda.github.io/agda-stdlib/Data.Empty.html#360" class="Function">⊥-elim</a> <a id="12932" href="/PLFA-zh/DeBruijn/#12961" class="Postulate">impossible</a>
  <a id="12945" class="Keyword">where</a> <a id="12951" class="Keyword">postulate</a> <a id="12961" href="/PLFA-zh/DeBruijn/#12961" class="Postulate">impossible</a> <a id="12972" class="Symbol">:</a> <a id="12974" href="https://agda.github.io/agda-stdlib/Data.Empty.html#243" class="Datatype">⊥</a></pre>
<p>This requires the same trick as before.</p>

<p>We can then introduce a convenient abbreviation for variables:</p>
<pre class="Agda"><a id="#_"></a><a id="13104" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#_</a> <a id="13107" class="Symbol">:</a> <a id="13109" class="Symbol">∀</a> <a id="13111" class="Symbol">{</a><a id="13112" href="/PLFA-zh/DeBruijn/#13112" class="Bound">Γ</a><a id="13113" class="Symbol">}</a> <a id="13115" class="Symbol">→</a> <a id="13117" class="Symbol">(</a><a id="13118" href="/PLFA-zh/DeBruijn/#13118" class="Bound">n</a> <a id="13120" class="Symbol">:</a> <a id="13122" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a><a id="13123" class="Symbol">)</a> <a id="13125" class="Symbol">→</a> <a id="13127" href="/PLFA-zh/DeBruijn/#13112" class="Bound">Γ</a> <a id="13129" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="13131" href="/PLFA-zh/DeBruijn/#12281" class="Function">lookup</a> <a id="13138" href="/PLFA-zh/DeBruijn/#13112" class="Bound">Γ</a> <a id="13140" href="/PLFA-zh/DeBruijn/#13118" class="Bound">n</a>
<a id="13142" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="13144" href="/PLFA-zh/DeBruijn/#13144" class="Bound">n</a>  <a id="13147" class="Symbol">=</a>  <a id="13150" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="13152" href="/PLFA-zh/DeBruijn/#12792" class="Function">count</a> <a id="13158" href="/PLFA-zh/DeBruijn/#13144" class="Bound">n</a></pre>

<p>With this abbreviation, we can rewrite the Church numeral two more compactly:</p>
<pre class="Agda"><a id="13263" href="/PLFA-zh/DeBruijn/#13263" class="Function">_</a> <a id="13265" class="Symbol">:</a> <a id="13267" href="/PLFA-zh/DeBruijn/#8380" class="InductiveConstructor">∅</a> <a id="13269" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="13271" class="Symbol">(</a><a id="13272" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="13275" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="13277" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a><a id="13279" class="Symbol">)</a> <a id="13281" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="13283" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="13286" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="13288" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a>
<a id="13291" class="Symbol">_</a> <a id="13293" class="Symbol">=</a> <a id="13295" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="13297" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="13299" class="Symbol">(</a><a id="13300" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="13302" class="Number">1</a> <a id="13304" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="13306" class="Symbol">(</a><a id="13307" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="13309" class="Number">1</a> <a id="13311" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="13313" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="13315" class="Number">0</a><a id="13316" class="Symbol">))</a></pre>

<h3 id="test-examples">Test examples</h3>

<p>We repeat the test examples from
Chapter <a href="/PLFA-zh/Lambda/">Lambda</a>.
You can find them
<a href="/PLFA-zh/Lambda/#derivation">here</a>
for comparison.</p>

<p>First, computing two plus two on naturals:</p>
<pre class="Agda"><a id="two"></a><a id="13537" href="/PLFA-zh/DeBruijn/#13537" class="Function">two</a> <a id="13541" class="Symbol">:</a> <a id="13543" class="Symbol">∀</a> <a id="13545" class="Symbol">{</a><a id="13546" href="/PLFA-zh/DeBruijn/#13546" class="Bound">Γ</a><a id="13547" class="Symbol">}</a> <a id="13549" class="Symbol">→</a> <a id="13551" href="/PLFA-zh/DeBruijn/#13546" class="Bound">Γ</a> <a id="13553" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="13555" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a>
<a id="13558" href="/PLFA-zh/DeBruijn/#13537" class="Function">two</a> <a id="13562" class="Symbol">=</a> <a id="13564" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="13569" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="13574" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a>

<a id="plus"></a><a id="13581" href="/PLFA-zh/DeBruijn/#13581" class="Function">plus</a> <a id="13586" class="Symbol">:</a> <a id="13588" class="Symbol">∀</a> <a id="13590" class="Symbol">{</a><a id="13591" href="/PLFA-zh/DeBruijn/#13591" class="Bound">Γ</a><a id="13592" class="Symbol">}</a> <a id="13594" class="Symbol">→</a> <a id="13596" href="/PLFA-zh/DeBruijn/#13591" class="Bound">Γ</a> <a id="13598" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="13600" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="13603" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="13605" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="13608" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="13610" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a>
<a id="13613" href="/PLFA-zh/DeBruijn/#13581" class="Function">plus</a> <a id="13618" class="Symbol">=</a> <a id="13620" href="/PLFA-zh/DeBruijn/#10942" class="InductiveConstructor Operator">μ</a> <a id="13622" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="13624" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="13626" class="Symbol">(</a><a id="13627" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="13632" class="Symbol">(</a><a id="13633" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="13635" class="Number">1</a><a id="13636" class="Symbol">)</a> <a id="13638" class="Symbol">(</a><a id="13639" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="13641" class="Number">0</a><a id="13642" class="Symbol">)</a> <a id="13644" class="Symbol">(</a><a id="13645" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="13650" class="Symbol">(</a><a id="13651" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="13653" class="Number">3</a> <a id="13655" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="13657" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="13659" class="Number">0</a> <a id="13661" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="13663" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="13665" class="Number">1</a><a id="13666" class="Symbol">)))</a>

<a id="2+2"></a><a id="13671" href="/PLFA-zh/DeBruijn/#13671" class="Function">2+2</a> <a id="13675" class="Symbol">:</a> <a id="13677" href="/PLFA-zh/DeBruijn/#8380" class="InductiveConstructor">∅</a> <a id="13679" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="13681" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a>
<a id="13684" href="/PLFA-zh/DeBruijn/#13671" class="Function">2+2</a> <a id="13688" class="Symbol">=</a> <a id="13690" href="/PLFA-zh/DeBruijn/#13581" class="Function">plus</a> <a id="13695" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="13697" href="/PLFA-zh/DeBruijn/#13537" class="Function">two</a> <a id="13701" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="13703" href="/PLFA-zh/DeBruijn/#13537" class="Function">two</a></pre>
<p>We specify that <code class="highlighter-rouge">two</code> and <code class="highlighter-rouge">plus</code> can be typed in an arbitrary environment,
rather than just the empty environment, because later we will give examples
where they appear nested inside binders.  We need not do the same with <code class="highlighter-rouge">2+2</code>,
which will only appear at the top-level of a term.</p>

<p>Next, computing two plus two on Church numerals:</p>
<pre class="Agda"><a id="Ch"></a><a id="14061" href="/PLFA-zh/DeBruijn/#14061" class="Function">Ch</a> <a id="14064" class="Symbol">:</a> <a id="14066" href="/PLFA-zh/DeBruijn/#8174" class="Datatype">Type</a> <a id="14071" class="Symbol">→</a> <a id="14073" href="/PLFA-zh/DeBruijn/#8174" class="Datatype">Type</a>
<a id="14078" href="/PLFA-zh/DeBruijn/#14061" class="Function">Ch</a> <a id="14081" href="/PLFA-zh/DeBruijn/#14081" class="Bound">A</a>  <a id="14084" class="Symbol">=</a>  <a id="14087" class="Symbol">(</a><a id="14088" href="/PLFA-zh/DeBruijn/#14081" class="Bound">A</a> <a id="14090" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="14092" href="/PLFA-zh/DeBruijn/#14081" class="Bound">A</a><a id="14093" class="Symbol">)</a> <a id="14095" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="14097" href="/PLFA-zh/DeBruijn/#14081" class="Bound">A</a> <a id="14099" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="14101" href="/PLFA-zh/DeBruijn/#14081" class="Bound">A</a>

<a id="twoᶜ"></a><a id="14104" href="/PLFA-zh/DeBruijn/#14104" class="Function">twoᶜ</a> <a id="14109" class="Symbol">:</a> <a id="14111" class="Symbol">∀</a> <a id="14113" class="Symbol">{</a><a id="14114" href="/PLFA-zh/DeBruijn/#14114" class="Bound">Γ</a> <a id="14116" href="/PLFA-zh/DeBruijn/#14116" class="Bound">A</a><a id="14117" class="Symbol">}</a> <a id="14119" class="Symbol">→</a> <a id="14121" href="/PLFA-zh/DeBruijn/#14114" class="Bound">Γ</a> <a id="14123" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="14125" href="/PLFA-zh/DeBruijn/#14061" class="Function">Ch</a> <a id="14128" href="/PLFA-zh/DeBruijn/#14116" class="Bound">A</a>
<a id="14130" href="/PLFA-zh/DeBruijn/#14104" class="Function">twoᶜ</a> <a id="14135" class="Symbol">=</a> <a id="14137" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="14139" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="14141" class="Symbol">(</a><a id="14142" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="14144" class="Number">1</a> <a id="14146" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="14148" class="Symbol">(</a><a id="14149" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="14151" class="Number">1</a> <a id="14153" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="14155" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="14157" class="Number">0</a><a id="14158" class="Symbol">))</a>

<a id="plusᶜ"></a><a id="14162" href="/PLFA-zh/DeBruijn/#14162" class="Function">plusᶜ</a> <a id="14168" class="Symbol">:</a> <a id="14170" class="Symbol">∀</a> <a id="14172" class="Symbol">{</a><a id="14173" href="/PLFA-zh/DeBruijn/#14173" class="Bound">Γ</a> <a id="14175" href="/PLFA-zh/DeBruijn/#14175" class="Bound">A</a><a id="14176" class="Symbol">}</a> <a id="14178" class="Symbol">→</a> <a id="14180" href="/PLFA-zh/DeBruijn/#14173" class="Bound">Γ</a> <a id="14182" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="14184" href="/PLFA-zh/DeBruijn/#14061" class="Function">Ch</a> <a id="14187" href="/PLFA-zh/DeBruijn/#14175" class="Bound">A</a> <a id="14189" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="14191" href="/PLFA-zh/DeBruijn/#14061" class="Function">Ch</a> <a id="14194" href="/PLFA-zh/DeBruijn/#14175" class="Bound">A</a> <a id="14196" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="14198" href="/PLFA-zh/DeBruijn/#14061" class="Function">Ch</a> <a id="14201" href="/PLFA-zh/DeBruijn/#14175" class="Bound">A</a>
<a id="14203" href="/PLFA-zh/DeBruijn/#14162" class="Function">plusᶜ</a> <a id="14209" class="Symbol">=</a> <a id="14211" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="14213" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="14215" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="14217" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="14219" class="Symbol">(</a><a id="14220" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="14222" class="Number">3</a> <a id="14224" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="14226" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="14228" class="Number">1</a> <a id="14230" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="14232" class="Symbol">(</a><a id="14233" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="14235" class="Number">2</a> <a id="14237" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="14239" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="14241" class="Number">1</a> <a id="14243" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="14245" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="14247" class="Number">0</a><a id="14248" class="Symbol">))</a>

<a id="sucᶜ"></a><a id="14252" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="14257" class="Symbol">:</a> <a id="14259" class="Symbol">∀</a> <a id="14261" class="Symbol">{</a><a id="14262" href="/PLFA-zh/DeBruijn/#14262" class="Bound">Γ</a><a id="14263" class="Symbol">}</a> <a id="14265" class="Symbol">→</a> <a id="14267" href="/PLFA-zh/DeBruijn/#14262" class="Bound">Γ</a> <a id="14269" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="14271" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="14274" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="14276" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a>
<a id="14279" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="14284" class="Symbol">=</a> <a id="14286" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="14288" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="14293" class="Symbol">(</a><a id="14294" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="14296" class="Number">0</a><a id="14297" class="Symbol">)</a>

<a id="2+2ᶜ"></a><a id="14300" href="/PLFA-zh/DeBruijn/#14300" class="Function">2+2ᶜ</a> <a id="14305" class="Symbol">:</a> <a id="14307" href="/PLFA-zh/DeBruijn/#8380" class="InductiveConstructor">∅</a> <a id="14309" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="14311" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a>
<a id="14314" href="/PLFA-zh/DeBruijn/#14300" class="Function">2+2ᶜ</a> <a id="14319" class="Symbol">=</a> <a id="14321" href="/PLFA-zh/DeBruijn/#14162" class="Function">plusᶜ</a> <a id="14327" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="14329" href="/PLFA-zh/DeBruijn/#14104" class="Function">twoᶜ</a> <a id="14334" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="14336" href="/PLFA-zh/DeBruijn/#14104" class="Function">twoᶜ</a> <a id="14341" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="14343" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="14348" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="14350" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a></pre>
<p>As before we generalise everything save <code class="highlighter-rouge">2+2ᶜ</code> to arbitrary
contexts.  While we are at it, we also generalise <code class="highlighter-rouge">twoᶜ</code> and
<code class="highlighter-rouge">plusᶜ</code> to Church numerals over arbitrary types.</p>

<h4 id="exercise-mul-recommended">Exercise (<code class="highlighter-rouge">mul</code>) (recommended)</h4>

<p>Write out the definition of a lambda term that multiplies
two natural numbers, now adapted to the inherently typed
DeBruijn representation.</p>

<pre class="Agda"><a id="14731" class="Comment">-- Your code goes here</a></pre>

<h2 id="renaming">Renaming</h2>

<p>Renaming is a necessary prelude to substitution, enabling us
to “rebase” a term from one context to another.  It
corresponds directly to the renaming result from the previous
chapter, but here the theorem that ensures renaming preserves
typing also acts as code that performs renaming.</p>

<p>As before, we first need an extension lemma that allows us to
extend the context when we encounter a binder. Given a map
from variables in one context to variables in another,
extension yields a map from the first context extended to the
second context similarly extended.  It looks exactly like the
old extension lemma, but with all names and terms dropped:</p>
<pre class="Agda"><a id="ext"></a><a id="15439" href="/PLFA-zh/DeBruijn/#15439" class="Function">ext</a> <a id="15443" class="Symbol">:</a> <a id="15445" class="Symbol">∀</a> <a id="15447" class="Symbol">{</a><a id="15448" href="/PLFA-zh/DeBruijn/#15448" class="Bound">Γ</a> <a id="15450" href="/PLFA-zh/DeBruijn/#15450" class="Bound">Δ</a><a id="15451" class="Symbol">}</a>
  <a id="15455" class="Symbol">→</a> <a id="15457" class="Symbol">(∀</a> <a id="15460" class="Symbol">{</a><a id="15461" href="/PLFA-zh/DeBruijn/#15461" class="Bound">A</a><a id="15462" class="Symbol">}</a> <a id="15464" class="Symbol">→</a>       <a id="15472" href="/PLFA-zh/DeBruijn/#15448" class="Bound">Γ</a> <a id="15474" href="/PLFA-zh/DeBruijn/#9267" class="Datatype Operator">∋</a> <a id="15476" href="/PLFA-zh/DeBruijn/#15461" class="Bound">A</a> <a id="15478" class="Symbol">→</a>     <a id="15484" href="/PLFA-zh/DeBruijn/#15450" class="Bound">Δ</a> <a id="15486" href="/PLFA-zh/DeBruijn/#9267" class="Datatype Operator">∋</a> <a id="15488" href="/PLFA-zh/DeBruijn/#15461" class="Bound">A</a><a id="15489" class="Symbol">)</a>
    <a id="15495" class="Comment">-----------------------------------</a>
  <a id="15533" class="Symbol">→</a> <a id="15535" class="Symbol">(∀</a> <a id="15538" class="Symbol">{</a><a id="15539" href="/PLFA-zh/DeBruijn/#15539" class="Bound">A</a> <a id="15541" href="/PLFA-zh/DeBruijn/#15541" class="Bound">B</a><a id="15542" class="Symbol">}</a> <a id="15544" class="Symbol">→</a> <a id="15546" href="/PLFA-zh/DeBruijn/#15448" class="Bound">Γ</a> <a id="15548" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="15550" href="/PLFA-zh/DeBruijn/#15541" class="Bound">B</a> <a id="15552" href="/PLFA-zh/DeBruijn/#9267" class="Datatype Operator">∋</a> <a id="15554" href="/PLFA-zh/DeBruijn/#15539" class="Bound">A</a> <a id="15556" class="Symbol">→</a> <a id="15558" href="/PLFA-zh/DeBruijn/#15450" class="Bound">Δ</a> <a id="15560" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="15562" href="/PLFA-zh/DeBruijn/#15541" class="Bound">B</a> <a id="15564" href="/PLFA-zh/DeBruijn/#9267" class="Datatype Operator">∋</a> <a id="15566" href="/PLFA-zh/DeBruijn/#15539" class="Bound">A</a><a id="15567" class="Symbol">)</a>
<a id="15569" href="/PLFA-zh/DeBruijn/#15439" class="Function">ext</a> <a id="15573" href="/PLFA-zh/DeBruijn/#15573" class="Bound">ρ</a> <a id="15575" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a>      <a id="15582" class="Symbol">=</a>  <a id="15585" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a>
<a id="15587" href="/PLFA-zh/DeBruijn/#15439" class="Function">ext</a> <a id="15591" href="/PLFA-zh/DeBruijn/#15591" class="Bound">ρ</a> <a id="15593" class="Symbol">(</a><a id="15594" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="15596" href="/PLFA-zh/DeBruijn/#15596" class="Bound">x</a><a id="15597" class="Symbol">)</a>  <a id="15600" class="Symbol">=</a>  <a id="15603" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="15605" class="Symbol">(</a><a id="15606" href="/PLFA-zh/DeBruijn/#15591" class="Bound">ρ</a> <a id="15608" href="/PLFA-zh/DeBruijn/#15596" class="Bound">x</a><a id="15609" class="Symbol">)</a></pre>
<p>Let <code class="highlighter-rouge">ρ</code> be the name of the map that takes variables in <code class="highlighter-rouge">Γ</code>
to variables in <code class="highlighter-rouge">Δ</code>.  Consider the de Bruijn index of the
variable in <code class="highlighter-rouge">Γ , B</code>:</p>

<ul>
  <li>
    <p>If it is <code class="highlighter-rouge">Z</code>, which has type <code class="highlighter-rouge">B</code> in <code class="highlighter-rouge">Γ , B</code>,
then we return <code class="highlighter-rouge">Z</code>, which also has type <code class="highlighter-rouge">B</code> in <code class="highlighter-rouge">Δ , B</code>.</p>
  </li>
  <li>
    <p>If it is <code class="highlighter-rouge">S x</code>, for some variable <code class="highlighter-rouge">x</code> in <code class="highlighter-rouge">Γ</code>, then <code class="highlighter-rouge">ρ x</code>
is a variable in <code class="highlighter-rouge">Δ</code>, and hence <code class="highlighter-rouge">S (ρ x)</code> is a variable in
<code class="highlighter-rouge">Δ , B</code>.</p>
  </li>
</ul>

<p>With extension under our belts, it is straightforward
to define renaming.  If variables in one context map to
variables in another, then terms in the first context map to
terms in the second:</p>
<pre class="Agda"><a id="rename"></a><a id="16204" href="/PLFA-zh/DeBruijn/#16204" class="Function">rename</a> <a id="16211" class="Symbol">:</a> <a id="16213" class="Symbol">∀</a> <a id="16215" class="Symbol">{</a><a id="16216" href="/PLFA-zh/DeBruijn/#16216" class="Bound">Γ</a> <a id="16218" href="/PLFA-zh/DeBruijn/#16218" class="Bound">Δ</a><a id="16219" class="Symbol">}</a>
  <a id="16223" class="Symbol">→</a> <a id="16225" class="Symbol">(∀</a> <a id="16228" class="Symbol">{</a><a id="16229" href="/PLFA-zh/DeBruijn/#16229" class="Bound">A</a><a id="16230" class="Symbol">}</a> <a id="16232" class="Symbol">→</a> <a id="16234" href="/PLFA-zh/DeBruijn/#16216" class="Bound">Γ</a> <a id="16236" href="/PLFA-zh/DeBruijn/#9267" class="Datatype Operator">∋</a> <a id="16238" href="/PLFA-zh/DeBruijn/#16229" class="Bound">A</a> <a id="16240" class="Symbol">→</a> <a id="16242" href="/PLFA-zh/DeBruijn/#16218" class="Bound">Δ</a> <a id="16244" href="/PLFA-zh/DeBruijn/#9267" class="Datatype Operator">∋</a> <a id="16246" href="/PLFA-zh/DeBruijn/#16229" class="Bound">A</a><a id="16247" class="Symbol">)</a>
    <a id="16253" class="Comment">------------------------</a>
  <a id="16280" class="Symbol">→</a> <a id="16282" class="Symbol">(∀</a> <a id="16285" class="Symbol">{</a><a id="16286" href="/PLFA-zh/DeBruijn/#16286" class="Bound">A</a><a id="16287" class="Symbol">}</a> <a id="16289" class="Symbol">→</a> <a id="16291" href="/PLFA-zh/DeBruijn/#16216" class="Bound">Γ</a> <a id="16293" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="16295" href="/PLFA-zh/DeBruijn/#16286" class="Bound">A</a> <a id="16297" class="Symbol">→</a> <a id="16299" href="/PLFA-zh/DeBruijn/#16218" class="Bound">Δ</a> <a id="16301" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="16303" href="/PLFA-zh/DeBruijn/#16286" class="Bound">A</a><a id="16304" class="Symbol">)</a>
<a id="16306" href="/PLFA-zh/DeBruijn/#16204" class="Function">rename</a> <a id="16313" href="/PLFA-zh/DeBruijn/#16313" class="Bound">ρ</a> <a id="16315" class="Symbol">(</a><a id="16316" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="16318" href="/PLFA-zh/DeBruijn/#16318" class="Bound">x</a><a id="16319" class="Symbol">)</a>          <a id="16330" class="Symbol">=</a>  <a id="16333" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="16335" class="Symbol">(</a><a id="16336" href="/PLFA-zh/DeBruijn/#16313" class="Bound">ρ</a> <a id="16338" href="/PLFA-zh/DeBruijn/#16318" class="Bound">x</a><a id="16339" class="Symbol">)</a>
<a id="16341" href="/PLFA-zh/DeBruijn/#16204" class="Function">rename</a> <a id="16348" href="/PLFA-zh/DeBruijn/#16348" class="Bound">ρ</a> <a id="16350" class="Symbol">(</a><a id="16351" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="16353" href="/PLFA-zh/DeBruijn/#16353" class="Bound">N</a><a id="16354" class="Symbol">)</a>          <a id="16365" class="Symbol">=</a>  <a id="16368" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="16370" class="Symbol">(</a><a id="16371" href="/PLFA-zh/DeBruijn/#16204" class="Function">rename</a> <a id="16378" class="Symbol">(</a><a id="16379" href="/PLFA-zh/DeBruijn/#15439" class="Function">ext</a> <a id="16383" href="/PLFA-zh/DeBruijn/#16348" class="Bound">ρ</a><a id="16384" class="Symbol">)</a> <a id="16386" href="/PLFA-zh/DeBruijn/#16353" class="Bound">N</a><a id="16387" class="Symbol">)</a>
<a id="16389" href="/PLFA-zh/DeBruijn/#16204" class="Function">rename</a> <a id="16396" href="/PLFA-zh/DeBruijn/#16396" class="Bound">ρ</a> <a id="16398" class="Symbol">(</a><a id="16399" href="/PLFA-zh/DeBruijn/#16399" class="Bound">L</a> <a id="16401" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="16403" href="/PLFA-zh/DeBruijn/#16403" class="Bound">M</a><a id="16404" class="Symbol">)</a>        <a id="16413" class="Symbol">=</a>  <a id="16416" class="Symbol">(</a><a id="16417" href="/PLFA-zh/DeBruijn/#16204" class="Function">rename</a> <a id="16424" href="/PLFA-zh/DeBruijn/#16396" class="Bound">ρ</a> <a id="16426" href="/PLFA-zh/DeBruijn/#16399" class="Bound">L</a><a id="16427" class="Symbol">)</a> <a id="16429" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="16431" class="Symbol">(</a><a id="16432" href="/PLFA-zh/DeBruijn/#16204" class="Function">rename</a> <a id="16439" href="/PLFA-zh/DeBruijn/#16396" class="Bound">ρ</a> <a id="16441" href="/PLFA-zh/DeBruijn/#16403" class="Bound">M</a><a id="16442" class="Symbol">)</a>
<a id="16444" href="/PLFA-zh/DeBruijn/#16204" class="Function">rename</a> <a id="16451" href="/PLFA-zh/DeBruijn/#16451" class="Bound">ρ</a> <a id="16453" class="Symbol">(</a><a id="16454" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="16459" class="Symbol">)</a>        <a id="16468" class="Symbol">=</a>  <a id="16471" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a>
<a id="16477" href="/PLFA-zh/DeBruijn/#16204" class="Function">rename</a> <a id="16484" href="/PLFA-zh/DeBruijn/#16484" class="Bound">ρ</a> <a id="16486" class="Symbol">(</a><a id="16487" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="16492" href="/PLFA-zh/DeBruijn/#16492" class="Bound">M</a><a id="16493" class="Symbol">)</a>       <a id="16501" class="Symbol">=</a>  <a id="16504" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="16509" class="Symbol">(</a><a id="16510" href="/PLFA-zh/DeBruijn/#16204" class="Function">rename</a> <a id="16517" href="/PLFA-zh/DeBruijn/#16484" class="Bound">ρ</a> <a id="16519" href="/PLFA-zh/DeBruijn/#16492" class="Bound">M</a><a id="16520" class="Symbol">)</a>
<a id="16522" href="/PLFA-zh/DeBruijn/#16204" class="Function">rename</a> <a id="16529" href="/PLFA-zh/DeBruijn/#16529" class="Bound">ρ</a> <a id="16531" class="Symbol">(</a><a id="16532" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="16537" href="/PLFA-zh/DeBruijn/#16537" class="Bound">L</a> <a id="16539" href="/PLFA-zh/DeBruijn/#16539" class="Bound">M</a> <a id="16541" href="/PLFA-zh/DeBruijn/#16541" class="Bound">N</a><a id="16542" class="Symbol">)</a>   <a id="16546" class="Symbol">=</a>  <a id="16549" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="16554" class="Symbol">(</a><a id="16555" href="/PLFA-zh/DeBruijn/#16204" class="Function">rename</a> <a id="16562" href="/PLFA-zh/DeBruijn/#16529" class="Bound">ρ</a> <a id="16564" href="/PLFA-zh/DeBruijn/#16537" class="Bound">L</a><a id="16565" class="Symbol">)</a> <a id="16567" class="Symbol">(</a><a id="16568" href="/PLFA-zh/DeBruijn/#16204" class="Function">rename</a> <a id="16575" href="/PLFA-zh/DeBruijn/#16529" class="Bound">ρ</a> <a id="16577" href="/PLFA-zh/DeBruijn/#16539" class="Bound">M</a><a id="16578" class="Symbol">)</a> <a id="16580" class="Symbol">(</a><a id="16581" href="/PLFA-zh/DeBruijn/#16204" class="Function">rename</a> <a id="16588" class="Symbol">(</a><a id="16589" href="/PLFA-zh/DeBruijn/#15439" class="Function">ext</a> <a id="16593" href="/PLFA-zh/DeBruijn/#16529" class="Bound">ρ</a><a id="16594" class="Symbol">)</a> <a id="16596" href="/PLFA-zh/DeBruijn/#16541" class="Bound">N</a><a id="16597" class="Symbol">)</a>
<a id="16599" href="/PLFA-zh/DeBruijn/#16204" class="Function">rename</a> <a id="16606" href="/PLFA-zh/DeBruijn/#16606" class="Bound">ρ</a> <a id="16608" class="Symbol">(</a><a id="16609" href="/PLFA-zh/DeBruijn/#10942" class="InductiveConstructor Operator">μ</a> <a id="16611" href="/PLFA-zh/DeBruijn/#16611" class="Bound">N</a><a id="16612" class="Symbol">)</a>          <a id="16623" class="Symbol">=</a>  <a id="16626" href="/PLFA-zh/DeBruijn/#10942" class="InductiveConstructor Operator">μ</a> <a id="16628" class="Symbol">(</a><a id="16629" href="/PLFA-zh/DeBruijn/#16204" class="Function">rename</a> <a id="16636" class="Symbol">(</a><a id="16637" href="/PLFA-zh/DeBruijn/#15439" class="Function">ext</a> <a id="16641" href="/PLFA-zh/DeBruijn/#16606" class="Bound">ρ</a><a id="16642" class="Symbol">)</a> <a id="16644" href="/PLFA-zh/DeBruijn/#16611" class="Bound">N</a><a id="16645" class="Symbol">)</a></pre>
<p>Let <code class="highlighter-rouge">ρ</code> be the name of the map that takes variables in <code class="highlighter-rouge">Γ</code>
to variables in <code class="highlighter-rouge">Δ</code>.  Let’s unpack the first three cases:</p>

<ul>
  <li>
    <p>If the term is a variable, simply apply <code class="highlighter-rouge">ρ</code>.</p>
  </li>
  <li>
    <p>If the term is an abstraction, use the previous result
to extend the map <code class="highlighter-rouge">ρ</code> suitably and recursively rename
the body of the abstraction.</p>
  </li>
  <li>
    <p>If the term is an application, recursively rename both
the function and the argument.</p>
  </li>
</ul>

<p>The remaining cases are similar, recursing on each subterm,
and extending the map whenever the construct introduces a
bound variable.</p>

<p>Whereas before renaming was a result that carried evidence
that a term is well-typed in one context to evidence that it
is well-typed in another context, now it actually transforms
the term, suitably altering the bound variables. Typechecking
the code in Agda ensures that it is only passed and returns
terms that are well-typed by the rules of simply-typed lambda
calculus.</p>

<p>Here is an example of renaming a term with one free
and one bound variable:</p>
<pre class="Agda"><a id="M₀"></a><a id="17660" href="/PLFA-zh/DeBruijn/#17660" class="Function">M₀</a> <a id="17663" class="Symbol">:</a> <a id="17665" href="/PLFA-zh/DeBruijn/#8380" class="InductiveConstructor">∅</a> <a id="17667" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="17669" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="17672" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="17674" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="17677" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="17679" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="17682" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="17684" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a>
<a id="17687" href="/PLFA-zh/DeBruijn/#17660" class="Function">M₀</a> <a id="17690" class="Symbol">=</a> <a id="17692" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="17694" class="Symbol">(</a><a id="17695" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="17697" class="Number">1</a> <a id="17699" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="17701" class="Symbol">(</a><a id="17702" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="17704" class="Number">1</a> <a id="17706" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="17708" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="17710" class="Number">0</a><a id="17711" class="Symbol">))</a>

<a id="M₁"></a><a id="17715" href="/PLFA-zh/DeBruijn/#17715" class="Function">M₁</a> <a id="17718" class="Symbol">:</a> <a id="17720" href="/PLFA-zh/DeBruijn/#8380" class="InductiveConstructor">∅</a> <a id="17722" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="17724" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="17727" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="17729" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="17732" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="17734" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="17737" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="17739" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="17742" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="17744" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a>
<a id="17747" href="/PLFA-zh/DeBruijn/#17715" class="Function">M₁</a> <a id="17750" class="Symbol">=</a> <a id="17752" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="17754" class="Symbol">(</a><a id="17755" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="17757" class="Number">2</a> <a id="17759" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="17761" class="Symbol">(</a><a id="17762" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="17764" class="Number">2</a> <a id="17766" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="17768" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="17770" class="Number">0</a><a id="17771" class="Symbol">))</a>

<a id="17775" href="/PLFA-zh/DeBruijn/#17775" class="Function">_</a> <a id="17777" class="Symbol">:</a> <a id="17779" href="/PLFA-zh/DeBruijn/#16204" class="Function">rename</a> <a id="17786" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S_</a> <a id="17789" href="/PLFA-zh/DeBruijn/#17660" class="Function">M₀</a> <a id="17792" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="17794" href="/PLFA-zh/DeBruijn/#17715" class="Function">M₁</a>
<a id="17797" class="Symbol">_</a> <a id="17799" class="Symbol">=</a> <a id="17801" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a></pre>
<p>In general, <code class="highlighter-rouge">rename S_</code> will increment the de Bruijn index for
each free variable by one, while leaving the index for each
bound variable unchanged.  The code achieves this naturally:
the map originally increments each variable by one, and is
extended for each bound variable by a map that leaves it
unchanged.</p>

<p>We will see below that renaming by <code class="highlighter-rouge">S_</code> plays a key role in
substitution.  For traditional uses of de Bruijn indices
without inherent typing, this is a little tricky. The code
keeps count of a number where all greater indexes are free and
all smaller indexes bound, and increment only indexes greater
than the number. It’s easy to have off-by-one errors.  But
it’s hard to imagine an off-by-one error that preserves
typing, and hence the Agda code for inherently-typed de Bruijn
terms is inherently reliable.</p>

<h2 id="simultaneous-substitution">Simultaneous Substitution</h2>

<p>Because de Bruijn indices free us of concerns with renaming,
it becomes easy to provide a definition of substitution that
is more general than the one considered previously.  Instead
of substituting a closed term for a single variable, it
provides a map that takes each free variable of the original
term to another term. Further, the substituted terms are over
an arbitrary context, and need not be closed.</p>

<p>The structure of the definition and the proof is remarkably
close to that for renaming.  Again, we first need an extension
lemma that allows us to extend the context when we encounter a
binder.  Whereas renaming concerned a map from variables
in one context to variables in another, substitution takes a
map from variables in one context to <em>terms</em> in another.
Given a map from variables in one context map to terms over
another, extension yields a map from the first context
extended to the second context similarly extended:</p>
<pre class="Agda"><a id="exts"></a><a id="19619" href="/PLFA-zh/DeBruijn/#19619" class="Function">exts</a> <a id="19624" class="Symbol">:</a> <a id="19626" class="Symbol">∀</a> <a id="19628" class="Symbol">{</a><a id="19629" href="/PLFA-zh/DeBruijn/#19629" class="Bound">Γ</a> <a id="19631" href="/PLFA-zh/DeBruijn/#19631" class="Bound">Δ</a><a id="19632" class="Symbol">}</a>
  <a id="19636" class="Symbol">→</a> <a id="19638" class="Symbol">(∀</a> <a id="19641" class="Symbol">{</a><a id="19642" href="/PLFA-zh/DeBruijn/#19642" class="Bound">A</a><a id="19643" class="Symbol">}</a> <a id="19645" class="Symbol">→</a>       <a id="19653" href="/PLFA-zh/DeBruijn/#19629" class="Bound">Γ</a> <a id="19655" href="/PLFA-zh/DeBruijn/#9267" class="Datatype Operator">∋</a> <a id="19657" href="/PLFA-zh/DeBruijn/#19642" class="Bound">A</a> <a id="19659" class="Symbol">→</a>     <a id="19665" href="/PLFA-zh/DeBruijn/#19631" class="Bound">Δ</a> <a id="19667" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="19669" href="/PLFA-zh/DeBruijn/#19642" class="Bound">A</a><a id="19670" class="Symbol">)</a>
    <a id="19676" class="Comment">----------------------------------</a>
  <a id="19713" class="Symbol">→</a> <a id="19715" class="Symbol">(∀</a> <a id="19718" class="Symbol">{</a><a id="19719" href="/PLFA-zh/DeBruijn/#19719" class="Bound">A</a> <a id="19721" href="/PLFA-zh/DeBruijn/#19721" class="Bound">B</a><a id="19722" class="Symbol">}</a> <a id="19724" class="Symbol">→</a> <a id="19726" href="/PLFA-zh/DeBruijn/#19629" class="Bound">Γ</a> <a id="19728" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="19730" href="/PLFA-zh/DeBruijn/#19721" class="Bound">B</a> <a id="19732" href="/PLFA-zh/DeBruijn/#9267" class="Datatype Operator">∋</a> <a id="19734" href="/PLFA-zh/DeBruijn/#19719" class="Bound">A</a> <a id="19736" class="Symbol">→</a> <a id="19738" href="/PLFA-zh/DeBruijn/#19631" class="Bound">Δ</a> <a id="19740" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="19742" href="/PLFA-zh/DeBruijn/#19721" class="Bound">B</a> <a id="19744" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="19746" href="/PLFA-zh/DeBruijn/#19719" class="Bound">A</a><a id="19747" class="Symbol">)</a>
<a id="19749" href="/PLFA-zh/DeBruijn/#19619" class="Function">exts</a> <a id="19754" href="/PLFA-zh/DeBruijn/#19754" class="Bound">σ</a> <a id="19756" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a>      <a id="19763" class="Symbol">=</a>  <a id="19766" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="19768" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a>
<a id="19770" href="/PLFA-zh/DeBruijn/#19619" class="Function">exts</a> <a id="19775" href="/PLFA-zh/DeBruijn/#19775" class="Bound">σ</a> <a id="19777" class="Symbol">(</a><a id="19778" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="19780" href="/PLFA-zh/DeBruijn/#19780" class="Bound">x</a><a id="19781" class="Symbol">)</a>  <a id="19784" class="Symbol">=</a>  <a id="19787" href="/PLFA-zh/DeBruijn/#16204" class="Function">rename</a> <a id="19794" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S_</a> <a id="19797" class="Symbol">(</a><a id="19798" href="/PLFA-zh/DeBruijn/#19775" class="Bound">σ</a> <a id="19800" href="/PLFA-zh/DeBruijn/#19780" class="Bound">x</a><a id="19801" class="Symbol">)</a></pre>
<p>Let <code class="highlighter-rouge">σ</code> be the name of the map that takes variables in <code class="highlighter-rouge">Γ</code>
to terms over <code class="highlighter-rouge">Δ</code>.  Consider the de Bruijn index of the
variable in <code class="highlighter-rouge">Γ , B</code>:</p>

<ul>
  <li>
    <p>If it is <code class="highlighter-rouge">Z</code>, which has type <code class="highlighter-rouge">B</code> in <code class="highlighter-rouge">Γ , B</code>,
then we return the term <code class="highlighter-rouge">` Z</code>, which also has
type <code class="highlighter-rouge">B</code> in <code class="highlighter-rouge">Δ , B</code>.</p>
  </li>
  <li>
    <p>If it is <code class="highlighter-rouge">S x</code>, for some variable <code class="highlighter-rouge">x</code> in <code class="highlighter-rouge">Γ</code>, then
<code class="highlighter-rouge">σ x</code> is a term in <code class="highlighter-rouge">Δ</code>, and hence <code class="highlighter-rouge">rename S_ (σ x)</code>
is a term in <code class="highlighter-rouge">Δ , B</code>.</p>
  </li>
</ul>

<p>This is why we had to define renaming first, since
we require it to convert a term over context <code class="highlighter-rouge">Δ</code>
to a term over the extended context <code class="highlighter-rouge">Δ , B</code>.</p>

<p>With extension under our belts, it is straightforward
to define substitution.  If variable in one context map
to terms over another, then terms in the first context
map to terms in the second:</p>
<pre class="Agda"><a id="subst"></a><a id="20557" href="/PLFA-zh/DeBruijn/#20557" class="Function">subst</a> <a id="20563" class="Symbol">:</a> <a id="20565" class="Symbol">∀</a> <a id="20567" class="Symbol">{</a><a id="20568" href="/PLFA-zh/DeBruijn/#20568" class="Bound">Γ</a> <a id="20570" href="/PLFA-zh/DeBruijn/#20570" class="Bound">Δ</a><a id="20571" class="Symbol">}</a>
  <a id="20575" class="Symbol">→</a> <a id="20577" class="Symbol">(∀</a> <a id="20580" class="Symbol">{</a><a id="20581" href="/PLFA-zh/DeBruijn/#20581" class="Bound">A</a><a id="20582" class="Symbol">}</a> <a id="20584" class="Symbol">→</a> <a id="20586" href="/PLFA-zh/DeBruijn/#20568" class="Bound">Γ</a> <a id="20588" href="/PLFA-zh/DeBruijn/#9267" class="Datatype Operator">∋</a> <a id="20590" href="/PLFA-zh/DeBruijn/#20581" class="Bound">A</a> <a id="20592" class="Symbol">→</a> <a id="20594" href="/PLFA-zh/DeBruijn/#20570" class="Bound">Δ</a> <a id="20596" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="20598" href="/PLFA-zh/DeBruijn/#20581" class="Bound">A</a><a id="20599" class="Symbol">)</a>
    <a id="20605" class="Comment">------------------------</a>
  <a id="20632" class="Symbol">→</a> <a id="20634" class="Symbol">(∀</a> <a id="20637" class="Symbol">{</a><a id="20638" href="/PLFA-zh/DeBruijn/#20638" class="Bound">A</a><a id="20639" class="Symbol">}</a> <a id="20641" class="Symbol">→</a> <a id="20643" href="/PLFA-zh/DeBruijn/#20568" class="Bound">Γ</a> <a id="20645" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="20647" href="/PLFA-zh/DeBruijn/#20638" class="Bound">A</a> <a id="20649" class="Symbol">→</a> <a id="20651" href="/PLFA-zh/DeBruijn/#20570" class="Bound">Δ</a> <a id="20653" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="20655" href="/PLFA-zh/DeBruijn/#20638" class="Bound">A</a><a id="20656" class="Symbol">)</a>
<a id="20658" href="/PLFA-zh/DeBruijn/#20557" class="Function">subst</a> <a id="20664" href="/PLFA-zh/DeBruijn/#20664" class="Bound">σ</a> <a id="20666" class="Symbol">(</a><a id="20667" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="20669" href="/PLFA-zh/DeBruijn/#20669" class="Bound">k</a><a id="20670" class="Symbol">)</a>          <a id="20681" class="Symbol">=</a>  <a id="20684" href="/PLFA-zh/DeBruijn/#20664" class="Bound">σ</a> <a id="20686" href="/PLFA-zh/DeBruijn/#20669" class="Bound">k</a>
<a id="20688" href="/PLFA-zh/DeBruijn/#20557" class="Function">subst</a> <a id="20694" href="/PLFA-zh/DeBruijn/#20694" class="Bound">σ</a> <a id="20696" class="Symbol">(</a><a id="20697" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="20699" href="/PLFA-zh/DeBruijn/#20699" class="Bound">N</a><a id="20700" class="Symbol">)</a>          <a id="20711" class="Symbol">=</a>  <a id="20714" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="20716" class="Symbol">(</a><a id="20717" href="/PLFA-zh/DeBruijn/#20557" class="Function">subst</a> <a id="20723" class="Symbol">(</a><a id="20724" href="/PLFA-zh/DeBruijn/#19619" class="Function">exts</a> <a id="20729" href="/PLFA-zh/DeBruijn/#20694" class="Bound">σ</a><a id="20730" class="Symbol">)</a> <a id="20732" href="/PLFA-zh/DeBruijn/#20699" class="Bound">N</a><a id="20733" class="Symbol">)</a>
<a id="20735" href="/PLFA-zh/DeBruijn/#20557" class="Function">subst</a> <a id="20741" href="/PLFA-zh/DeBruijn/#20741" class="Bound">σ</a> <a id="20743" class="Symbol">(</a><a id="20744" href="/PLFA-zh/DeBruijn/#20744" class="Bound">L</a> <a id="20746" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="20748" href="/PLFA-zh/DeBruijn/#20748" class="Bound">M</a><a id="20749" class="Symbol">)</a>        <a id="20758" class="Symbol">=</a>  <a id="20761" class="Symbol">(</a><a id="20762" href="/PLFA-zh/DeBruijn/#20557" class="Function">subst</a> <a id="20768" href="/PLFA-zh/DeBruijn/#20741" class="Bound">σ</a> <a id="20770" href="/PLFA-zh/DeBruijn/#20744" class="Bound">L</a><a id="20771" class="Symbol">)</a> <a id="20773" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="20775" class="Symbol">(</a><a id="20776" href="/PLFA-zh/DeBruijn/#20557" class="Function">subst</a> <a id="20782" href="/PLFA-zh/DeBruijn/#20741" class="Bound">σ</a> <a id="20784" href="/PLFA-zh/DeBruijn/#20748" class="Bound">M</a><a id="20785" class="Symbol">)</a>
<a id="20787" href="/PLFA-zh/DeBruijn/#20557" class="Function">subst</a> <a id="20793" href="/PLFA-zh/DeBruijn/#20793" class="Bound">σ</a> <a id="20795" class="Symbol">(</a><a id="20796" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="20801" class="Symbol">)</a>        <a id="20810" class="Symbol">=</a>  <a id="20813" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a>
<a id="20819" href="/PLFA-zh/DeBruijn/#20557" class="Function">subst</a> <a id="20825" href="/PLFA-zh/DeBruijn/#20825" class="Bound">σ</a> <a id="20827" class="Symbol">(</a><a id="20828" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="20833" href="/PLFA-zh/DeBruijn/#20833" class="Bound">M</a><a id="20834" class="Symbol">)</a>       <a id="20842" class="Symbol">=</a>  <a id="20845" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="20850" class="Symbol">(</a><a id="20851" href="/PLFA-zh/DeBruijn/#20557" class="Function">subst</a> <a id="20857" href="/PLFA-zh/DeBruijn/#20825" class="Bound">σ</a> <a id="20859" href="/PLFA-zh/DeBruijn/#20833" class="Bound">M</a><a id="20860" class="Symbol">)</a>
<a id="20862" href="/PLFA-zh/DeBruijn/#20557" class="Function">subst</a> <a id="20868" href="/PLFA-zh/DeBruijn/#20868" class="Bound">σ</a> <a id="20870" class="Symbol">(</a><a id="20871" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="20876" href="/PLFA-zh/DeBruijn/#20876" class="Bound">L</a> <a id="20878" href="/PLFA-zh/DeBruijn/#20878" class="Bound">M</a> <a id="20880" href="/PLFA-zh/DeBruijn/#20880" class="Bound">N</a><a id="20881" class="Symbol">)</a>   <a id="20885" class="Symbol">=</a>  <a id="20888" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="20893" class="Symbol">(</a><a id="20894" href="/PLFA-zh/DeBruijn/#20557" class="Function">subst</a> <a id="20900" href="/PLFA-zh/DeBruijn/#20868" class="Bound">σ</a> <a id="20902" href="/PLFA-zh/DeBruijn/#20876" class="Bound">L</a><a id="20903" class="Symbol">)</a> <a id="20905" class="Symbol">(</a><a id="20906" href="/PLFA-zh/DeBruijn/#20557" class="Function">subst</a> <a id="20912" href="/PLFA-zh/DeBruijn/#20868" class="Bound">σ</a> <a id="20914" href="/PLFA-zh/DeBruijn/#20878" class="Bound">M</a><a id="20915" class="Symbol">)</a> <a id="20917" class="Symbol">(</a><a id="20918" href="/PLFA-zh/DeBruijn/#20557" class="Function">subst</a> <a id="20924" class="Symbol">(</a><a id="20925" href="/PLFA-zh/DeBruijn/#19619" class="Function">exts</a> <a id="20930" href="/PLFA-zh/DeBruijn/#20868" class="Bound">σ</a><a id="20931" class="Symbol">)</a> <a id="20933" href="/PLFA-zh/DeBruijn/#20880" class="Bound">N</a><a id="20934" class="Symbol">)</a>
<a id="20936" href="/PLFA-zh/DeBruijn/#20557" class="Function">subst</a> <a id="20942" href="/PLFA-zh/DeBruijn/#20942" class="Bound">σ</a> <a id="20944" class="Symbol">(</a><a id="20945" href="/PLFA-zh/DeBruijn/#10942" class="InductiveConstructor Operator">μ</a> <a id="20947" href="/PLFA-zh/DeBruijn/#20947" class="Bound">N</a><a id="20948" class="Symbol">)</a>          <a id="20959" class="Symbol">=</a>  <a id="20962" href="/PLFA-zh/DeBruijn/#10942" class="InductiveConstructor Operator">μ</a> <a id="20964" class="Symbol">(</a><a id="20965" href="/PLFA-zh/DeBruijn/#20557" class="Function">subst</a> <a id="20971" class="Symbol">(</a><a id="20972" href="/PLFA-zh/DeBruijn/#19619" class="Function">exts</a> <a id="20977" href="/PLFA-zh/DeBruijn/#20942" class="Bound">σ</a><a id="20978" class="Symbol">)</a> <a id="20980" href="/PLFA-zh/DeBruijn/#20947" class="Bound">N</a><a id="20981" class="Symbol">)</a></pre>
<p>Let <code class="highlighter-rouge">σ</code> be the name of the map that takes variables in <code class="highlighter-rouge">Γ</code>
to terms over <code class="highlighter-rouge">Δ</code>.  Let’s unpack the first three cases:</p>

<ul>
  <li>
    <p>If the term is a variable, simply apply <code class="highlighter-rouge">σ</code>.</p>
  </li>
  <li>
    <p>If the term is an abstraction, use the previous result
to extend the map <code class="highlighter-rouge">σ</code> suitably and recursively substitute
over the body of the abstraction.</p>
  </li>
  <li>
    <p>If the term is an application, recursively substitute over
both the function and the argument.</p>
  </li>
</ul>

<p>The remaining cases are similar, recursing on each subterm,
and extending the map whenever the construct introduces a
bound variable.</p>

<h2 id="single-substitution">Single substitution</h2>

<p>From the general case of substitution for multiple free
variables it is easy to define the special case of
substitution for one free variable:</p>
<pre class="Agda"><a id="_[_]"></a><a id="21727" href="/PLFA-zh/DeBruijn/#21727" class="Function Operator">_[_]</a> <a id="21732" class="Symbol">:</a> <a id="21734" class="Symbol">∀</a> <a id="21736" class="Symbol">{</a><a id="21737" href="/PLFA-zh/DeBruijn/#21737" class="Bound">Γ</a> <a id="21739" href="/PLFA-zh/DeBruijn/#21739" class="Bound">A</a> <a id="21741" href="/PLFA-zh/DeBruijn/#21741" class="Bound">B</a><a id="21742" class="Symbol">}</a>
        <a id="21752" class="Symbol">→</a> <a id="21754" href="/PLFA-zh/DeBruijn/#21737" class="Bound">Γ</a> <a id="21756" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="21758" href="/PLFA-zh/DeBruijn/#21741" class="Bound">B</a> <a id="21760" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="21762" href="/PLFA-zh/DeBruijn/#21739" class="Bound">A</a>
        <a id="21772" class="Symbol">→</a> <a id="21774" href="/PLFA-zh/DeBruijn/#21737" class="Bound">Γ</a> <a id="21776" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="21778" href="/PLFA-zh/DeBruijn/#21741" class="Bound">B</a> 
          <a id="21791" class="Comment">---------</a>
        <a id="21809" class="Symbol">→</a> <a id="21811" href="/PLFA-zh/DeBruijn/#21737" class="Bound">Γ</a> <a id="21813" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="21815" href="/PLFA-zh/DeBruijn/#21739" class="Bound">A</a>
<a id="21817" href="/PLFA-zh/DeBruijn/#21727" class="Function Operator">_[_]</a> <a id="21822" class="Symbol">{</a><a id="21823" href="/PLFA-zh/DeBruijn/#21823" class="Bound">Γ</a><a id="21824" class="Symbol">}</a> <a id="21826" class="Symbol">{</a><a id="21827" href="/PLFA-zh/DeBruijn/#21827" class="Bound">A</a><a id="21828" class="Symbol">}</a> <a id="21830" class="Symbol">{</a><a id="21831" href="/PLFA-zh/DeBruijn/#21831" class="Bound">B</a><a id="21832" class="Symbol">}</a> <a id="21834" href="/PLFA-zh/DeBruijn/#21834" class="Bound">N</a> <a id="21836" href="/PLFA-zh/DeBruijn/#21836" class="Bound">M</a> <a id="21838" class="Symbol">=</a>  <a id="21841" href="/PLFA-zh/DeBruijn/#20557" class="Function">subst</a> <a id="21847" class="Symbol">{</a><a id="21848" href="/PLFA-zh/DeBruijn/#21823" class="Bound">Γ</a> <a id="21850" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="21852" href="/PLFA-zh/DeBruijn/#21831" class="Bound">B</a><a id="21853" class="Symbol">}</a> <a id="21855" class="Symbol">{</a><a id="21856" href="/PLFA-zh/DeBruijn/#21823" class="Bound">Γ</a><a id="21857" class="Symbol">}</a> <a id="21859" href="/PLFA-zh/DeBruijn/#21877" class="Function">σ</a> <a id="21861" class="Symbol">{</a><a id="21862" href="/PLFA-zh/DeBruijn/#21827" class="Bound">A</a><a id="21863" class="Symbol">}</a> <a id="21865" href="/PLFA-zh/DeBruijn/#21834" class="Bound">N</a>
  <a id="21869" class="Keyword">where</a>
  <a id="21877" href="/PLFA-zh/DeBruijn/#21877" class="Function">σ</a> <a id="21879" class="Symbol">:</a> <a id="21881" class="Symbol">∀</a> <a id="21883" class="Symbol">{</a><a id="21884" href="/PLFA-zh/DeBruijn/#21884" class="Bound">A</a><a id="21885" class="Symbol">}</a> <a id="21887" class="Symbol">→</a> <a id="21889" href="/PLFA-zh/DeBruijn/#21823" class="Bound">Γ</a> <a id="21891" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="21893" href="/PLFA-zh/DeBruijn/#21831" class="Bound">B</a> <a id="21895" href="/PLFA-zh/DeBruijn/#9267" class="Datatype Operator">∋</a> <a id="21897" href="/PLFA-zh/DeBruijn/#21884" class="Bound">A</a> <a id="21899" class="Symbol">→</a> <a id="21901" href="/PLFA-zh/DeBruijn/#21823" class="Bound">Γ</a> <a id="21903" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="21905" href="/PLFA-zh/DeBruijn/#21884" class="Bound">A</a>
  <a id="21909" href="/PLFA-zh/DeBruijn/#21877" class="Function">σ</a> <a id="21911" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a>      <a id="21918" class="Symbol">=</a>  <a id="21921" href="/PLFA-zh/DeBruijn/#21836" class="Bound">M</a>
  <a id="21925" href="/PLFA-zh/DeBruijn/#21877" class="Function">σ</a> <a id="21927" class="Symbol">(</a><a id="21928" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="21930" href="/PLFA-zh/DeBruijn/#21930" class="Bound">x</a><a id="21931" class="Symbol">)</a>  <a id="21934" class="Symbol">=</a>  <a id="21937" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="21939" href="/PLFA-zh/DeBruijn/#21930" class="Bound">x</a></pre>
<p>In a term of type <code class="highlighter-rouge">A</code> over context <code class="highlighter-rouge">Γ , B</code>, we replace the
variable of type <code class="highlighter-rouge">B</code> by a term of type <code class="highlighter-rouge">B</code> over context <code class="highlighter-rouge">Γ</code>.
To do so, we use a map from the context <code class="highlighter-rouge">Γ , B</code> to the context
<code class="highlighter-rouge">Γ</code>, that maps the last variable in the context to the term of
type <code class="highlighter-rouge">B</code> and every other free variable to itself.</p>

<p>Consider the previous example:</p>

<ul>
  <li><code class="highlighter-rouge">(ƛ "z" ⇒ ` "s" · (` "s" · ` "z")) [ "s" := sucᶜ ]</code> yields
   ƛ “z” ⇒ sucᶜ · (sucᶜ · ` “z”) ``</li>
</ul>

<p>Here is the example formalised:</p>
<pre class="Agda"><a id="M₂"></a><a id="22430" href="/PLFA-zh/DeBruijn/#22430" class="Function">M₂</a> <a id="22433" class="Symbol">:</a> <a id="22435" href="/PLFA-zh/DeBruijn/#8380" class="InductiveConstructor">∅</a> <a id="22437" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="22439" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="22442" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="22444" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="22447" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="22449" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="22452" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="22454" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a>
<a id="22457" href="/PLFA-zh/DeBruijn/#22430" class="Function">M₂</a> <a id="22460" class="Symbol">=</a> <a id="22462" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="22464" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="22466" class="Number">1</a> <a id="22468" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="22470" class="Symbol">(</a><a id="22471" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="22473" class="Number">1</a> <a id="22475" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="22477" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="22479" class="Number">0</a><a id="22480" class="Symbol">)</a>

<a id="M₃"></a><a id="22483" href="/PLFA-zh/DeBruijn/#22483" class="Function">M₃</a> <a id="22486" class="Symbol">:</a> <a id="22488" href="/PLFA-zh/DeBruijn/#8380" class="InductiveConstructor">∅</a> <a id="22490" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="22492" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="22495" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="22497" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a>
<a id="22500" href="/PLFA-zh/DeBruijn/#22483" class="Function">M₃</a> <a id="22503" class="Symbol">=</a> <a id="22505" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="22507" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="22512" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="22514" class="Number">0</a>

<a id="M₄"></a><a id="22517" href="/PLFA-zh/DeBruijn/#22517" class="Function">M₄</a> <a id="22520" class="Symbol">:</a> <a id="22522" href="/PLFA-zh/DeBruijn/#8380" class="InductiveConstructor">∅</a> <a id="22524" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="22526" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="22529" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="22531" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a>
<a id="22534" href="/PLFA-zh/DeBruijn/#22517" class="Function">M₄</a> <a id="22537" class="Symbol">=</a> <a id="22539" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="22541" class="Symbol">(</a><a id="22542" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="22544" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="22549" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="22551" class="Number">0</a><a id="22552" class="Symbol">)</a> <a id="22554" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="22556" class="Symbol">((</a><a id="22558" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="22560" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="22565" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="22567" class="Number">0</a><a id="22568" class="Symbol">)</a> <a id="22570" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="22572" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="22574" class="Number">0</a><a id="22575" class="Symbol">)</a>

<a id="22578" href="/PLFA-zh/DeBruijn/#22578" class="Function">_</a> <a id="22580" class="Symbol">:</a> <a id="22582" href="/PLFA-zh/DeBruijn/#22430" class="Function">M₂</a> <a id="22585" href="/PLFA-zh/DeBruijn/#21727" class="Function Operator">[</a> <a id="22587" href="/PLFA-zh/DeBruijn/#22483" class="Function">M₃</a> <a id="22590" href="/PLFA-zh/DeBruijn/#21727" class="Function Operator">]</a> <a id="22592" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="22594" href="/PLFA-zh/DeBruijn/#22517" class="Function">M₄</a>
<a id="22597" class="Symbol">_</a> <a id="22599" class="Symbol">=</a> <a id="22601" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a></pre>

<p>Previously, we presented an example of substitution that we
did not implement, since it needed to rename the bound
variable to avoid capture:</p>

<ul>
  <li><code class="highlighter-rouge">(ƛ "x" ⇒ ` "x" · ` "y") [ "y" := ` "x" · `zero ]</code> should yield
<code class="highlighter-rouge">ƛ "z" ⇒ ` "z" · (` "x" · `zero)</code></li>
</ul>

<p>Say the bound <code class="highlighter-rouge">"x"</code> has type <code class="highlighter-rouge">`ℕ ⇒ `ℕ</code>, the substituted
<code class="highlighter-rouge">"y"</code> has type <code class="highlighter-rouge">`ℕ</code>, and the free <code class="highlighter-rouge">"x"</code> also has type <code class="highlighter-rouge">
`ℕ ⇒ `ℕ</code>.  Here is the example formalised:</p>
<pre class="Agda"><a id="M₅"></a><a id="23051" href="/PLFA-zh/DeBruijn/#23051" class="Function">M₅</a> <a id="23054" class="Symbol">:</a> <a id="23056" href="/PLFA-zh/DeBruijn/#8380" class="InductiveConstructor">∅</a> <a id="23058" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="23060" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="23063" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="23065" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="23068" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="23070" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="23073" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="23075" class="Symbol">(</a><a id="23076" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="23079" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="23081" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a><a id="23083" class="Symbol">)</a> <a id="23085" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="23087" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a>
<a id="23090" href="/PLFA-zh/DeBruijn/#23051" class="Function">M₅</a> <a id="23093" class="Symbol">=</a> <a id="23095" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="23097" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="23099" class="Number">0</a> <a id="23101" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="23103" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="23105" class="Number">1</a>

<a id="M₆"></a><a id="23108" href="/PLFA-zh/DeBruijn/#23108" class="Function">M₆</a> <a id="23111" class="Symbol">:</a> <a id="23113" href="/PLFA-zh/DeBruijn/#8380" class="InductiveConstructor">∅</a> <a id="23115" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="23117" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="23120" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="23122" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="23125" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="23127" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a>
<a id="23130" href="/PLFA-zh/DeBruijn/#23108" class="Function">M₆</a> <a id="23133" class="Symbol">=</a> <a id="23135" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="23137" class="Number">0</a> <a id="23139" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="23141" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a>

<a id="M₇"></a><a id="23148" href="/PLFA-zh/DeBruijn/#23148" class="Function">M₇</a> <a id="23151" class="Symbol">:</a> <a id="23153" href="/PLFA-zh/DeBruijn/#8380" class="InductiveConstructor">∅</a> <a id="23155" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="23157" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="23160" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="23162" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="23165" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="23167" class="Symbol">(</a><a id="23168" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="23171" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="23173" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a><a id="23175" class="Symbol">)</a> <a id="23177" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="23179" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a>
<a id="23182" href="/PLFA-zh/DeBruijn/#23148" class="Function">M₇</a> <a id="23185" class="Symbol">=</a> <a id="23187" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="23189" class="Symbol">(</a><a id="23190" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="23192" class="Number">0</a> <a id="23194" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="23196" class="Symbol">(</a><a id="23197" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="23199" class="Number">1</a> <a id="23201" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="23203" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="23208" class="Symbol">))</a>

<a id="23212" href="/PLFA-zh/DeBruijn/#23212" class="Function">_</a> <a id="23214" class="Symbol">:</a> <a id="23216" href="/PLFA-zh/DeBruijn/#23051" class="Function">M₅</a> <a id="23219" href="/PLFA-zh/DeBruijn/#21727" class="Function Operator">[</a> <a id="23221" href="/PLFA-zh/DeBruijn/#23108" class="Function">M₆</a> <a id="23224" href="/PLFA-zh/DeBruijn/#21727" class="Function Operator">]</a> <a id="23226" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a> <a id="23228" href="/PLFA-zh/DeBruijn/#23148" class="Function">M₇</a>
<a id="23231" class="Symbol">_</a> <a id="23233" class="Symbol">=</a> <a id="23235" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a></pre>

<p>The logician Haskell Curry observed that getting the
definition of substitution right can be a tricky business.  It
can be even trickier when using de Bruijn indices, which can
often be hard to decipher.  Under the current approach, any
definition of substitution must, of necessity, preserves
types.  While this makes the definition more involved, it
means that once it is done the hardest work is out of the way.
And combining definition with proof makes it harder for errors
to sneak in.</p>

<h2 id="values">Values</h2>

<p>The definition of value is much as before, save that the
added types incorporate the same information found in the
Canonical Forms lemma:</p>
<pre class="Agda"><a id="23907" class="Keyword">data</a> <a id="Value"></a><a id="23912" href="/PLFA-zh/DeBruijn/#23912" class="Datatype">Value</a> <a id="23918" class="Symbol">:</a> <a id="23920" class="Symbol">∀</a> <a id="23922" class="Symbol">{</a><a id="23923" href="/PLFA-zh/DeBruijn/#23923" class="Bound">Γ</a> <a id="23925" href="/PLFA-zh/DeBruijn/#23925" class="Bound">A</a><a id="23926" class="Symbol">}</a> <a id="23928" class="Symbol">→</a> <a id="23930" href="/PLFA-zh/DeBruijn/#23923" class="Bound">Γ</a> <a id="23932" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="23934" href="/PLFA-zh/DeBruijn/#23925" class="Bound">A</a> <a id="23936" class="Symbol">→</a> <a id="23938" class="PrimitiveType">Set</a> <a id="23942" class="Keyword">where</a>

  <a id="Value.V-ƛ"></a><a id="23951" href="/PLFA-zh/DeBruijn/#23951" class="InductiveConstructor">V-ƛ</a> <a id="23955" class="Symbol">:</a> <a id="23957" class="Symbol">∀</a> <a id="23959" class="Symbol">{</a><a id="23960" href="/PLFA-zh/DeBruijn/#23960" class="Bound">Γ</a> <a id="23962" href="/PLFA-zh/DeBruijn/#23962" class="Bound">A</a> <a id="23964" href="/PLFA-zh/DeBruijn/#23964" class="Bound">B</a><a id="23965" class="Symbol">}</a> <a id="23967" class="Symbol">{</a><a id="23968" href="/PLFA-zh/DeBruijn/#23968" class="Bound">N</a> <a id="23970" class="Symbol">:</a> <a id="23972" href="/PLFA-zh/DeBruijn/#23960" class="Bound">Γ</a> <a id="23974" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="23976" href="/PLFA-zh/DeBruijn/#23962" class="Bound">A</a> <a id="23978" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="23980" href="/PLFA-zh/DeBruijn/#23964" class="Bound">B</a><a id="23981" class="Symbol">}</a>
      <a id="23989" class="Comment">---------------------------</a>
    <a id="24021" class="Symbol">→</a> <a id="24023" href="/PLFA-zh/DeBruijn/#23912" class="Datatype">Value</a> <a id="24029" class="Symbol">(</a><a id="24030" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="24032" href="/PLFA-zh/DeBruijn/#23968" class="Bound">N</a><a id="24033" class="Symbol">)</a>

  <a id="Value.V-zero"></a><a id="24038" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a> <a id="24045" class="Symbol">:</a> <a id="24047" class="Symbol">∀</a> <a id="24049" class="Symbol">{</a><a id="24050" href="/PLFA-zh/DeBruijn/#24050" class="Bound">Γ</a><a id="24051" class="Symbol">}</a>
      <a id="24059" class="Comment">-----------------</a>
    <a id="24081" class="Symbol">→</a> <a id="24083" href="/PLFA-zh/DeBruijn/#23912" class="Datatype">Value</a> <a id="24089" class="Symbol">(</a><a id="24090" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a> <a id="24096" class="Symbol">{</a><a id="24097" href="/PLFA-zh/DeBruijn/#24050" class="Bound">Γ</a><a id="24098" class="Symbol">})</a>

  <a id="Value.V-suc"></a><a id="24104" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="24110" class="Symbol">:</a> <a id="24112" class="Symbol">∀</a> <a id="24114" class="Symbol">{</a><a id="24115" href="/PLFA-zh/DeBruijn/#24115" class="Bound">Γ</a><a id="24116" class="Symbol">}</a> <a id="24118" class="Symbol">{</a><a id="24119" href="/PLFA-zh/DeBruijn/#24119" class="Bound">V</a> <a id="24121" class="Symbol">:</a> <a id="24123" href="/PLFA-zh/DeBruijn/#24115" class="Bound">Γ</a> <a id="24125" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="24127" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a><a id="24129" class="Symbol">}</a>
    <a id="24135" class="Symbol">→</a> <a id="24137" href="/PLFA-zh/DeBruijn/#23912" class="Datatype">Value</a> <a id="24143" href="/PLFA-zh/DeBruijn/#24119" class="Bound">V</a>
      <a id="24151" class="Comment">--------------</a>
    <a id="24170" class="Symbol">→</a> <a id="24172" href="/PLFA-zh/DeBruijn/#23912" class="Datatype">Value</a> <a id="24178" class="Symbol">(</a><a id="24179" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="24184" href="/PLFA-zh/DeBruijn/#24119" class="Bound">V</a><a id="24185" class="Symbol">)</a></pre>

<p>Here <code class="highlighter-rouge">zero</code> requires an implicit parameter to aid inference,
much in the same way that <code class="highlighter-rouge">[]</code> did in
<a href="/PLFA-zh/Lists/">Lists</a>.</p>

<h2 id="reduction">Reduction</h2>

<p>The reduction rules are the same as those given earlier, save
that for each term we must specify its types.  As before, we
have compatibility rules that reduce a part of a term,
labelled with <code class="highlighter-rouge">ξ</code>, and rules that simplify a constructor
combined with a destructor, labelled with <code class="highlighter-rouge">β</code>:</p>

<pre class="Agda"><a id="24631" class="Keyword">infix</a> <a id="24637" class="Number">2</a> <a id="24639" href="/PLFA-zh/DeBruijn/#24650" class="Datatype Operator">_—→_</a>

<a id="24645" class="Keyword">data</a> <a id="_—→_"></a><a id="24650" href="/PLFA-zh/DeBruijn/#24650" class="Datatype Operator">_—→_</a> <a id="24655" class="Symbol">:</a> <a id="24657" class="Symbol">∀</a> <a id="24659" class="Symbol">{</a><a id="24660" href="/PLFA-zh/DeBruijn/#24660" class="Bound">Γ</a> <a id="24662" href="/PLFA-zh/DeBruijn/#24662" class="Bound">A</a><a id="24663" class="Symbol">}</a> <a id="24665" class="Symbol">→</a> <a id="24667" class="Symbol">(</a><a id="24668" href="/PLFA-zh/DeBruijn/#24660" class="Bound">Γ</a> <a id="24670" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="24672" href="/PLFA-zh/DeBruijn/#24662" class="Bound">A</a><a id="24673" class="Symbol">)</a> <a id="24675" class="Symbol">→</a> <a id="24677" class="Symbol">(</a><a id="24678" href="/PLFA-zh/DeBruijn/#24660" class="Bound">Γ</a> <a id="24680" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="24682" href="/PLFA-zh/DeBruijn/#24662" class="Bound">A</a><a id="24683" class="Symbol">)</a> <a id="24685" class="Symbol">→</a> <a id="24687" class="PrimitiveType">Set</a> <a id="24691" class="Keyword">where</a>

  <a id="_—→_.ξ-·₁"></a><a id="24700" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="24705" class="Symbol">:</a> <a id="24707" class="Symbol">∀</a> <a id="24709" class="Symbol">{</a><a id="24710" href="/PLFA-zh/DeBruijn/#24710" class="Bound">Γ</a> <a id="24712" href="/PLFA-zh/DeBruijn/#24712" class="Bound">A</a> <a id="24714" href="/PLFA-zh/DeBruijn/#24714" class="Bound">B</a><a id="24715" class="Symbol">}</a> <a id="24717" class="Symbol">{</a><a id="24718" href="/PLFA-zh/DeBruijn/#24718" class="Bound">L</a> <a id="24720" href="/PLFA-zh/DeBruijn/#24720" class="Bound">L′</a> <a id="24723" class="Symbol">:</a> <a id="24725" href="/PLFA-zh/DeBruijn/#24710" class="Bound">Γ</a> <a id="24727" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="24729" href="/PLFA-zh/DeBruijn/#24712" class="Bound">A</a> <a id="24731" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="24733" href="/PLFA-zh/DeBruijn/#24714" class="Bound">B</a><a id="24734" class="Symbol">}</a> <a id="24736" class="Symbol">{</a><a id="24737" href="/PLFA-zh/DeBruijn/#24737" class="Bound">M</a> <a id="24739" class="Symbol">:</a> <a id="24741" href="/PLFA-zh/DeBruijn/#24710" class="Bound">Γ</a> <a id="24743" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="24745" href="/PLFA-zh/DeBruijn/#24712" class="Bound">A</a><a id="24746" class="Symbol">}</a>
    <a id="24752" class="Symbol">→</a> <a id="24754" href="/PLFA-zh/DeBruijn/#24718" class="Bound">L</a> <a id="24756" href="/PLFA-zh/DeBruijn/#24650" class="Datatype Operator">—→</a> <a id="24759" href="/PLFA-zh/DeBruijn/#24720" class="Bound">L′</a>
      <a id="24768" class="Comment">-----------------</a>
    <a id="24790" class="Symbol">→</a> <a id="24792" href="/PLFA-zh/DeBruijn/#24718" class="Bound">L</a> <a id="24794" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="24796" href="/PLFA-zh/DeBruijn/#24737" class="Bound">M</a> <a id="24798" href="/PLFA-zh/DeBruijn/#24650" class="Datatype Operator">—→</a> <a id="24801" href="/PLFA-zh/DeBruijn/#24720" class="Bound">L′</a> <a id="24804" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="24806" href="/PLFA-zh/DeBruijn/#24737" class="Bound">M</a>

  <a id="_—→_.ξ-·₂"></a><a id="24811" href="/PLFA-zh/DeBruijn/#24811" class="InductiveConstructor">ξ-·₂</a> <a id="24816" class="Symbol">:</a> <a id="24818" class="Symbol">∀</a> <a id="24820" class="Symbol">{</a><a id="24821" href="/PLFA-zh/DeBruijn/#24821" class="Bound">Γ</a> <a id="24823" href="/PLFA-zh/DeBruijn/#24823" class="Bound">A</a> <a id="24825" href="/PLFA-zh/DeBruijn/#24825" class="Bound">B</a><a id="24826" class="Symbol">}</a> <a id="24828" class="Symbol">{</a><a id="24829" href="/PLFA-zh/DeBruijn/#24829" class="Bound">V</a> <a id="24831" class="Symbol">:</a> <a id="24833" href="/PLFA-zh/DeBruijn/#24821" class="Bound">Γ</a> <a id="24835" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="24837" href="/PLFA-zh/DeBruijn/#24823" class="Bound">A</a> <a id="24839" href="/PLFA-zh/DeBruijn/#8193" class="InductiveConstructor Operator">⇒</a> <a id="24841" href="/PLFA-zh/DeBruijn/#24825" class="Bound">B</a><a id="24842" class="Symbol">}</a> <a id="24844" class="Symbol">{</a><a id="24845" href="/PLFA-zh/DeBruijn/#24845" class="Bound">M</a> <a id="24847" href="/PLFA-zh/DeBruijn/#24847" class="Bound">M′</a> <a id="24850" class="Symbol">:</a> <a id="24852" href="/PLFA-zh/DeBruijn/#24821" class="Bound">Γ</a> <a id="24854" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="24856" href="/PLFA-zh/DeBruijn/#24823" class="Bound">A</a><a id="24857" class="Symbol">}</a>
    <a id="24863" class="Symbol">→</a> <a id="24865" href="/PLFA-zh/DeBruijn/#23912" class="Datatype">Value</a> <a id="24871" href="/PLFA-zh/DeBruijn/#24829" class="Bound">V</a>
    <a id="24877" class="Symbol">→</a> <a id="24879" href="/PLFA-zh/DeBruijn/#24845" class="Bound">M</a> <a id="24881" href="/PLFA-zh/DeBruijn/#24650" class="Datatype Operator">—→</a> <a id="24884" href="/PLFA-zh/DeBruijn/#24847" class="Bound">M′</a>
      <a id="24893" class="Comment">--------------</a>
    <a id="24912" class="Symbol">→</a> <a id="24914" href="/PLFA-zh/DeBruijn/#24829" class="Bound">V</a> <a id="24916" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="24918" href="/PLFA-zh/DeBruijn/#24845" class="Bound">M</a> <a id="24920" href="/PLFA-zh/DeBruijn/#24650" class="Datatype Operator">—→</a> <a id="24923" href="/PLFA-zh/DeBruijn/#24829" class="Bound">V</a> <a id="24925" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="24927" href="/PLFA-zh/DeBruijn/#24847" class="Bound">M′</a>

  <a id="_—→_.β-ƛ"></a><a id="24933" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="24937" class="Symbol">:</a> <a id="24939" class="Symbol">∀</a> <a id="24941" class="Symbol">{</a><a id="24942" href="/PLFA-zh/DeBruijn/#24942" class="Bound">Γ</a> <a id="24944" href="/PLFA-zh/DeBruijn/#24944" class="Bound">A</a> <a id="24946" href="/PLFA-zh/DeBruijn/#24946" class="Bound">B</a><a id="24947" class="Symbol">}</a> <a id="24949" class="Symbol">{</a><a id="24950" href="/PLFA-zh/DeBruijn/#24950" class="Bound">N</a> <a id="24952" class="Symbol">:</a> <a id="24954" href="/PLFA-zh/DeBruijn/#24942" class="Bound">Γ</a> <a id="24956" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="24958" href="/PLFA-zh/DeBruijn/#24944" class="Bound">A</a> <a id="24960" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="24962" href="/PLFA-zh/DeBruijn/#24946" class="Bound">B</a><a id="24963" class="Symbol">}</a> <a id="24965" class="Symbol">{</a><a id="24966" href="/PLFA-zh/DeBruijn/#24966" class="Bound">W</a> <a id="24968" class="Symbol">:</a> <a id="24970" href="/PLFA-zh/DeBruijn/#24942" class="Bound">Γ</a> <a id="24972" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="24974" href="/PLFA-zh/DeBruijn/#24944" class="Bound">A</a><a id="24975" class="Symbol">}</a>
    <a id="24981" class="Symbol">→</a> <a id="24983" href="/PLFA-zh/DeBruijn/#23912" class="Datatype">Value</a> <a id="24989" href="/PLFA-zh/DeBruijn/#24966" class="Bound">W</a>
      <a id="24997" class="Comment">-------------------</a>
    <a id="25021" class="Symbol">→</a> <a id="25023" class="Symbol">(</a><a id="25024" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="25026" href="/PLFA-zh/DeBruijn/#24950" class="Bound">N</a><a id="25027" class="Symbol">)</a> <a id="25029" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="25031" href="/PLFA-zh/DeBruijn/#24966" class="Bound">W</a> <a id="25033" href="/PLFA-zh/DeBruijn/#24650" class="Datatype Operator">—→</a> <a id="25036" href="/PLFA-zh/DeBruijn/#24950" class="Bound">N</a> <a id="25038" href="/PLFA-zh/DeBruijn/#21727" class="Function Operator">[</a> <a id="25040" href="/PLFA-zh/DeBruijn/#24966" class="Bound">W</a> <a id="25042" href="/PLFA-zh/DeBruijn/#21727" class="Function Operator">]</a>

  <a id="_—→_.ξ-suc"></a><a id="25047" href="/PLFA-zh/DeBruijn/#25047" class="InductiveConstructor">ξ-suc</a> <a id="25053" class="Symbol">:</a> <a id="25055" class="Symbol">∀</a> <a id="25057" class="Symbol">{</a><a id="25058" href="/PLFA-zh/DeBruijn/#25058" class="Bound">Γ</a><a id="25059" class="Symbol">}</a> <a id="25061" class="Symbol">{</a><a id="25062" href="/PLFA-zh/DeBruijn/#25062" class="Bound">M</a> <a id="25064" href="/PLFA-zh/DeBruijn/#25064" class="Bound">M′</a> <a id="25067" class="Symbol">:</a> <a id="25069" href="/PLFA-zh/DeBruijn/#25058" class="Bound">Γ</a> <a id="25071" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="25073" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a><a id="25075" class="Symbol">}</a>
    <a id="25081" class="Symbol">→</a> <a id="25083" href="/PLFA-zh/DeBruijn/#25062" class="Bound">M</a> <a id="25085" href="/PLFA-zh/DeBruijn/#24650" class="Datatype Operator">—→</a> <a id="25088" href="/PLFA-zh/DeBruijn/#25064" class="Bound">M′</a>
      <a id="25097" class="Comment">----------------</a>
    <a id="25118" class="Symbol">→</a> <a id="25120" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="25125" href="/PLFA-zh/DeBruijn/#25062" class="Bound">M</a> <a id="25127" href="/PLFA-zh/DeBruijn/#24650" class="Datatype Operator">—→</a> <a id="25130" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="25135" href="/PLFA-zh/DeBruijn/#25064" class="Bound">M′</a>

  <a id="_—→_.ξ-case"></a><a id="25141" href="/PLFA-zh/DeBruijn/#25141" class="InductiveConstructor">ξ-case</a> <a id="25148" class="Symbol">:</a> <a id="25150" class="Symbol">∀</a> <a id="25152" class="Symbol">{</a><a id="25153" href="/PLFA-zh/DeBruijn/#25153" class="Bound">Γ</a> <a id="25155" href="/PLFA-zh/DeBruijn/#25155" class="Bound">A</a><a id="25156" class="Symbol">}</a> <a id="25158" class="Symbol">{</a><a id="25159" href="/PLFA-zh/DeBruijn/#25159" class="Bound">L</a> <a id="25161" href="/PLFA-zh/DeBruijn/#25161" class="Bound">L′</a> <a id="25164" class="Symbol">:</a> <a id="25166" href="/PLFA-zh/DeBruijn/#25153" class="Bound">Γ</a> <a id="25168" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="25170" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a><a id="25172" class="Symbol">}</a> <a id="25174" class="Symbol">{</a><a id="25175" href="/PLFA-zh/DeBruijn/#25175" class="Bound">M</a> <a id="25177" class="Symbol">:</a> <a id="25179" href="/PLFA-zh/DeBruijn/#25153" class="Bound">Γ</a> <a id="25181" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="25183" href="/PLFA-zh/DeBruijn/#25155" class="Bound">A</a><a id="25184" class="Symbol">}</a> <a id="25186" class="Symbol">{</a><a id="25187" href="/PLFA-zh/DeBruijn/#25187" class="Bound">N</a> <a id="25189" class="Symbol">:</a> <a id="25191" href="/PLFA-zh/DeBruijn/#25153" class="Bound">Γ</a> <a id="25193" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="25195" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="25198" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="25200" href="/PLFA-zh/DeBruijn/#25155" class="Bound">A</a><a id="25201" class="Symbol">}</a>
    <a id="25207" class="Symbol">→</a> <a id="25209" href="/PLFA-zh/DeBruijn/#25159" class="Bound">L</a> <a id="25211" href="/PLFA-zh/DeBruijn/#24650" class="Datatype Operator">—→</a> <a id="25214" href="/PLFA-zh/DeBruijn/#25161" class="Bound">L′</a>
      <a id="25223" class="Comment">--------------------------</a>
    <a id="25254" class="Symbol">→</a> <a id="25256" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="25261" href="/PLFA-zh/DeBruijn/#25159" class="Bound">L</a> <a id="25263" href="/PLFA-zh/DeBruijn/#25175" class="Bound">M</a> <a id="25265" href="/PLFA-zh/DeBruijn/#25187" class="Bound">N</a> <a id="25267" href="/PLFA-zh/DeBruijn/#24650" class="Datatype Operator">—→</a> <a id="25270" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="25275" href="/PLFA-zh/DeBruijn/#25161" class="Bound">L′</a> <a id="25278" href="/PLFA-zh/DeBruijn/#25175" class="Bound">M</a> <a id="25280" href="/PLFA-zh/DeBruijn/#25187" class="Bound">N</a>

  <a id="_—→_.β-zero"></a><a id="25285" href="/PLFA-zh/DeBruijn/#25285" class="InductiveConstructor">β-zero</a> <a id="25292" class="Symbol">:</a>  <a id="25295" class="Symbol">∀</a> <a id="25297" class="Symbol">{</a><a id="25298" href="/PLFA-zh/DeBruijn/#25298" class="Bound">Γ</a> <a id="25300" href="/PLFA-zh/DeBruijn/#25300" class="Bound">A</a><a id="25301" class="Symbol">}</a> <a id="25303" class="Symbol">{</a><a id="25304" href="/PLFA-zh/DeBruijn/#25304" class="Bound">M</a> <a id="25306" class="Symbol">:</a> <a id="25308" href="/PLFA-zh/DeBruijn/#25298" class="Bound">Γ</a> <a id="25310" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="25312" href="/PLFA-zh/DeBruijn/#25300" class="Bound">A</a><a id="25313" class="Symbol">}</a> <a id="25315" class="Symbol">{</a><a id="25316" href="/PLFA-zh/DeBruijn/#25316" class="Bound">N</a> <a id="25318" class="Symbol">:</a> <a id="25320" href="/PLFA-zh/DeBruijn/#25298" class="Bound">Γ</a> <a id="25322" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="25324" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="25327" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="25329" href="/PLFA-zh/DeBruijn/#25300" class="Bound">A</a><a id="25330" class="Symbol">}</a>
      <a id="25338" class="Comment">-------------------</a>
    <a id="25362" class="Symbol">→</a> <a id="25364" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="25369" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a> <a id="25375" href="/PLFA-zh/DeBruijn/#25304" class="Bound">M</a> <a id="25377" href="/PLFA-zh/DeBruijn/#25316" class="Bound">N</a> <a id="25379" href="/PLFA-zh/DeBruijn/#24650" class="Datatype Operator">—→</a> <a id="25382" href="/PLFA-zh/DeBruijn/#25304" class="Bound">M</a>

  <a id="_—→_.β-suc"></a><a id="25387" href="/PLFA-zh/DeBruijn/#25387" class="InductiveConstructor">β-suc</a> <a id="25393" class="Symbol">:</a> <a id="25395" class="Symbol">∀</a> <a id="25397" class="Symbol">{</a><a id="25398" href="/PLFA-zh/DeBruijn/#25398" class="Bound">Γ</a> <a id="25400" href="/PLFA-zh/DeBruijn/#25400" class="Bound">A</a><a id="25401" class="Symbol">}</a> <a id="25403" class="Symbol">{</a><a id="25404" href="/PLFA-zh/DeBruijn/#25404" class="Bound">V</a> <a id="25406" class="Symbol">:</a> <a id="25408" href="/PLFA-zh/DeBruijn/#25398" class="Bound">Γ</a> <a id="25410" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="25412" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a><a id="25414" class="Symbol">}</a> <a id="25416" class="Symbol">{</a><a id="25417" href="/PLFA-zh/DeBruijn/#25417" class="Bound">M</a> <a id="25419" class="Symbol">:</a> <a id="25421" href="/PLFA-zh/DeBruijn/#25398" class="Bound">Γ</a> <a id="25423" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="25425" href="/PLFA-zh/DeBruijn/#25400" class="Bound">A</a><a id="25426" class="Symbol">}</a> <a id="25428" class="Symbol">{</a><a id="25429" href="/PLFA-zh/DeBruijn/#25429" class="Bound">N</a> <a id="25431" class="Symbol">:</a> <a id="25433" href="/PLFA-zh/DeBruijn/#25398" class="Bound">Γ</a> <a id="25435" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="25437" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a> <a id="25440" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="25442" href="/PLFA-zh/DeBruijn/#25400" class="Bound">A</a><a id="25443" class="Symbol">}</a>
    <a id="25449" class="Symbol">→</a> <a id="25451" href="/PLFA-zh/DeBruijn/#23912" class="Datatype">Value</a> <a id="25457" href="/PLFA-zh/DeBruijn/#25404" class="Bound">V</a>
      <a id="25465" class="Comment">-----------------------------</a>
    <a id="25499" class="Symbol">→</a> <a id="25501" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="25506" class="Symbol">(</a><a id="25507" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="25512" href="/PLFA-zh/DeBruijn/#25404" class="Bound">V</a><a id="25513" class="Symbol">)</a> <a id="25515" href="/PLFA-zh/DeBruijn/#25417" class="Bound">M</a> <a id="25517" href="/PLFA-zh/DeBruijn/#25429" class="Bound">N</a> <a id="25519" href="/PLFA-zh/DeBruijn/#24650" class="Datatype Operator">—→</a> <a id="25522" href="/PLFA-zh/DeBruijn/#25429" class="Bound">N</a> <a id="25524" href="/PLFA-zh/DeBruijn/#21727" class="Function Operator">[</a> <a id="25526" href="/PLFA-zh/DeBruijn/#25404" class="Bound">V</a> <a id="25528" href="/PLFA-zh/DeBruijn/#21727" class="Function Operator">]</a>

  <a id="_—→_.β-μ"></a><a id="25533" href="/PLFA-zh/DeBruijn/#25533" class="InductiveConstructor">β-μ</a> <a id="25537" class="Symbol">:</a> <a id="25539" class="Symbol">∀</a> <a id="25541" class="Symbol">{</a><a id="25542" href="/PLFA-zh/DeBruijn/#25542" class="Bound">Γ</a> <a id="25544" href="/PLFA-zh/DeBruijn/#25544" class="Bound">A</a><a id="25545" class="Symbol">}</a> <a id="25547" class="Symbol">{</a><a id="25548" href="/PLFA-zh/DeBruijn/#25548" class="Bound">N</a> <a id="25550" class="Symbol">:</a> <a id="25552" href="/PLFA-zh/DeBruijn/#25542" class="Bound">Γ</a> <a id="25554" href="/PLFA-zh/DeBruijn/#8396" class="InductiveConstructor Operator">,</a> <a id="25556" href="/PLFA-zh/DeBruijn/#25544" class="Bound">A</a> <a id="25558" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="25560" href="/PLFA-zh/DeBruijn/#25544" class="Bound">A</a><a id="25561" class="Symbol">}</a>
      <a id="25569" class="Comment">---------------</a>
    <a id="25589" class="Symbol">→</a> <a id="25591" href="/PLFA-zh/DeBruijn/#10942" class="InductiveConstructor Operator">μ</a> <a id="25593" href="/PLFA-zh/DeBruijn/#25548" class="Bound">N</a> <a id="25595" href="/PLFA-zh/DeBruijn/#24650" class="Datatype Operator">—→</a> <a id="25598" href="/PLFA-zh/DeBruijn/#25548" class="Bound">N</a> <a id="25600" href="/PLFA-zh/DeBruijn/#21727" class="Function Operator">[</a> <a id="25602" href="/PLFA-zh/DeBruijn/#10942" class="InductiveConstructor Operator">μ</a> <a id="25604" href="/PLFA-zh/DeBruijn/#25548" class="Bound">N</a> <a id="25606" href="/PLFA-zh/DeBruijn/#21727" class="Function Operator">]</a></pre>
<p>The definition states that <code class="highlighter-rouge">M —→ N</code> can only hold of terms <code class="highlighter-rouge">M</code>
and <code class="highlighter-rouge">N</code> which <em>both</em> have type <code class="highlighter-rouge">Γ ⊢ A</code> for some context <code class="highlighter-rouge">Γ</code>
and type <code class="highlighter-rouge">A</code>.  In other words, it is <em>built-in</em> to our
definition that reduction preserves types.  There is no
separate Preservation theorem to prove.  The Agda type-checker
validates that each term preserves types.  In the case of <code class="highlighter-rouge">β</code>
rules, preservation depends on the fact that substitution
preserves types, which we previously is built-in to our
definition of substitution.</p>

<h2 id="reflexive-and-transitive-closure">Reflexive and transitive closure</h2>

<p>The reflexive and transitive closure is exactly as before.
We simply cut-and-paste the previous definition:</p>
<pre class="Agda"><a id="26280" class="Keyword">infix</a>  <a id="26287" class="Number">2</a> <a id="26289" href="/PLFA-zh/DeBruijn/#26345" class="Datatype Operator">_—↠_</a>
<a id="26294" class="Keyword">infix</a>  <a id="26301" class="Number">1</a> <a id="26303" href="/PLFA-zh/DeBruijn/#26551" class="Function Operator">begin_</a>
<a id="26310" class="Keyword">infixr</a> <a id="26317" class="Number">2</a> <a id="26319" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">_—→⟨_⟩_</a>
<a id="26327" class="Keyword">infix</a>  <a id="26334" class="Number">3</a> <a id="26336" href="/PLFA-zh/DeBruijn/#26395" class="InductiveConstructor Operator">_∎</a>

<a id="26340" class="Keyword">data</a> <a id="_—↠_"></a><a id="26345" href="/PLFA-zh/DeBruijn/#26345" class="Datatype Operator">_—↠_</a> <a id="26350" class="Symbol">:</a> <a id="26352" class="Symbol">∀</a> <a id="26354" class="Symbol">{</a><a id="26355" href="/PLFA-zh/DeBruijn/#26355" class="Bound">Γ</a> <a id="26357" href="/PLFA-zh/DeBruijn/#26357" class="Bound">A</a><a id="26358" class="Symbol">}</a> <a id="26360" class="Symbol">→</a> <a id="26362" class="Symbol">(</a><a id="26363" href="/PLFA-zh/DeBruijn/#26355" class="Bound">Γ</a> <a id="26365" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="26367" href="/PLFA-zh/DeBruijn/#26357" class="Bound">A</a><a id="26368" class="Symbol">)</a> <a id="26370" class="Symbol">→</a> <a id="26372" class="Symbol">(</a><a id="26373" href="/PLFA-zh/DeBruijn/#26355" class="Bound">Γ</a> <a id="26375" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="26377" href="/PLFA-zh/DeBruijn/#26357" class="Bound">A</a><a id="26378" class="Symbol">)</a> <a id="26380" class="Symbol">→</a> <a id="26382" class="PrimitiveType">Set</a> <a id="26386" class="Keyword">where</a>

  <a id="_—↠_._∎"></a><a id="26395" href="/PLFA-zh/DeBruijn/#26395" class="InductiveConstructor Operator">_∎</a> <a id="26398" class="Symbol">:</a> <a id="26400" class="Symbol">∀</a> <a id="26402" class="Symbol">{</a><a id="26403" href="/PLFA-zh/DeBruijn/#26403" class="Bound">Γ</a> <a id="26405" href="/PLFA-zh/DeBruijn/#26405" class="Bound">A</a><a id="26406" class="Symbol">}</a> <a id="26408" class="Symbol">(</a><a id="26409" href="/PLFA-zh/DeBruijn/#26409" class="Bound">M</a> <a id="26411" class="Symbol">:</a> <a id="26413" href="/PLFA-zh/DeBruijn/#26403" class="Bound">Γ</a> <a id="26415" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="26417" href="/PLFA-zh/DeBruijn/#26405" class="Bound">A</a><a id="26418" class="Symbol">)</a>
      <a id="26426" class="Comment">--------</a>
    <a id="26439" class="Symbol">→</a> <a id="26441" href="/PLFA-zh/DeBruijn/#26409" class="Bound">M</a> <a id="26443" href="/PLFA-zh/DeBruijn/#26345" class="Datatype Operator">—↠</a> <a id="26446" href="/PLFA-zh/DeBruijn/#26409" class="Bound">M</a>

  <a id="_—↠_._—→⟨_⟩_"></a><a id="26451" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">_—→⟨_⟩_</a> <a id="26459" class="Symbol">:</a> <a id="26461" class="Symbol">∀</a> <a id="26463" class="Symbol">{</a><a id="26464" href="/PLFA-zh/DeBruijn/#26464" class="Bound">Γ</a> <a id="26466" href="/PLFA-zh/DeBruijn/#26466" class="Bound">A</a><a id="26467" class="Symbol">}</a> <a id="26469" class="Symbol">(</a><a id="26470" href="/PLFA-zh/DeBruijn/#26470" class="Bound">L</a> <a id="26472" class="Symbol">:</a> <a id="26474" href="/PLFA-zh/DeBruijn/#26464" class="Bound">Γ</a> <a id="26476" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="26478" href="/PLFA-zh/DeBruijn/#26466" class="Bound">A</a><a id="26479" class="Symbol">)</a> <a id="26481" class="Symbol">{</a><a id="26482" href="/PLFA-zh/DeBruijn/#26482" class="Bound">M</a> <a id="26484" href="/PLFA-zh/DeBruijn/#26484" class="Bound">N</a> <a id="26486" class="Symbol">:</a> <a id="26488" href="/PLFA-zh/DeBruijn/#26464" class="Bound">Γ</a> <a id="26490" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="26492" href="/PLFA-zh/DeBruijn/#26466" class="Bound">A</a><a id="26493" class="Symbol">}</a>
    <a id="26499" class="Symbol">→</a> <a id="26501" href="/PLFA-zh/DeBruijn/#26470" class="Bound">L</a> <a id="26503" href="/PLFA-zh/DeBruijn/#24650" class="Datatype Operator">—→</a> <a id="26506" href="/PLFA-zh/DeBruijn/#26482" class="Bound">M</a>
    <a id="26512" class="Symbol">→</a> <a id="26514" href="/PLFA-zh/DeBruijn/#26482" class="Bound">M</a> <a id="26516" href="/PLFA-zh/DeBruijn/#26345" class="Datatype Operator">—↠</a> <a id="26519" href="/PLFA-zh/DeBruijn/#26484" class="Bound">N</a>
      <a id="26527" class="Comment">---------</a>
    <a id="26541" class="Symbol">→</a> <a id="26543" href="/PLFA-zh/DeBruijn/#26470" class="Bound">L</a> <a id="26545" href="/PLFA-zh/DeBruijn/#26345" class="Datatype Operator">—↠</a> <a id="26548" href="/PLFA-zh/DeBruijn/#26484" class="Bound">N</a>

<a id="begin_"></a><a id="26551" href="/PLFA-zh/DeBruijn/#26551" class="Function Operator">begin_</a> <a id="26558" class="Symbol">:</a> <a id="26560" class="Symbol">∀</a> <a id="26562" class="Symbol">{</a><a id="26563" href="/PLFA-zh/DeBruijn/#26563" class="Bound">Γ</a><a id="26564" class="Symbol">}</a> <a id="26566" class="Symbol">{</a><a id="26567" href="/PLFA-zh/DeBruijn/#26567" class="Bound">A</a><a id="26568" class="Symbol">}</a> <a id="26570" class="Symbol">{</a><a id="26571" href="/PLFA-zh/DeBruijn/#26571" class="Bound">M</a> <a id="26573" href="/PLFA-zh/DeBruijn/#26573" class="Bound">N</a> <a id="26575" class="Symbol">:</a> <a id="26577" href="/PLFA-zh/DeBruijn/#26563" class="Bound">Γ</a> <a id="26579" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="26581" href="/PLFA-zh/DeBruijn/#26567" class="Bound">A</a><a id="26582" class="Symbol">}</a>
  <a id="26586" class="Symbol">→</a> <a id="26588" href="/PLFA-zh/DeBruijn/#26571" class="Bound">M</a> <a id="26590" href="/PLFA-zh/DeBruijn/#26345" class="Datatype Operator">—↠</a> <a id="26593" href="/PLFA-zh/DeBruijn/#26573" class="Bound">N</a>
    <a id="26599" class="Comment">------</a>
  <a id="26608" class="Symbol">→</a> <a id="26610" href="/PLFA-zh/DeBruijn/#26571" class="Bound">M</a> <a id="26612" href="/PLFA-zh/DeBruijn/#26345" class="Datatype Operator">—↠</a> <a id="26615" href="/PLFA-zh/DeBruijn/#26573" class="Bound">N</a>
<a id="26617" href="/PLFA-zh/DeBruijn/#26551" class="Function Operator">begin</a> <a id="26623" href="/PLFA-zh/DeBruijn/#26623" class="Bound">M—↠N</a> <a id="26628" class="Symbol">=</a> <a id="26630" href="/PLFA-zh/DeBruijn/#26623" class="Bound">M—↠N</a></pre>

<h2 id="examples">Examples</h2>

<p>We reiterate each of our previous examples.  First, the Church
numeral two applied to the successor function and zero yields
the natural number two:</p>
<pre class="Agda"><a id="26823" href="/PLFA-zh/DeBruijn/#26823" class="Function">_</a> <a id="26825" class="Symbol">:</a> <a id="26827" href="/PLFA-zh/DeBruijn/#14104" class="Function">twoᶜ</a> <a id="26832" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="26834" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="26839" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="26841" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a> <a id="26847" class="Symbol">{</a><a id="26848" href="/PLFA-zh/DeBruijn/#8380" class="InductiveConstructor">∅</a><a id="26849" class="Symbol">}</a> <a id="26851" href="/PLFA-zh/DeBruijn/#26345" class="Datatype Operator">—↠</a> <a id="26854" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="26859" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="26864" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a>
<a id="26870" class="Symbol">_</a> <a id="26872" class="Symbol">=</a>
  <a id="26876" href="/PLFA-zh/DeBruijn/#26551" class="Function Operator">begin</a>
    <a id="26886" href="/PLFA-zh/DeBruijn/#14104" class="Function">twoᶜ</a> <a id="26891" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="26893" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="26898" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="26900" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a>
  <a id="26908" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="26912" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="26917" class="Symbol">(</a><a id="26918" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="26922" href="/PLFA-zh/DeBruijn/#23951" class="InductiveConstructor">V-ƛ</a><a id="26925" class="Symbol">)</a> <a id="26927" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="26933" class="Symbol">(</a><a id="26934" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="26936" class="Symbol">(</a><a id="26937" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="26942" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="26944" class="Symbol">(</a><a id="26945" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="26950" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="26952" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="26954" class="Number">0</a><a id="26955" class="Symbol">)))</a> <a id="26959" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="26961" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a>
  <a id="26969" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="26973" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="26977" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a> <a id="26984" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="26990" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="26995" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="26997" class="Symbol">(</a><a id="26998" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="27003" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="27005" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="27010" class="Symbol">)</a>
  <a id="27014" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="27018" href="/PLFA-zh/DeBruijn/#24811" class="InductiveConstructor">ξ-·₂</a> <a id="27023" href="/PLFA-zh/DeBruijn/#23951" class="InductiveConstructor">V-ƛ</a> <a id="27027" class="Symbol">(</a><a id="27028" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="27032" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="27038" class="Symbol">)</a> <a id="27040" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="27046" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="27051" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="27053" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="27058" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a>
  <a id="27066" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="27070" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="27074" class="Symbol">(</a><a id="27075" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="27081" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="27087" class="Symbol">)</a> <a id="27089" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
   <a id="27094" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="27099" class="Symbol">(</a><a id="27100" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="27105" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="27110" class="Symbol">)</a>
  <a id="27114" href="/PLFA-zh/DeBruijn/#26395" class="InductiveConstructor Operator">∎</a></pre>
<p>As before, we need to supply an explicit context to <code class="highlighter-rouge">`zero</code>.</p>

<p>Next, a sample reduction demonstrating that two plus two is four:</p>
<pre class="Agda"><a id="27272" href="/PLFA-zh/DeBruijn/#27272" class="Function">_</a> <a id="27274" class="Symbol">:</a> <a id="27276" href="/PLFA-zh/DeBruijn/#13581" class="Function">plus</a> <a id="27281" class="Symbol">{</a><a id="27282" href="/PLFA-zh/DeBruijn/#8380" class="InductiveConstructor">∅</a><a id="27283" class="Symbol">}</a> <a id="27285" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="27287" href="/PLFA-zh/DeBruijn/#13537" class="Function">two</a> <a id="27291" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="27293" href="/PLFA-zh/DeBruijn/#13537" class="Function">two</a> <a id="27297" href="/PLFA-zh/DeBruijn/#26345" class="Datatype Operator">—↠</a> <a id="27300" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="27305" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="27310" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="27315" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="27320" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a>
<a id="27326" class="Symbol">_</a> <a id="27328" class="Symbol">=</a>
    <a id="27334" href="/PLFA-zh/DeBruijn/#13581" class="Function">plus</a> <a id="27339" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="27341" href="/PLFA-zh/DeBruijn/#13537" class="Function">two</a> <a id="27345" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="27347" href="/PLFA-zh/DeBruijn/#13537" class="Function">two</a>
  <a id="27353" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="27357" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="27362" class="Symbol">(</a><a id="27363" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="27368" href="/PLFA-zh/DeBruijn/#25533" class="InductiveConstructor">β-μ</a><a id="27371" class="Symbol">)</a> <a id="27373" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="27379" class="Symbol">(</a><a id="27380" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="27382" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="27384" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="27389" class="Symbol">(</a><a id="27390" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="27392" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="27394" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="27395" class="Symbol">)</a> <a id="27397" class="Symbol">(</a><a id="27398" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="27400" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="27401" class="Symbol">)</a> <a id="27403" class="Symbol">(</a><a id="27404" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="27409" class="Symbol">(</a><a id="27410" href="/PLFA-zh/DeBruijn/#13581" class="Function">plus</a> <a id="27415" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="27417" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="27419" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a> <a id="27421" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="27423" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="27425" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="27427" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="27428" class="Symbol">)))</a> <a id="27432" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="27434" href="/PLFA-zh/DeBruijn/#13537" class="Function">two</a> <a id="27438" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="27440" href="/PLFA-zh/DeBruijn/#13537" class="Function">two</a>
  <a id="27446" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="27450" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="27455" class="Symbol">(</a><a id="27456" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="27460" class="Symbol">(</a><a id="27461" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="27467" class="Symbol">(</a><a id="27468" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="27474" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="27480" class="Symbol">)))</a> <a id="27484" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="27490" class="Symbol">(</a><a id="27491" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="27493" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="27498" href="/PLFA-zh/DeBruijn/#13537" class="Function">two</a> <a id="27502" class="Symbol">(</a><a id="27503" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="27505" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="27506" class="Symbol">)</a> <a id="27508" class="Symbol">(</a><a id="27509" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="27514" class="Symbol">(</a><a id="27515" href="/PLFA-zh/DeBruijn/#13581" class="Function">plus</a> <a id="27520" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="27522" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="27524" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a> <a id="27526" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="27528" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="27530" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="27532" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="27533" class="Symbol">)))</a> <a id="27537" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="27539" href="/PLFA-zh/DeBruijn/#13537" class="Function">two</a>
  <a id="27545" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="27549" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="27553" class="Symbol">(</a><a id="27554" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="27560" class="Symbol">(</a><a id="27561" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="27567" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="27573" class="Symbol">))</a> <a id="27576" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="27582" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="27587" href="/PLFA-zh/DeBruijn/#13537" class="Function">two</a> <a id="27591" href="/PLFA-zh/DeBruijn/#13537" class="Function">two</a> <a id="27595" class="Symbol">(</a><a id="27596" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="27601" class="Symbol">(</a><a id="27602" href="/PLFA-zh/DeBruijn/#13581" class="Function">plus</a> <a id="27607" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="27609" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="27611" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a> <a id="27613" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="27615" href="/PLFA-zh/DeBruijn/#13537" class="Function">two</a><a id="27618" class="Symbol">))</a>
  <a id="27623" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="27627" href="/PLFA-zh/DeBruijn/#25387" class="InductiveConstructor">β-suc</a> <a id="27633" class="Symbol">(</a><a id="27634" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="27640" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="27646" class="Symbol">)</a> <a id="27648" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="27654" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="27659" class="Symbol">(</a><a id="27660" href="/PLFA-zh/DeBruijn/#13581" class="Function">plus</a> <a id="27665" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="27667" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="27672" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a> <a id="27678" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="27680" href="/PLFA-zh/DeBruijn/#13537" class="Function">two</a><a id="27683" class="Symbol">)</a>
  <a id="27687" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="27691" href="/PLFA-zh/DeBruijn/#25047" class="InductiveConstructor">ξ-suc</a> <a id="27697" class="Symbol">(</a><a id="27698" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="27703" class="Symbol">(</a><a id="27704" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="27709" href="/PLFA-zh/DeBruijn/#25533" class="InductiveConstructor">β-μ</a><a id="27712" class="Symbol">))</a> <a id="27715" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="27721" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="27726" class="Symbol">((</a><a id="27728" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="27730" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="27732" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="27737" class="Symbol">(</a><a id="27738" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="27740" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="27742" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="27743" class="Symbol">)</a> <a id="27745" class="Symbol">(</a><a id="27746" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="27748" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="27749" class="Symbol">)</a> <a id="27751" class="Symbol">(</a><a id="27752" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="27757" class="Symbol">(</a><a id="27758" href="/PLFA-zh/DeBruijn/#13581" class="Function">plus</a> <a id="27763" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="27765" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="27767" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a> <a id="27769" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="27771" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="27773" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="27775" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="27776" class="Symbol">)))</a>
      <a id="27786" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="27788" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="27793" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a> <a id="27799" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="27801" href="/PLFA-zh/DeBruijn/#13537" class="Function">two</a><a id="27804" class="Symbol">)</a>
  <a id="27808" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="27812" href="/PLFA-zh/DeBruijn/#25047" class="InductiveConstructor">ξ-suc</a> <a id="27818" class="Symbol">(</a><a id="27819" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="27824" class="Symbol">(</a><a id="27825" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="27829" class="Symbol">(</a><a id="27830" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="27836" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="27842" class="Symbol">)))</a> <a id="27846" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="27852" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="27857" class="Symbol">((</a><a id="27859" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="27861" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="27866" class="Symbol">(</a><a id="27867" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="27872" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="27877" class="Symbol">)</a> <a id="27879" class="Symbol">(</a><a id="27880" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="27882" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="27883" class="Symbol">)</a> <a id="27885" class="Symbol">(</a><a id="27886" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="27891" class="Symbol">(</a><a id="27892" href="/PLFA-zh/DeBruijn/#13581" class="Function">plus</a> <a id="27897" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="27899" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="27901" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a> <a id="27903" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="27905" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="27907" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="27909" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="27910" class="Symbol">)))</a> <a id="27914" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="27916" href="/PLFA-zh/DeBruijn/#13537" class="Function">two</a><a id="27919" class="Symbol">)</a>
  <a id="27923" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="27927" href="/PLFA-zh/DeBruijn/#25047" class="InductiveConstructor">ξ-suc</a> <a id="27933" class="Symbol">(</a><a id="27934" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="27938" class="Symbol">(</a><a id="27939" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="27945" class="Symbol">(</a><a id="27946" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="27952" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="27958" class="Symbol">)))</a> <a id="27962" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="27968" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="27973" class="Symbol">(</a><a id="27974" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="27979" class="Symbol">(</a><a id="27980" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="27985" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="27990" class="Symbol">)</a> <a id="27992" class="Symbol">(</a><a id="27993" href="/PLFA-zh/DeBruijn/#13537" class="Function">two</a><a id="27996" class="Symbol">)</a> <a id="27998" class="Symbol">(</a><a id="27999" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="28004" class="Symbol">(</a><a id="28005" href="/PLFA-zh/DeBruijn/#13581" class="Function">plus</a> <a id="28010" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28012" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="28014" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a> <a id="28016" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28018" href="/PLFA-zh/DeBruijn/#13537" class="Function">two</a><a id="28021" class="Symbol">)))</a>
  <a id="28027" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="28031" href="/PLFA-zh/DeBruijn/#25047" class="InductiveConstructor">ξ-suc</a> <a id="28037" class="Symbol">(</a><a id="28038" href="/PLFA-zh/DeBruijn/#25387" class="InductiveConstructor">β-suc</a> <a id="28044" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="28050" class="Symbol">)</a> <a id="28052" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="28058" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="28063" class="Symbol">(</a><a id="28064" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="28069" class="Symbol">(</a><a id="28070" href="/PLFA-zh/DeBruijn/#13581" class="Function">plus</a> <a id="28075" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28077" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a> <a id="28083" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28085" href="/PLFA-zh/DeBruijn/#13537" class="Function">two</a><a id="28088" class="Symbol">))</a>
  <a id="28093" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="28097" href="/PLFA-zh/DeBruijn/#25047" class="InductiveConstructor">ξ-suc</a> <a id="28103" class="Symbol">(</a><a id="28104" href="/PLFA-zh/DeBruijn/#25047" class="InductiveConstructor">ξ-suc</a> <a id="28110" class="Symbol">(</a><a id="28111" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="28116" class="Symbol">(</a><a id="28117" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="28122" href="/PLFA-zh/DeBruijn/#25533" class="InductiveConstructor">β-μ</a><a id="28125" class="Symbol">)))</a> <a id="28129" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="28135" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="28140" class="Symbol">(</a><a id="28141" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="28146" class="Symbol">((</a><a id="28148" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="28150" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="28152" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="28157" class="Symbol">(</a><a id="28158" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="28160" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="28162" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="28163" class="Symbol">)</a> <a id="28165" class="Symbol">(</a><a id="28166" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="28168" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="28169" class="Symbol">)</a> <a id="28171" class="Symbol">(</a><a id="28172" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="28177" class="Symbol">(</a><a id="28178" href="/PLFA-zh/DeBruijn/#13581" class="Function">plus</a> <a id="28183" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28185" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="28187" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a> <a id="28189" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28191" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="28193" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="28195" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="28196" class="Symbol">)))</a>
      <a id="28206" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28208" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a> <a id="28214" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28216" href="/PLFA-zh/DeBruijn/#13537" class="Function">two</a><a id="28219" class="Symbol">))</a>
  <a id="28224" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="28228" href="/PLFA-zh/DeBruijn/#25047" class="InductiveConstructor">ξ-suc</a> <a id="28234" class="Symbol">(</a><a id="28235" href="/PLFA-zh/DeBruijn/#25047" class="InductiveConstructor">ξ-suc</a> <a id="28241" class="Symbol">(</a><a id="28242" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="28247" class="Symbol">(</a><a id="28248" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="28252" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="28258" class="Symbol">)))</a> <a id="28262" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="28268" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="28273" class="Symbol">(</a><a id="28274" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="28279" class="Symbol">((</a><a id="28281" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="28283" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="28288" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a> <a id="28294" class="Symbol">(</a><a id="28295" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="28297" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="28298" class="Symbol">)</a> <a id="28300" class="Symbol">(</a><a id="28301" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="28306" class="Symbol">(</a><a id="28307" href="/PLFA-zh/DeBruijn/#13581" class="Function">plus</a> <a id="28312" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28314" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="28316" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a> <a id="28318" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28320" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="28322" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="28324" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="28325" class="Symbol">)))</a> <a id="28329" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28331" href="/PLFA-zh/DeBruijn/#13537" class="Function">two</a><a id="28334" class="Symbol">))</a>
  <a id="28339" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="28343" href="/PLFA-zh/DeBruijn/#25047" class="InductiveConstructor">ξ-suc</a> <a id="28349" class="Symbol">(</a><a id="28350" href="/PLFA-zh/DeBruijn/#25047" class="InductiveConstructor">ξ-suc</a> <a id="28356" class="Symbol">(</a><a id="28357" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="28361" class="Symbol">(</a><a id="28362" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="28368" class="Symbol">(</a><a id="28369" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="28375" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="28381" class="Symbol">))))</a> <a id="28386" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="28392" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="28397" class="Symbol">(</a><a id="28398" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="28403" class="Symbol">(</a><a id="28404" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="28409" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a> <a id="28415" class="Symbol">(</a><a id="28416" href="/PLFA-zh/DeBruijn/#13537" class="Function">two</a><a id="28419" class="Symbol">)</a> <a id="28421" class="Symbol">(</a><a id="28422" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="28427" class="Symbol">(</a><a id="28428" href="/PLFA-zh/DeBruijn/#13581" class="Function">plus</a> <a id="28433" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28435" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="28437" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a> <a id="28439" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28441" href="/PLFA-zh/DeBruijn/#13537" class="Function">two</a><a id="28444" class="Symbol">))))</a>
  <a id="28451" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="28455" href="/PLFA-zh/DeBruijn/#25047" class="InductiveConstructor">ξ-suc</a> <a id="28461" class="Symbol">(</a><a id="28462" href="/PLFA-zh/DeBruijn/#25047" class="InductiveConstructor">ξ-suc</a> <a id="28468" href="/PLFA-zh/DeBruijn/#25285" class="InductiveConstructor">β-zero</a><a id="28474" class="Symbol">)</a> <a id="28476" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
   <a id="28481" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="28486" class="Symbol">(</a><a id="28487" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="28492" class="Symbol">(</a><a id="28493" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="28498" class="Symbol">(</a><a id="28499" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="28504" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="28509" class="Symbol">)))</a>
  <a id="28515" href="/PLFA-zh/DeBruijn/#26395" class="InductiveConstructor Operator">∎</a></pre>

<p>And finally, a similar sample reduction for Church numerals:</p>
<pre class="Agda"><a id="28603" href="/PLFA-zh/DeBruijn/#28603" class="Function">_</a> <a id="28605" class="Symbol">:</a> <a id="28607" href="/PLFA-zh/DeBruijn/#14162" class="Function">plusᶜ</a> <a id="28613" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28615" href="/PLFA-zh/DeBruijn/#14104" class="Function">twoᶜ</a> <a id="28620" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28622" href="/PLFA-zh/DeBruijn/#14104" class="Function">twoᶜ</a> <a id="28627" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28629" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="28634" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28636" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a> <a id="28642" href="/PLFA-zh/DeBruijn/#26345" class="Datatype Operator">—↠</a> <a id="28645" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="28650" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="28655" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="28660" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="28665" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a> <a id="28671" class="Symbol">{</a><a id="28672" href="/PLFA-zh/DeBruijn/#8380" class="InductiveConstructor">∅</a><a id="28673" class="Symbol">}</a>
<a id="28675" class="Symbol">_</a> <a id="28677" class="Symbol">=</a>
  <a id="28681" href="/PLFA-zh/DeBruijn/#26551" class="Function Operator">begin</a>
    <a id="28691" href="/PLFA-zh/DeBruijn/#14162" class="Function">plusᶜ</a> <a id="28697" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28699" href="/PLFA-zh/DeBruijn/#14104" class="Function">twoᶜ</a> <a id="28704" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28706" href="/PLFA-zh/DeBruijn/#14104" class="Function">twoᶜ</a> <a id="28711" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28713" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="28718" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28720" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a>
  <a id="28728" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="28732" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="28737" class="Symbol">(</a><a id="28738" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="28743" class="Symbol">(</a><a id="28744" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="28749" class="Symbol">(</a><a id="28750" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="28754" href="/PLFA-zh/DeBruijn/#23951" class="InductiveConstructor">V-ƛ</a><a id="28757" class="Symbol">)))</a> <a id="28761" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="28767" class="Symbol">(</a><a id="28768" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="28770" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="28772" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="28774" href="/PLFA-zh/DeBruijn/#14104" class="Function">twoᶜ</a> <a id="28779" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28781" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="28783" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="28785" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a> <a id="28787" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28789" class="Symbol">(</a><a id="28790" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="28792" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="28794" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="28796" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a> <a id="28798" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28800" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="28802" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="28804" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a> <a id="28806" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28808" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="28810" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="28811" class="Symbol">))</a> <a id="28814" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28816" href="/PLFA-zh/DeBruijn/#14104" class="Function">twoᶜ</a> <a id="28821" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28823" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="28828" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28830" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a>
  <a id="28838" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="28842" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="28847" class="Symbol">(</a><a id="28848" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="28853" class="Symbol">(</a><a id="28854" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="28858" href="/PLFA-zh/DeBruijn/#23951" class="InductiveConstructor">V-ƛ</a><a id="28861" class="Symbol">))</a> <a id="28864" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="28870" class="Symbol">(</a><a id="28871" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="28873" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="28875" href="/PLFA-zh/DeBruijn/#14104" class="Function">twoᶜ</a> <a id="28880" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28882" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="28884" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="28886" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a> <a id="28888" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28890" class="Symbol">(</a><a id="28891" href="/PLFA-zh/DeBruijn/#14104" class="Function">twoᶜ</a> <a id="28896" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28898" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="28900" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="28902" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a> <a id="28904" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28906" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="28908" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="28909" class="Symbol">))</a> <a id="28912" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28914" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="28919" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28921" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a>
  <a id="28929" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="28933" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="28938" class="Symbol">(</a><a id="28939" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="28943" href="/PLFA-zh/DeBruijn/#23951" class="InductiveConstructor">V-ƛ</a><a id="28946" class="Symbol">)</a> <a id="28948" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="28954" class="Symbol">(</a><a id="28955" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="28957" href="/PLFA-zh/DeBruijn/#14104" class="Function">twoᶜ</a> <a id="28962" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28964" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="28969" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28971" class="Symbol">(</a><a id="28972" href="/PLFA-zh/DeBruijn/#14104" class="Function">twoᶜ</a> <a id="28977" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28979" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="28984" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28986" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="28988" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="28989" class="Symbol">))</a> <a id="28992" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="28994" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a>
  <a id="29002" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="29006" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="29010" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a> <a id="29017" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="29023" href="/PLFA-zh/DeBruijn/#14104" class="Function">twoᶜ</a> <a id="29028" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="29030" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="29035" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="29037" class="Symbol">(</a><a id="29038" href="/PLFA-zh/DeBruijn/#14104" class="Function">twoᶜ</a> <a id="29043" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="29045" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="29050" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="29052" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="29057" class="Symbol">)</a>
  <a id="29061" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="29065" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="29070" class="Symbol">(</a><a id="29071" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="29075" href="/PLFA-zh/DeBruijn/#23951" class="InductiveConstructor">V-ƛ</a><a id="29078" class="Symbol">)</a> <a id="29080" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="29086" class="Symbol">(</a><a id="29087" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="29089" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="29094" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="29096" class="Symbol">(</a><a id="29097" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="29102" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="29104" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="29106" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="29107" class="Symbol">))</a> <a id="29110" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="29112" class="Symbol">(</a><a id="29113" href="/PLFA-zh/DeBruijn/#14104" class="Function">twoᶜ</a> <a id="29118" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="29120" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="29125" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="29127" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="29132" class="Symbol">)</a>
  <a id="29136" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="29140" href="/PLFA-zh/DeBruijn/#24811" class="InductiveConstructor">ξ-·₂</a> <a id="29145" href="/PLFA-zh/DeBruijn/#23951" class="InductiveConstructor">V-ƛ</a> <a id="29149" class="Symbol">(</a><a id="29150" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="29155" class="Symbol">(</a><a id="29156" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="29160" href="/PLFA-zh/DeBruijn/#23951" class="InductiveConstructor">V-ƛ</a><a id="29163" class="Symbol">))</a> <a id="29166" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="29172" class="Symbol">(</a><a id="29173" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="29175" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="29180" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="29182" class="Symbol">(</a><a id="29183" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="29188" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="29190" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="29192" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="29193" class="Symbol">))</a> <a id="29196" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="29198" class="Symbol">((</a><a id="29200" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="29202" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="29207" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="29209" class="Symbol">(</a><a id="29210" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="29215" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="29217" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="29219" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="29220" class="Symbol">))</a> <a id="29223" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="29225" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="29230" class="Symbol">)</a>
  <a id="29234" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="29238" href="/PLFA-zh/DeBruijn/#24811" class="InductiveConstructor">ξ-·₂</a> <a id="29243" href="/PLFA-zh/DeBruijn/#23951" class="InductiveConstructor">V-ƛ</a> <a id="29247" class="Symbol">(</a><a id="29248" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="29252" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="29258" class="Symbol">)</a> <a id="29260" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="29266" class="Symbol">(</a><a id="29267" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="29269" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="29274" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="29276" class="Symbol">(</a><a id="29277" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="29282" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="29284" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="29286" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="29287" class="Symbol">))</a> <a id="29290" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="29292" class="Symbol">(</a><a id="29293" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="29298" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="29300" class="Symbol">(</a><a id="29301" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="29306" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="29308" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="29313" class="Symbol">))</a>
  <a id="29318" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="29322" href="/PLFA-zh/DeBruijn/#24811" class="InductiveConstructor">ξ-·₂</a> <a id="29327" href="/PLFA-zh/DeBruijn/#23951" class="InductiveConstructor">V-ƛ</a> <a id="29331" class="Symbol">(</a><a id="29332" href="/PLFA-zh/DeBruijn/#24811" class="InductiveConstructor">ξ-·₂</a> <a id="29337" href="/PLFA-zh/DeBruijn/#23951" class="InductiveConstructor">V-ƛ</a> <a id="29341" class="Symbol">(</a><a id="29342" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="29346" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="29352" class="Symbol">))</a> <a id="29355" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="29361" class="Symbol">(</a><a id="29362" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="29364" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="29369" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="29371" class="Symbol">(</a><a id="29372" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="29377" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="29379" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="29381" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="29382" class="Symbol">))</a> <a id="29385" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="29387" class="Symbol">(</a><a id="29388" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="29393" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="29395" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="29400" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="29405" class="Symbol">)</a>
  <a id="29409" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="29413" href="/PLFA-zh/DeBruijn/#24811" class="InductiveConstructor">ξ-·₂</a> <a id="29418" href="/PLFA-zh/DeBruijn/#23951" class="InductiveConstructor">V-ƛ</a> <a id="29422" class="Symbol">(</a><a id="29423" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="29427" class="Symbol">(</a><a id="29428" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="29434" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="29440" class="Symbol">))</a> <a id="29443" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="29449" class="Symbol">(</a><a id="29450" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="29452" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="29457" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="29459" class="Symbol">(</a><a id="29460" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="29465" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="29467" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="29469" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="29470" class="Symbol">))</a> <a id="29473" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="29475" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="29480" class="Symbol">(</a><a id="29481" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="29486" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="29491" class="Symbol">)</a>
  <a id="29495" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="29499" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="29503" class="Symbol">(</a><a id="29504" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="29510" class="Symbol">(</a><a id="29511" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="29517" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="29523" class="Symbol">))</a> <a id="29526" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="29532" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="29537" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="29539" class="Symbol">(</a><a id="29540" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="29545" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="29547" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="29552" class="Symbol">(</a><a id="29553" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="29558" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="29563" class="Symbol">))</a>
  <a id="29568" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="29572" href="/PLFA-zh/DeBruijn/#24811" class="InductiveConstructor">ξ-·₂</a> <a id="29577" href="/PLFA-zh/DeBruijn/#23951" class="InductiveConstructor">V-ƛ</a> <a id="29581" class="Symbol">(</a><a id="29582" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="29586" class="Symbol">(</a><a id="29587" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="29593" class="Symbol">(</a><a id="29594" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="29600" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="29606" class="Symbol">)))</a> <a id="29610" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="29616" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="29621" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="29623" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="29628" class="Symbol">(</a><a id="29629" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="29634" class="Symbol">(</a><a id="29635" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="29640" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="29645" class="Symbol">))</a>
  <a id="29650" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="29654" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="29658" class="Symbol">(</a><a id="29659" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="29665" class="Symbol">(</a><a id="29666" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="29672" class="Symbol">(</a><a id="29673" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="29679" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="29685" class="Symbol">)))</a> <a id="29689" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="29695" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="29700" class="Symbol">(</a><a id="29701" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="29706" class="Symbol">(</a><a id="29707" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="29712" class="Symbol">(</a><a id="29713" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="29718" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="29723" class="Symbol">)))</a>
  <a id="29729" href="/PLFA-zh/DeBruijn/#26395" class="InductiveConstructor Operator">∎</a></pre>

<h2 id="values-do-not-reduce">Values do not reduce</h2>

<p>We have now completed all the definitions, which of
necessity subsumed some of the propositions from the
earlier development: Canonical Forms,
Substitution preserves types, and Preservation.
We now turn to proving the remaining results from the
previous development.</p>

<h4 id="exercise-v">Exercise <code class="highlighter-rouge">V¬—→</code></h4>

<p>Following the previous development, show values do
not reduce, and its corollary, terms that reduce are not
values.</p>

<pre class="Agda"><a id="30188" class="Comment">-- Your code goes here</a></pre>

<h2 id="progress">Progress</h2>

<p>As before, every term that is well-typed and closed is either
a value or takes a reduction step.  The formulation of progress
is just as before, but annotated with types:</p>
<pre class="Agda"><a id="30420" class="Keyword">data</a> <a id="Progress"></a><a id="30425" href="/PLFA-zh/DeBruijn/#30425" class="Datatype">Progress</a> <a id="30434" class="Symbol">{</a><a id="30435" href="/PLFA-zh/DeBruijn/#30435" class="Bound">A</a><a id="30436" class="Symbol">}</a> <a id="30438" class="Symbol">(</a><a id="30439" href="/PLFA-zh/DeBruijn/#30439" class="Bound">M</a> <a id="30441" class="Symbol">:</a> <a id="30443" href="/PLFA-zh/DeBruijn/#8380" class="InductiveConstructor">∅</a> <a id="30445" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="30447" href="/PLFA-zh/DeBruijn/#30435" class="Bound">A</a><a id="30448" class="Symbol">)</a> <a id="30450" class="Symbol">:</a> <a id="30452" class="PrimitiveType">Set</a> <a id="30456" class="Keyword">where</a>

  <a id="Progress.step"></a><a id="30465" href="/PLFA-zh/DeBruijn/#30465" class="InductiveConstructor">step</a> <a id="30470" class="Symbol">:</a> <a id="30472" class="Symbol">∀</a> <a id="30474" class="Symbol">{</a><a id="30475" href="/PLFA-zh/DeBruijn/#30475" class="Bound">N</a> <a id="30477" class="Symbol">:</a> <a id="30479" href="/PLFA-zh/DeBruijn/#8380" class="InductiveConstructor">∅</a> <a id="30481" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="30483" href="/PLFA-zh/DeBruijn/#30435" class="Bound">A</a><a id="30484" class="Symbol">}</a>
    <a id="30490" class="Symbol">→</a> <a id="30492" href="/PLFA-zh/DeBruijn/#30439" class="Bound">M</a> <a id="30494" href="/PLFA-zh/DeBruijn/#24650" class="Datatype Operator">—→</a> <a id="30497" href="/PLFA-zh/DeBruijn/#30475" class="Bound">N</a>
      <a id="30505" class="Comment">-------------</a>
    <a id="30523" class="Symbol">→</a> <a id="30525" href="/PLFA-zh/DeBruijn/#30425" class="Datatype">Progress</a> <a id="30534" href="/PLFA-zh/DeBruijn/#30439" class="Bound">M</a>

  <a id="Progress.done"></a><a id="30539" href="/PLFA-zh/DeBruijn/#30539" class="InductiveConstructor">done</a> <a id="30544" class="Symbol">:</a>
      <a id="30552" href="/PLFA-zh/DeBruijn/#23912" class="Datatype">Value</a> <a id="30558" href="/PLFA-zh/DeBruijn/#30439" class="Bound">M</a>
      <a id="30566" class="Comment">----------</a>
    <a id="30581" class="Symbol">→</a> <a id="30583" href="/PLFA-zh/DeBruijn/#30425" class="Datatype">Progress</a> <a id="30592" href="/PLFA-zh/DeBruijn/#30439" class="Bound">M</a></pre>

<p>The statement and proof of progress is much as before,
appropriately annotated.  We no longer need
to explicitly refer to the Canonical Forms lemma, since it
is built-in to the definition of value:</p>
<pre class="Agda"><a id="progress"></a><a id="30817" href="/PLFA-zh/DeBruijn/#30817" class="Function">progress</a> <a id="30826" class="Symbol">:</a> <a id="30828" class="Symbol">∀</a> <a id="30830" class="Symbol">{</a><a id="30831" href="/PLFA-zh/DeBruijn/#30831" class="Bound">A</a><a id="30832" class="Symbol">}</a> <a id="30834" class="Symbol">→</a> <a id="30836" class="Symbol">(</a><a id="30837" href="/PLFA-zh/DeBruijn/#30837" class="Bound">M</a> <a id="30839" class="Symbol">:</a> <a id="30841" href="/PLFA-zh/DeBruijn/#8380" class="InductiveConstructor">∅</a> <a id="30843" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="30845" href="/PLFA-zh/DeBruijn/#30831" class="Bound">A</a><a id="30846" class="Symbol">)</a> <a id="30848" class="Symbol">→</a> <a id="30850" href="/PLFA-zh/DeBruijn/#30425" class="Datatype">Progress</a> <a id="30859" href="/PLFA-zh/DeBruijn/#30837" class="Bound">M</a>
<a id="30861" href="/PLFA-zh/DeBruijn/#30817" class="Function">progress</a> <a id="30870" class="Symbol">(</a><a id="30871" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="30873" class="Symbol">())</a>
<a id="30877" href="/PLFA-zh/DeBruijn/#30817" class="Function">progress</a> <a id="30886" class="Symbol">(</a><a id="30887" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="30889" href="/PLFA-zh/DeBruijn/#30889" class="Bound">N</a><a id="30890" class="Symbol">)</a>                          <a id="30917" class="Symbol">=</a>  <a id="30920" href="/PLFA-zh/DeBruijn/#30539" class="InductiveConstructor">done</a> <a id="30925" href="/PLFA-zh/DeBruijn/#23951" class="InductiveConstructor">V-ƛ</a>
<a id="30929" href="/PLFA-zh/DeBruijn/#30817" class="Function">progress</a> <a id="30938" class="Symbol">(</a><a id="30939" href="/PLFA-zh/DeBruijn/#30939" class="Bound">L</a> <a id="30941" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="30943" href="/PLFA-zh/DeBruijn/#30943" class="Bound">M</a><a id="30944" class="Symbol">)</a> <a id="30946" class="Keyword">with</a> <a id="30951" href="/PLFA-zh/DeBruijn/#30817" class="Function">progress</a> <a id="30960" href="/PLFA-zh/DeBruijn/#30939" class="Bound">L</a>
<a id="30962" class="Symbol">...</a>    <a id="30969" class="Symbol">|</a> <a id="30971" href="/PLFA-zh/DeBruijn/#30465" class="InductiveConstructor">step</a> <a id="30976" href="/PLFA-zh/DeBruijn/#30976" class="Bound">L—→L′</a>                     <a id="31002" class="Symbol">=</a>  <a id="31005" href="/PLFA-zh/DeBruijn/#30465" class="InductiveConstructor">step</a> <a id="31010" class="Symbol">(</a><a id="31011" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="31016" href="/PLFA-zh/DeBruijn/#30976" class="Bound">L—→L′</a><a id="31021" class="Symbol">)</a>
<a id="31023" class="Symbol">...</a>    <a id="31030" class="Symbol">|</a> <a id="31032" href="/PLFA-zh/DeBruijn/#30539" class="InductiveConstructor">done</a> <a id="31037" href="/PLFA-zh/DeBruijn/#23951" class="InductiveConstructor">V-ƛ</a> <a id="31041" class="Keyword">with</a> <a id="31046" href="/PLFA-zh/DeBruijn/#30817" class="Function">progress</a> <a id="31055" class="Bound">M</a>
<a id="31057" class="Symbol">...</a>        <a id="31068" class="Symbol">|</a> <a id="31070" href="/PLFA-zh/DeBruijn/#30465" class="InductiveConstructor">step</a> <a id="31075" href="/PLFA-zh/DeBruijn/#31075" class="Bound">M—→M′</a>                 <a id="31097" class="Symbol">=</a>  <a id="31100" href="/PLFA-zh/DeBruijn/#30465" class="InductiveConstructor">step</a> <a id="31105" class="Symbol">(</a><a id="31106" href="/PLFA-zh/DeBruijn/#24811" class="InductiveConstructor">ξ-·₂</a> <a id="31111" href="/PLFA-zh/DeBruijn/#23951" class="InductiveConstructor">V-ƛ</a> <a id="31115" href="/PLFA-zh/DeBruijn/#31075" class="Bound">M—→M′</a><a id="31120" class="Symbol">)</a>
<a id="31122" class="Symbol">...</a>        <a id="31133" class="Symbol">|</a> <a id="31135" href="/PLFA-zh/DeBruijn/#30539" class="InductiveConstructor">done</a> <a id="31140" href="/PLFA-zh/DeBruijn/#31140" class="Bound">VM</a>                    <a id="31162" class="Symbol">=</a>  <a id="31165" href="/PLFA-zh/DeBruijn/#30465" class="InductiveConstructor">step</a> <a id="31170" class="Symbol">(</a><a id="31171" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="31175" href="/PLFA-zh/DeBruijn/#31140" class="Bound">VM</a><a id="31177" class="Symbol">)</a>
<a id="31179" href="/PLFA-zh/DeBruijn/#30817" class="Function">progress</a> <a id="31188" class="Symbol">(</a><a id="31189" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="31194" class="Symbol">)</a>                        <a id="31219" class="Symbol">=</a>  <a id="31222" href="/PLFA-zh/DeBruijn/#30539" class="InductiveConstructor">done</a> <a id="31227" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a>
<a id="31234" href="/PLFA-zh/DeBruijn/#30817" class="Function">progress</a> <a id="31243" class="Symbol">(</a><a id="31244" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="31249" href="/PLFA-zh/DeBruijn/#31249" class="Bound">M</a><a id="31250" class="Symbol">)</a> <a id="31252" class="Keyword">with</a> <a id="31257" href="/PLFA-zh/DeBruijn/#30817" class="Function">progress</a> <a id="31266" href="/PLFA-zh/DeBruijn/#31249" class="Bound">M</a>
<a id="31268" class="Symbol">...</a>    <a id="31275" class="Symbol">|</a> <a id="31277" href="/PLFA-zh/DeBruijn/#30465" class="InductiveConstructor">step</a> <a id="31282" href="/PLFA-zh/DeBruijn/#31282" class="Bound">M—→M′</a>                     <a id="31308" class="Symbol">=</a>  <a id="31311" href="/PLFA-zh/DeBruijn/#30465" class="InductiveConstructor">step</a> <a id="31316" class="Symbol">(</a><a id="31317" href="/PLFA-zh/DeBruijn/#25047" class="InductiveConstructor">ξ-suc</a> <a id="31323" href="/PLFA-zh/DeBruijn/#31282" class="Bound">M—→M′</a><a id="31328" class="Symbol">)</a>
<a id="31330" class="Symbol">...</a>    <a id="31337" class="Symbol">|</a> <a id="31339" href="/PLFA-zh/DeBruijn/#30539" class="InductiveConstructor">done</a> <a id="31344" href="/PLFA-zh/DeBruijn/#31344" class="Bound">VM</a>                        <a id="31370" class="Symbol">=</a>  <a id="31373" href="/PLFA-zh/DeBruijn/#30539" class="InductiveConstructor">done</a> <a id="31378" class="Symbol">(</a><a id="31379" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="31385" href="/PLFA-zh/DeBruijn/#31344" class="Bound">VM</a><a id="31387" class="Symbol">)</a>
<a id="31389" href="/PLFA-zh/DeBruijn/#30817" class="Function">progress</a> <a id="31398" class="Symbol">(</a><a id="31399" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="31404" href="/PLFA-zh/DeBruijn/#31404" class="Bound">L</a> <a id="31406" href="/PLFA-zh/DeBruijn/#31406" class="Bound">M</a> <a id="31408" href="/PLFA-zh/DeBruijn/#31408" class="Bound">N</a><a id="31409" class="Symbol">)</a> <a id="31411" class="Keyword">with</a> <a id="31416" href="/PLFA-zh/DeBruijn/#30817" class="Function">progress</a> <a id="31425" href="/PLFA-zh/DeBruijn/#31404" class="Bound">L</a>
<a id="31427" class="Symbol">...</a>    <a id="31434" class="Symbol">|</a> <a id="31436" href="/PLFA-zh/DeBruijn/#30465" class="InductiveConstructor">step</a> <a id="31441" href="/PLFA-zh/DeBruijn/#31441" class="Bound">L—→L′</a>                     <a id="31467" class="Symbol">=</a>  <a id="31470" href="/PLFA-zh/DeBruijn/#30465" class="InductiveConstructor">step</a> <a id="31475" class="Symbol">(</a><a id="31476" href="/PLFA-zh/DeBruijn/#25141" class="InductiveConstructor">ξ-case</a> <a id="31483" href="/PLFA-zh/DeBruijn/#31441" class="Bound">L—→L′</a><a id="31488" class="Symbol">)</a>
<a id="31490" class="Symbol">...</a>    <a id="31497" class="Symbol">|</a> <a id="31499" href="/PLFA-zh/DeBruijn/#30539" class="InductiveConstructor">done</a> <a id="31504" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a>                    <a id="31530" class="Symbol">=</a>  <a id="31533" href="/PLFA-zh/DeBruijn/#30465" class="InductiveConstructor">step</a> <a id="31538" class="Symbol">(</a><a id="31539" href="/PLFA-zh/DeBruijn/#25285" class="InductiveConstructor">β-zero</a><a id="31545" class="Symbol">)</a>
<a id="31547" class="Symbol">...</a>    <a id="31554" class="Symbol">|</a> <a id="31556" href="/PLFA-zh/DeBruijn/#30539" class="InductiveConstructor">done</a> <a id="31561" class="Symbol">(</a><a id="31562" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="31568" href="/PLFA-zh/DeBruijn/#31568" class="Bound">VL</a><a id="31570" class="Symbol">)</a>                <a id="31587" class="Symbol">=</a>  <a id="31590" href="/PLFA-zh/DeBruijn/#30465" class="InductiveConstructor">step</a> <a id="31595" class="Symbol">(</a><a id="31596" href="/PLFA-zh/DeBruijn/#25387" class="InductiveConstructor">β-suc</a> <a id="31602" href="/PLFA-zh/DeBruijn/#31568" class="Bound">VL</a><a id="31604" class="Symbol">)</a>
<a id="31606" href="/PLFA-zh/DeBruijn/#30817" class="Function">progress</a> <a id="31615" class="Symbol">(</a><a id="31616" href="/PLFA-zh/DeBruijn/#10942" class="InductiveConstructor Operator">μ</a> <a id="31618" href="/PLFA-zh/DeBruijn/#31618" class="Bound">N</a><a id="31619" class="Symbol">)</a>                          <a id="31646" class="Symbol">=</a>  <a id="31649" href="/PLFA-zh/DeBruijn/#30465" class="InductiveConstructor">step</a> <a id="31654" class="Symbol">(</a><a id="31655" href="/PLFA-zh/DeBruijn/#25533" class="InductiveConstructor">β-μ</a><a id="31658" class="Symbol">)</a></pre>

<h2 id="evaluation">Evaluation</h2>

<p>Before, we combined progress and preservation to evaluate a term.
We can do much the same here, but we no longer need to explicitly
refer to preservation, since it is built-in to the definition of reduction.</p>

<p>As previously, gas is specified by a natural number:</p>
<pre class="Agda"><a id="31963" class="Keyword">data</a> <a id="Gas"></a><a id="31968" href="/PLFA-zh/DeBruijn/#31968" class="Datatype">Gas</a> <a id="31972" class="Symbol">:</a> <a id="31974" class="PrimitiveType">Set</a> <a id="31978" class="Keyword">where</a>
  <a id="Gas.gas"></a><a id="31986" href="/PLFA-zh/DeBruijn/#31986" class="InductiveConstructor">gas</a> <a id="31990" class="Symbol">:</a> <a id="31992" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a> <a id="31994" class="Symbol">→</a> <a id="31996" href="/PLFA-zh/DeBruijn/#31968" class="Datatype">Gas</a></pre>
<p>When our evaluator returns a term <code class="highlighter-rouge">N</code>, it will either give evidence that
<code class="highlighter-rouge">N</code> is a value or indicate that it ran out of gas:</p>
<pre class="Agda"><a id="32148" class="Keyword">data</a> <a id="Finished"></a><a id="32153" href="/PLFA-zh/DeBruijn/#32153" class="Datatype">Finished</a> <a id="32162" class="Symbol">{</a><a id="32163" href="/PLFA-zh/DeBruijn/#32163" class="Bound">Γ</a> <a id="32165" href="/PLFA-zh/DeBruijn/#32165" class="Bound">A</a><a id="32166" class="Symbol">}</a> <a id="32168" class="Symbol">(</a><a id="32169" href="/PLFA-zh/DeBruijn/#32169" class="Bound">N</a> <a id="32171" class="Symbol">:</a> <a id="32173" href="/PLFA-zh/DeBruijn/#32163" class="Bound">Γ</a> <a id="32175" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="32177" href="/PLFA-zh/DeBruijn/#32165" class="Bound">A</a><a id="32178" class="Symbol">)</a> <a id="32180" class="Symbol">:</a> <a id="32182" class="PrimitiveType">Set</a> <a id="32186" class="Keyword">where</a>

   <a id="Finished.done"></a><a id="32196" href="/PLFA-zh/DeBruijn/#32196" class="InductiveConstructor">done</a> <a id="32201" class="Symbol">:</a>
       <a id="32210" href="/PLFA-zh/DeBruijn/#23912" class="Datatype">Value</a> <a id="32216" href="/PLFA-zh/DeBruijn/#32169" class="Bound">N</a>
       <a id="32225" class="Comment">----------</a>
     <a id="32241" class="Symbol">→</a> <a id="32243" href="/PLFA-zh/DeBruijn/#32153" class="Datatype">Finished</a> <a id="32252" href="/PLFA-zh/DeBruijn/#32169" class="Bound">N</a>

   <a id="Finished.out-of-gas"></a><a id="32258" href="/PLFA-zh/DeBruijn/#32258" class="InductiveConstructor">out-of-gas</a> <a id="32269" class="Symbol">:</a>
       <a id="32278" class="Comment">----------</a>
       <a id="32296" href="/PLFA-zh/DeBruijn/#32153" class="Datatype">Finished</a> <a id="32305" href="/PLFA-zh/DeBruijn/#32169" class="Bound">N</a></pre>
<p>Given a term <code class="highlighter-rouge">L</code> of type <code class="highlighter-rouge">A</code>, the evaluator will, for some <code class="highlighter-rouge">N</code>, return
a reduction sequence from <code class="highlighter-rouge">L</code> to <code class="highlighter-rouge">N</code> and an indication of whether
reduction finished:</p>
<pre class="Agda"><a id="32488" class="Keyword">data</a> <a id="Steps"></a><a id="32493" href="/PLFA-zh/DeBruijn/#32493" class="Datatype">Steps</a> <a id="32499" class="Symbol">:</a> <a id="32501" class="Symbol">∀</a> <a id="32503" class="Symbol">{</a><a id="32504" href="/PLFA-zh/DeBruijn/#32504" class="Bound">A</a><a id="32505" class="Symbol">}</a> <a id="32507" class="Symbol">→</a> <a id="32509" href="/PLFA-zh/DeBruijn/#8380" class="InductiveConstructor">∅</a> <a id="32511" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="32513" href="/PLFA-zh/DeBruijn/#32504" class="Bound">A</a> <a id="32515" class="Symbol">→</a> <a id="32517" class="PrimitiveType">Set</a> <a id="32521" class="Keyword">where</a>

  <a id="Steps.steps"></a><a id="32530" href="/PLFA-zh/DeBruijn/#32530" class="InductiveConstructor">steps</a> <a id="32536" class="Symbol">:</a> <a id="32538" class="Symbol">∀</a> <a id="32540" class="Symbol">{</a><a id="32541" href="/PLFA-zh/DeBruijn/#32541" class="Bound">A</a><a id="32542" class="Symbol">}</a> <a id="32544" class="Symbol">{</a><a id="32545" href="/PLFA-zh/DeBruijn/#32545" class="Bound">L</a> <a id="32547" href="/PLFA-zh/DeBruijn/#32547" class="Bound">N</a> <a id="32549" class="Symbol">:</a> <a id="32551" href="/PLFA-zh/DeBruijn/#8380" class="InductiveConstructor">∅</a> <a id="32553" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="32555" href="/PLFA-zh/DeBruijn/#32541" class="Bound">A</a><a id="32556" class="Symbol">}</a>
    <a id="32562" class="Symbol">→</a> <a id="32564" href="/PLFA-zh/DeBruijn/#32545" class="Bound">L</a> <a id="32566" href="/PLFA-zh/DeBruijn/#26345" class="Datatype Operator">—↠</a> <a id="32569" href="/PLFA-zh/DeBruijn/#32547" class="Bound">N</a>
    <a id="32575" class="Symbol">→</a> <a id="32577" href="/PLFA-zh/DeBruijn/#32153" class="Datatype">Finished</a> <a id="32586" href="/PLFA-zh/DeBruijn/#32547" class="Bound">N</a>
      <a id="32594" class="Comment">----------</a>
    <a id="32609" class="Symbol">→</a> <a id="32611" href="/PLFA-zh/DeBruijn/#32493" class="Datatype">Steps</a> <a id="32617" href="/PLFA-zh/DeBruijn/#32545" class="Bound">L</a></pre>
<p>The evaluator takes gas and a term and returns the corresponding steps:</p>
<pre class="Agda"><a id="eval"></a><a id="32715" href="/PLFA-zh/DeBruijn/#32715" class="Function">eval</a> <a id="32720" class="Symbol">:</a> <a id="32722" class="Symbol">∀</a> <a id="32724" class="Symbol">{</a><a id="32725" href="/PLFA-zh/DeBruijn/#32725" class="Bound">A</a><a id="32726" class="Symbol">}</a>
  <a id="32730" class="Symbol">→</a> <a id="32732" href="/PLFA-zh/DeBruijn/#31968" class="Datatype">Gas</a>
  <a id="32738" class="Symbol">→</a> <a id="32740" class="Symbol">(</a><a id="32741" href="/PLFA-zh/DeBruijn/#32741" class="Bound">L</a> <a id="32743" class="Symbol">:</a> <a id="32745" href="/PLFA-zh/DeBruijn/#8380" class="InductiveConstructor">∅</a> <a id="32747" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="32749" href="/PLFA-zh/DeBruijn/#32725" class="Bound">A</a><a id="32750" class="Symbol">)</a>
    <a id="32756" class="Comment">-----------</a>
  <a id="32770" class="Symbol">→</a> <a id="32772" href="/PLFA-zh/DeBruijn/#32493" class="Datatype">Steps</a> <a id="32778" href="/PLFA-zh/DeBruijn/#32741" class="Bound">L</a>
<a id="32780" href="/PLFA-zh/DeBruijn/#32715" class="Function">eval</a> <a id="32785" class="Symbol">(</a><a id="32786" href="/PLFA-zh/DeBruijn/#31986" class="InductiveConstructor">gas</a> <a id="32790" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Nat.html#115" class="InductiveConstructor">zero</a><a id="32794" class="Symbol">)</a>    <a id="32799" href="/PLFA-zh/DeBruijn/#32799" class="Bound">L</a>                     <a id="32821" class="Symbol">=</a>  <a id="32824" href="/PLFA-zh/DeBruijn/#32530" class="InductiveConstructor">steps</a> <a id="32830" class="Symbol">(</a><a id="32831" href="/PLFA-zh/DeBruijn/#32799" class="Bound">L</a> <a id="32833" href="/PLFA-zh/DeBruijn/#26395" class="InductiveConstructor Operator">∎</a><a id="32834" class="Symbol">)</a> <a id="32836" href="/PLFA-zh/DeBruijn/#32258" class="InductiveConstructor">out-of-gas</a>
<a id="32847" href="/PLFA-zh/DeBruijn/#32715" class="Function">eval</a> <a id="32852" class="Symbol">(</a><a id="32853" href="/PLFA-zh/DeBruijn/#31986" class="InductiveConstructor">gas</a> <a id="32857" class="Symbol">(</a><a id="32858" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Nat.html#128" class="InductiveConstructor">suc</a> <a id="32862" href="/PLFA-zh/DeBruijn/#32862" class="Bound">m</a><a id="32863" class="Symbol">))</a> <a id="32866" href="/PLFA-zh/DeBruijn/#32866" class="Bound">L</a> <a id="32868" class="Keyword">with</a> <a id="32873" href="/PLFA-zh/DeBruijn/#30817" class="Function">progress</a> <a id="32882" href="/PLFA-zh/DeBruijn/#32866" class="Bound">L</a>
<a id="32884" class="Symbol">...</a> <a id="32888" class="Symbol">|</a> <a id="32890" href="/PLFA-zh/DeBruijn/#30539" class="InductiveConstructor">done</a> <a id="32895" href="/PLFA-zh/DeBruijn/#32895" class="Bound">VL</a>                            <a id="32925" class="Symbol">=</a>  <a id="32928" href="/PLFA-zh/DeBruijn/#32530" class="InductiveConstructor">steps</a> <a id="32934" class="Symbol">(</a><a id="32935" class="Bound">L</a> <a id="32937" href="/PLFA-zh/DeBruijn/#26395" class="InductiveConstructor Operator">∎</a><a id="32938" class="Symbol">)</a> <a id="32940" class="Symbol">(</a><a id="32941" href="/PLFA-zh/DeBruijn/#32196" class="InductiveConstructor">done</a> <a id="32946" href="/PLFA-zh/DeBruijn/#32895" class="Bound">VL</a><a id="32948" class="Symbol">)</a>
<a id="32950" class="Symbol">...</a> <a id="32954" class="Symbol">|</a> <a id="32956" href="/PLFA-zh/DeBruijn/#30465" class="InductiveConstructor">step</a> <a id="32961" class="Symbol">{</a><a id="32962" href="/PLFA-zh/DeBruijn/#32962" class="Bound">M</a><a id="32963" class="Symbol">}</a> <a id="32965" href="/PLFA-zh/DeBruijn/#32965" class="Bound">L—→M</a> <a id="32970" class="Keyword">with</a> <a id="32975" href="/PLFA-zh/DeBruijn/#32715" class="Function">eval</a> <a id="32980" class="Symbol">(</a><a id="32981" href="/PLFA-zh/DeBruijn/#31986" class="InductiveConstructor">gas</a> <a id="32985" class="Bound">m</a><a id="32986" class="Symbol">)</a> <a id="32988" href="/PLFA-zh/DeBruijn/#32962" class="Bound">M</a>
<a id="32990" class="Symbol">...</a>    <a id="32997" class="Symbol">|</a> <a id="32999" href="/PLFA-zh/DeBruijn/#32530" class="InductiveConstructor">steps</a> <a id="33005" href="/PLFA-zh/DeBruijn/#33005" class="Bound">M—↠N</a> <a id="33010" href="/PLFA-zh/DeBruijn/#33010" class="Bound">fin</a>                  <a id="33031" class="Symbol">=</a>  <a id="33034" href="/PLFA-zh/DeBruijn/#32530" class="InductiveConstructor">steps</a> <a id="33040" class="Symbol">(</a><a id="33041" class="Bound">L</a> <a id="33043" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="33047" class="Bound">L—→M</a> <a id="33052" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a> <a id="33054" href="/PLFA-zh/DeBruijn/#33005" class="Bound">M—↠N</a><a id="33058" class="Symbol">)</a> <a id="33060" href="/PLFA-zh/DeBruijn/#33010" class="Bound">fin</a></pre>
<p>The definition is a little simpler than previously, as we no longer need
to invoke preservation.</p>

<h2 id="examples-1">Examples</h2>

<p>We reiterate each of our previous examples.  We re-define the term
<code class="highlighter-rouge">sucμ</code> that loops forever:</p>
<pre class="Agda"><a id="sucμ"></a><a id="33293" href="/PLFA-zh/DeBruijn/#33293" class="Function">sucμ</a> <a id="33298" class="Symbol">:</a> <a id="33300" href="/PLFA-zh/DeBruijn/#8380" class="InductiveConstructor">∅</a> <a id="33302" href="/PLFA-zh/DeBruijn/#10508" class="Datatype Operator">⊢</a> <a id="33304" href="/PLFA-zh/DeBruijn/#8220" class="InductiveConstructor">`ℕ</a>
<a id="33307" href="/PLFA-zh/DeBruijn/#33293" class="Function">sucμ</a> <a id="33312" class="Symbol">=</a> <a id="33314" href="/PLFA-zh/DeBruijn/#10942" class="InductiveConstructor Operator">μ</a> <a id="33316" class="Symbol">(</a><a id="33317" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="33322" class="Symbol">(</a><a id="33323" href="/PLFA-zh/DeBruijn/#13104" class="Function Operator">#</a> <a id="33325" class="Number">0</a><a id="33326" class="Symbol">))</a></pre>
<p>To compute the first three steps of the infinite reduction sequence,
we evaluate with three steps worth of gas:</p>
<pre class="Agda"><a id="33465" href="/PLFA-zh/DeBruijn/#33465" class="Function">_</a> <a id="33467" class="Symbol">:</a> <a id="33469" href="/PLFA-zh/DeBruijn/#32715" class="Function">eval</a> <a id="33474" class="Symbol">(</a><a id="33475" href="/PLFA-zh/DeBruijn/#31986" class="InductiveConstructor">gas</a> <a id="33479" class="Number">3</a><a id="33480" class="Symbol">)</a> <a id="33482" href="/PLFA-zh/DeBruijn/#33293" class="Function">sucμ</a> <a id="33487" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a>
  <a id="33491" href="/PLFA-zh/DeBruijn/#32530" class="InductiveConstructor">steps</a>
   <a id="33500" class="Symbol">(</a><a id="33501" href="/PLFA-zh/DeBruijn/#10942" class="InductiveConstructor Operator">μ</a> <a id="33503" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="33508" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="33510" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a>
   <a id="33515" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="33519" href="/PLFA-zh/DeBruijn/#25533" class="InductiveConstructor">β-μ</a> <a id="33523" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="33529" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="33534" class="Symbol">(</a><a id="33535" href="/PLFA-zh/DeBruijn/#10942" class="InductiveConstructor Operator">μ</a> <a id="33537" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="33542" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="33544" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="33545" class="Symbol">)</a>
   <a id="33550" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="33554" href="/PLFA-zh/DeBruijn/#25047" class="InductiveConstructor">ξ-suc</a> <a id="33560" href="/PLFA-zh/DeBruijn/#25533" class="InductiveConstructor">β-μ</a> <a id="33564" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="33570" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="33575" class="Symbol">(</a><a id="33576" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="33581" class="Symbol">(</a><a id="33582" href="/PLFA-zh/DeBruijn/#10942" class="InductiveConstructor Operator">μ</a> <a id="33584" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="33589" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="33591" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="33592" class="Symbol">))</a>
   <a id="33598" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="33602" href="/PLFA-zh/DeBruijn/#25047" class="InductiveConstructor">ξ-suc</a> <a id="33608" class="Symbol">(</a><a id="33609" href="/PLFA-zh/DeBruijn/#25047" class="InductiveConstructor">ξ-suc</a> <a id="33615" href="/PLFA-zh/DeBruijn/#25533" class="InductiveConstructor">β-μ</a><a id="33618" class="Symbol">)</a> <a id="33620" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="33626" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="33631" class="Symbol">(</a><a id="33632" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="33637" class="Symbol">(</a><a id="33638" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="33643" class="Symbol">(</a><a id="33644" href="/PLFA-zh/DeBruijn/#10942" class="InductiveConstructor Operator">μ</a> <a id="33646" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="33651" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="33653" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="33654" class="Symbol">)))</a>
   <a id="33661" href="/PLFA-zh/DeBruijn/#26395" class="InductiveConstructor Operator">∎</a><a id="33662" class="Symbol">)</a>
   <a id="33667" href="/PLFA-zh/DeBruijn/#32258" class="InductiveConstructor">out-of-gas</a>
<a id="33678" class="Symbol">_</a> <a id="33680" class="Symbol">=</a> <a id="33682" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a></pre>

<p>The Church numeral two applied to successor and zero:</p>
<pre class="Agda"><a id="33766" href="/PLFA-zh/DeBruijn/#33766" class="Function">_</a> <a id="33768" class="Symbol">:</a> <a id="33770" href="/PLFA-zh/DeBruijn/#32715" class="Function">eval</a> <a id="33775" class="Symbol">(</a><a id="33776" href="/PLFA-zh/DeBruijn/#31986" class="InductiveConstructor">gas</a> <a id="33780" class="Number">100</a><a id="33783" class="Symbol">)</a> <a id="33785" class="Symbol">(</a><a id="33786" href="/PLFA-zh/DeBruijn/#14104" class="Function">twoᶜ</a> <a id="33791" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="33793" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="33798" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="33800" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="33805" class="Symbol">)</a> <a id="33807" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a>
  <a id="33811" href="/PLFA-zh/DeBruijn/#32530" class="InductiveConstructor">steps</a>
   <a id="33820" class="Symbol">((</a><a id="33822" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="33824" class="Symbol">(</a><a id="33825" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="33827" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="33829" class="Symbol">(</a><a id="33830" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="33832" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="33833" class="Symbol">)</a> <a id="33835" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="33837" class="Symbol">(</a><a id="33838" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="33840" class="Symbol">(</a><a id="33841" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="33843" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="33844" class="Symbol">)</a> <a id="33846" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="33848" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="33850" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="33851" class="Symbol">)))</a> <a id="33855" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="33857" class="Symbol">(</a><a id="33858" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="33860" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="33865" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="33867" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="33868" class="Symbol">)</a> <a id="33870" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="33872" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a>
   <a id="33881" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="33885" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="33890" class="Symbol">(</a><a id="33891" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="33895" href="/PLFA-zh/DeBruijn/#23951" class="InductiveConstructor">V-ƛ</a><a id="33898" class="Symbol">)</a> <a id="33900" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="33906" class="Symbol">(</a><a id="33907" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="33909" class="Symbol">(</a><a id="33910" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="33912" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="33917" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="33919" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="33920" class="Symbol">)</a> <a id="33922" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="33924" class="Symbol">((</a><a id="33926" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="33928" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="33933" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="33935" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="33936" class="Symbol">)</a> <a id="33938" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="33940" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="33942" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="33943" class="Symbol">))</a> <a id="33946" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="33948" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a>
   <a id="33957" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="33961" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="33965" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a> <a id="33972" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="33978" class="Symbol">(</a><a id="33979" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="33981" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="33986" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="33988" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="33989" class="Symbol">)</a> <a id="33991" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="33993" class="Symbol">((</a><a id="33995" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="33997" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="34002" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="34004" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="34005" class="Symbol">)</a> <a id="34007" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="34009" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="34014" class="Symbol">)</a>
   <a id="34019" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="34023" href="/PLFA-zh/DeBruijn/#24811" class="InductiveConstructor">ξ-·₂</a> <a id="34028" href="/PLFA-zh/DeBruijn/#23951" class="InductiveConstructor">V-ƛ</a> <a id="34032" class="Symbol">(</a><a id="34033" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="34037" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="34043" class="Symbol">)</a> <a id="34045" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="34051" class="Symbol">(</a><a id="34052" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="34054" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="34059" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="34061" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="34062" class="Symbol">)</a> <a id="34064" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="34066" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="34071" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a>
   <a id="34080" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="34084" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="34088" class="Symbol">(</a><a id="34089" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="34095" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="34101" class="Symbol">)</a> <a id="34103" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="34109" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="34114" class="Symbol">(</a><a id="34115" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="34120" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="34125" class="Symbol">)</a>
   <a id="34130" href="/PLFA-zh/DeBruijn/#26395" class="InductiveConstructor Operator">∎</a><a id="34131" class="Symbol">)</a>
   <a id="34136" class="Symbol">(</a><a id="34137" href="/PLFA-zh/DeBruijn/#32196" class="InductiveConstructor">done</a> <a id="34142" class="Symbol">(</a><a id="34143" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="34149" class="Symbol">(</a><a id="34150" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="34156" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="34162" class="Symbol">)))</a>
<a id="34166" class="Symbol">_</a> <a id="34168" class="Symbol">=</a> <a id="34170" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a></pre>

<p>Two plus two is four:</p>
<pre class="Agda"><a id="34222" href="/PLFA-zh/DeBruijn/#34222" class="Function">_</a> <a id="34224" class="Symbol">:</a> <a id="34226" href="/PLFA-zh/DeBruijn/#32715" class="Function">eval</a> <a id="34231" class="Symbol">(</a><a id="34232" href="/PLFA-zh/DeBruijn/#31986" class="InductiveConstructor">gas</a> <a id="34236" class="Number">100</a><a id="34239" class="Symbol">)</a> <a id="34241" class="Symbol">(</a><a id="34242" href="/PLFA-zh/DeBruijn/#13581" class="Function">plus</a> <a id="34247" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="34249" href="/PLFA-zh/DeBruijn/#13537" class="Function">two</a> <a id="34253" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="34255" href="/PLFA-zh/DeBruijn/#13537" class="Function">two</a><a id="34258" class="Symbol">)</a> <a id="34260" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a>
  <a id="34264" href="/PLFA-zh/DeBruijn/#32530" class="InductiveConstructor">steps</a>
   <a id="34273" class="Symbol">((</a><a id="34275" href="/PLFA-zh/DeBruijn/#10942" class="InductiveConstructor Operator">μ</a>
     <a id="34282" class="Symbol">(</a><a id="34283" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
      <a id="34291" class="Symbol">(</a><a id="34292" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
       <a id="34301" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="34306" class="Symbol">(</a><a id="34307" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="34309" class="Symbol">(</a><a id="34310" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="34312" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="34313" class="Symbol">))</a> <a id="34316" class="Symbol">(</a><a id="34317" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="34319" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="34320" class="Symbol">)</a> <a id="34322" class="Symbol">(</a><a id="34323" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="34328" class="Symbol">(</a><a id="34329" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="34331" class="Symbol">(</a><a id="34332" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="34334" class="Symbol">(</a><a id="34335" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="34337" class="Symbol">(</a><a id="34338" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="34340" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="34341" class="Symbol">)))</a> <a id="34345" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="34347" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="34349" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a> <a id="34351" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="34353" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="34355" class="Symbol">(</a><a id="34356" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="34358" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="34359" class="Symbol">))))))</a>
    <a id="34370" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="34372" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="34377" class="Symbol">(</a><a id="34378" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="34383" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="34388" class="Symbol">)</a>
    <a id="34394" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="34396" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="34401" class="Symbol">(</a><a id="34402" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="34407" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="34412" class="Symbol">)</a>
   <a id="34417" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="34421" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="34426" class="Symbol">(</a><a id="34427" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="34432" href="/PLFA-zh/DeBruijn/#25533" class="InductiveConstructor">β-μ</a><a id="34435" class="Symbol">)</a> <a id="34437" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="34443" class="Symbol">(</a><a id="34444" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
     <a id="34451" class="Symbol">(</a><a id="34452" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
      <a id="34460" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="34465" class="Symbol">(</a><a id="34466" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="34468" class="Symbol">(</a><a id="34469" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="34471" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="34472" class="Symbol">))</a> <a id="34475" class="Symbol">(</a><a id="34476" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="34478" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="34479" class="Symbol">)</a>
      <a id="34487" class="Symbol">(</a><a id="34488" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a>
       <a id="34500" class="Symbol">((</a><a id="34502" href="/PLFA-zh/DeBruijn/#10942" class="InductiveConstructor Operator">μ</a>
         <a id="34513" class="Symbol">(</a><a id="34514" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
          <a id="34526" class="Symbol">(</a><a id="34527" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
           <a id="34540" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="34545" class="Symbol">(</a><a id="34546" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="34548" class="Symbol">(</a><a id="34549" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="34551" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="34552" class="Symbol">))</a> <a id="34555" class="Symbol">(</a><a id="34556" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="34558" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="34559" class="Symbol">)</a> <a id="34561" class="Symbol">(</a><a id="34562" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="34567" class="Symbol">(</a><a id="34568" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="34570" class="Symbol">(</a><a id="34571" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="34573" class="Symbol">(</a><a id="34574" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="34576" class="Symbol">(</a><a id="34577" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="34579" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="34580" class="Symbol">)))</a> <a id="34584" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="34586" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="34588" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a> <a id="34590" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="34592" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="34594" class="Symbol">(</a><a id="34595" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="34597" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="34598" class="Symbol">))))))</a>
        <a id="34613" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="34615" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="34617" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a>
        <a id="34627" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="34629" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="34631" class="Symbol">(</a><a id="34632" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="34634" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="34635" class="Symbol">)))))</a>
    <a id="34645" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="34647" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="34652" class="Symbol">(</a><a id="34653" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="34658" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="34663" class="Symbol">)</a>
    <a id="34669" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="34671" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="34676" class="Symbol">(</a><a id="34677" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="34682" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="34687" class="Symbol">)</a>
   <a id="34692" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="34696" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="34701" class="Symbol">(</a><a id="34702" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="34706" class="Symbol">(</a><a id="34707" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="34713" class="Symbol">(</a><a id="34714" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="34720" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="34726" class="Symbol">)))</a> <a id="34730" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="34736" class="Symbol">(</a><a id="34737" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
     <a id="34744" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="34749" class="Symbol">(</a><a id="34750" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="34755" class="Symbol">(</a><a id="34756" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="34761" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="34766" class="Symbol">))</a> <a id="34769" class="Symbol">(</a><a id="34770" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="34772" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="34773" class="Symbol">)</a>
     <a id="34780" class="Symbol">(</a><a id="34781" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a>
      <a id="34792" class="Symbol">((</a><a id="34794" href="/PLFA-zh/DeBruijn/#10942" class="InductiveConstructor Operator">μ</a>
        <a id="34804" class="Symbol">(</a><a id="34805" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
         <a id="34816" class="Symbol">(</a><a id="34817" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
          <a id="34829" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="34834" class="Symbol">(</a><a id="34835" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="34837" class="Symbol">(</a><a id="34838" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="34840" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="34841" class="Symbol">))</a> <a id="34844" class="Symbol">(</a><a id="34845" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="34847" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="34848" class="Symbol">)</a> <a id="34850" class="Symbol">(</a><a id="34851" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="34856" class="Symbol">(</a><a id="34857" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="34859" class="Symbol">(</a><a id="34860" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="34862" class="Symbol">(</a><a id="34863" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="34865" class="Symbol">(</a><a id="34866" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="34868" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="34869" class="Symbol">)))</a> <a id="34873" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="34875" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="34877" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a> <a id="34879" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="34881" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="34883" class="Symbol">(</a><a id="34884" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="34886" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="34887" class="Symbol">))))))</a>
       <a id="34901" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="34903" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="34905" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a>
       <a id="34914" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="34916" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="34918" class="Symbol">(</a><a id="34919" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="34921" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="34922" class="Symbol">))))</a>
    <a id="34931" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="34933" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="34938" class="Symbol">(</a><a id="34939" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="34944" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="34949" class="Symbol">)</a>
   <a id="34954" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="34958" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="34962" class="Symbol">(</a><a id="34963" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="34969" class="Symbol">(</a><a id="34970" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="34976" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="34982" class="Symbol">))</a> <a id="34985" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="34991" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="34996" class="Symbol">(</a><a id="34997" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="35002" class="Symbol">(</a><a id="35003" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="35008" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="35013" class="Symbol">))</a> <a id="35016" class="Symbol">(</a><a id="35017" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="35022" class="Symbol">(</a><a id="35023" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="35028" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="35033" class="Symbol">))</a>
    <a id="35040" class="Symbol">(</a><a id="35041" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a>
     <a id="35051" class="Symbol">((</a><a id="35053" href="/PLFA-zh/DeBruijn/#10942" class="InductiveConstructor Operator">μ</a>
       <a id="35062" class="Symbol">(</a><a id="35063" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
        <a id="35073" class="Symbol">(</a><a id="35074" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
         <a id="35085" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="35090" class="Symbol">(</a><a id="35091" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="35093" class="Symbol">(</a><a id="35094" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="35096" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="35097" class="Symbol">))</a> <a id="35100" class="Symbol">(</a><a id="35101" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="35103" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="35104" class="Symbol">)</a> <a id="35106" class="Symbol">(</a><a id="35107" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="35112" class="Symbol">(</a><a id="35113" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="35115" class="Symbol">(</a><a id="35116" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="35118" class="Symbol">(</a><a id="35119" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="35121" class="Symbol">(</a><a id="35122" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="35124" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="35125" class="Symbol">)))</a> <a id="35129" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="35131" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="35133" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a> <a id="35135" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="35137" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="35139" class="Symbol">(</a><a id="35140" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="35142" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="35143" class="Symbol">))))))</a>
      <a id="35156" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="35158" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="35160" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a>
      <a id="35168" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="35170" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="35175" class="Symbol">(</a><a id="35176" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="35181" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="35186" class="Symbol">)))</a>
   <a id="35193" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="35197" href="/PLFA-zh/DeBruijn/#25387" class="InductiveConstructor">β-suc</a> <a id="35203" class="Symbol">(</a><a id="35204" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="35210" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="35216" class="Symbol">)</a> <a id="35218" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="35224" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a>
    <a id="35233" class="Symbol">((</a><a id="35235" href="/PLFA-zh/DeBruijn/#10942" class="InductiveConstructor Operator">μ</a>
      <a id="35243" class="Symbol">(</a><a id="35244" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
       <a id="35253" class="Symbol">(</a><a id="35254" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
        <a id="35264" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="35269" class="Symbol">(</a><a id="35270" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="35272" class="Symbol">(</a><a id="35273" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="35275" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="35276" class="Symbol">))</a> <a id="35279" class="Symbol">(</a><a id="35280" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="35282" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="35283" class="Symbol">)</a> <a id="35285" class="Symbol">(</a><a id="35286" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="35291" class="Symbol">(</a><a id="35292" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="35294" class="Symbol">(</a><a id="35295" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="35297" class="Symbol">(</a><a id="35298" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="35300" class="Symbol">(</a><a id="35301" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="35303" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="35304" class="Symbol">)))</a> <a id="35308" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="35310" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="35312" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a> <a id="35314" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="35316" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="35318" class="Symbol">(</a><a id="35319" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="35321" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="35322" class="Symbol">))))))</a>
     <a id="35334" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="35336" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="35341" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a>
     <a id="35352" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="35354" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="35359" class="Symbol">(</a><a id="35360" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="35365" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="35370" class="Symbol">))</a>
   <a id="35376" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="35380" href="/PLFA-zh/DeBruijn/#25047" class="InductiveConstructor">ξ-suc</a> <a id="35386" class="Symbol">(</a><a id="35387" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="35392" class="Symbol">(</a><a id="35393" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="35398" href="/PLFA-zh/DeBruijn/#25533" class="InductiveConstructor">β-μ</a><a id="35401" class="Symbol">))</a> <a id="35404" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="35410" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a>
    <a id="35419" class="Symbol">((</a><a id="35421" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
      <a id="35429" class="Symbol">(</a><a id="35430" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
       <a id="35439" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="35444" class="Symbol">(</a><a id="35445" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="35447" class="Symbol">(</a><a id="35448" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="35450" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="35451" class="Symbol">))</a> <a id="35454" class="Symbol">(</a><a id="35455" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="35457" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="35458" class="Symbol">)</a>
       <a id="35467" class="Symbol">(</a><a id="35468" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a>
        <a id="35481" class="Symbol">((</a><a id="35483" href="/PLFA-zh/DeBruijn/#10942" class="InductiveConstructor Operator">μ</a>
          <a id="35495" class="Symbol">(</a><a id="35496" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
           <a id="35509" class="Symbol">(</a><a id="35510" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
            <a id="35524" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="35529" class="Symbol">(</a><a id="35530" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="35532" class="Symbol">(</a><a id="35533" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="35535" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="35536" class="Symbol">))</a> <a id="35539" class="Symbol">(</a><a id="35540" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="35542" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="35543" class="Symbol">)</a> <a id="35545" class="Symbol">(</a><a id="35546" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="35551" class="Symbol">(</a><a id="35552" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="35554" class="Symbol">(</a><a id="35555" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="35557" class="Symbol">(</a><a id="35558" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="35560" class="Symbol">(</a><a id="35561" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="35563" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="35564" class="Symbol">)))</a> <a id="35568" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="35570" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="35572" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a> <a id="35574" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="35576" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="35578" class="Symbol">(</a><a id="35579" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="35581" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="35582" class="Symbol">))))))</a>
         <a id="35598" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="35600" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="35602" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a>
         <a id="35613" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="35615" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="35617" class="Symbol">(</a><a id="35618" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="35620" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="35621" class="Symbol">)))))</a>
     <a id="35632" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="35634" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="35639" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a>
     <a id="35650" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="35652" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="35657" class="Symbol">(</a><a id="35658" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="35663" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="35668" class="Symbol">))</a>
   <a id="35674" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="35678" href="/PLFA-zh/DeBruijn/#25047" class="InductiveConstructor">ξ-suc</a> <a id="35684" class="Symbol">(</a><a id="35685" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="35690" class="Symbol">(</a><a id="35691" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="35695" class="Symbol">(</a><a id="35696" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="35702" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="35708" class="Symbol">)))</a> <a id="35712" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="35718" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a>
    <a id="35727" class="Symbol">((</a><a id="35729" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
      <a id="35737" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="35742" class="Symbol">(</a><a id="35743" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="35748" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="35753" class="Symbol">)</a> <a id="35755" class="Symbol">(</a><a id="35756" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="35758" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="35759" class="Symbol">)</a>
      <a id="35767" class="Symbol">(</a><a id="35768" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a>
       <a id="35780" class="Symbol">((</a><a id="35782" href="/PLFA-zh/DeBruijn/#10942" class="InductiveConstructor Operator">μ</a>
         <a id="35793" class="Symbol">(</a><a id="35794" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
          <a id="35806" class="Symbol">(</a><a id="35807" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
           <a id="35820" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="35825" class="Symbol">(</a><a id="35826" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="35828" class="Symbol">(</a><a id="35829" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="35831" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="35832" class="Symbol">))</a> <a id="35835" class="Symbol">(</a><a id="35836" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="35838" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="35839" class="Symbol">)</a> <a id="35841" class="Symbol">(</a><a id="35842" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="35847" class="Symbol">(</a><a id="35848" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="35850" class="Symbol">(</a><a id="35851" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="35853" class="Symbol">(</a><a id="35854" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="35856" class="Symbol">(</a><a id="35857" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="35859" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="35860" class="Symbol">)))</a> <a id="35864" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="35866" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="35868" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a> <a id="35870" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="35872" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="35874" class="Symbol">(</a><a id="35875" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="35877" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="35878" class="Symbol">))))))</a>
        <a id="35893" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="35895" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="35897" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a>
        <a id="35907" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="35909" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="35911" class="Symbol">(</a><a id="35912" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="35914" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="35915" class="Symbol">))))</a>
     <a id="35925" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="35927" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="35932" class="Symbol">(</a><a id="35933" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="35938" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="35943" class="Symbol">))</a>
   <a id="35949" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="35953" href="/PLFA-zh/DeBruijn/#25047" class="InductiveConstructor">ξ-suc</a> <a id="35959" class="Symbol">(</a><a id="35960" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="35964" class="Symbol">(</a><a id="35965" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="35971" class="Symbol">(</a><a id="35972" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="35978" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="35984" class="Symbol">)))</a> <a id="35988" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="35994" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a>
    <a id="36003" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="36008" class="Symbol">(</a><a id="36009" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="36014" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="36019" class="Symbol">)</a> <a id="36021" class="Symbol">(</a><a id="36022" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="36027" class="Symbol">(</a><a id="36028" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="36033" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="36038" class="Symbol">))</a>
    <a id="36045" class="Symbol">(</a><a id="36046" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a>
     <a id="36056" class="Symbol">((</a><a id="36058" href="/PLFA-zh/DeBruijn/#10942" class="InductiveConstructor Operator">μ</a>
       <a id="36067" class="Symbol">(</a><a id="36068" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
        <a id="36078" class="Symbol">(</a><a id="36079" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
         <a id="36090" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="36095" class="Symbol">(</a><a id="36096" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="36098" class="Symbol">(</a><a id="36099" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="36101" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="36102" class="Symbol">))</a> <a id="36105" class="Symbol">(</a><a id="36106" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="36108" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="36109" class="Symbol">)</a> <a id="36111" class="Symbol">(</a><a id="36112" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="36117" class="Symbol">(</a><a id="36118" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="36120" class="Symbol">(</a><a id="36121" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="36123" class="Symbol">(</a><a id="36124" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="36126" class="Symbol">(</a><a id="36127" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="36129" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="36130" class="Symbol">)))</a> <a id="36134" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="36136" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="36138" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a> <a id="36140" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="36142" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="36144" class="Symbol">(</a><a id="36145" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="36147" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="36148" class="Symbol">))))))</a>
      <a id="36161" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="36163" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="36165" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a>
      <a id="36173" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="36175" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="36180" class="Symbol">(</a><a id="36181" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="36186" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="36191" class="Symbol">)))</a>
   <a id="36198" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="36202" href="/PLFA-zh/DeBruijn/#25047" class="InductiveConstructor">ξ-suc</a> <a id="36208" class="Symbol">(</a><a id="36209" href="/PLFA-zh/DeBruijn/#25387" class="InductiveConstructor">β-suc</a> <a id="36215" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="36221" class="Symbol">)</a> <a id="36223" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="36229" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a>
    <a id="36238" class="Symbol">(</a><a id="36239" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a>
     <a id="36249" class="Symbol">((</a><a id="36251" href="/PLFA-zh/DeBruijn/#10942" class="InductiveConstructor Operator">μ</a>
       <a id="36260" class="Symbol">(</a><a id="36261" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
        <a id="36271" class="Symbol">(</a><a id="36272" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
         <a id="36283" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="36288" class="Symbol">(</a><a id="36289" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="36291" class="Symbol">(</a><a id="36292" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="36294" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="36295" class="Symbol">))</a> <a id="36298" class="Symbol">(</a><a id="36299" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="36301" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="36302" class="Symbol">)</a> <a id="36304" class="Symbol">(</a><a id="36305" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="36310" class="Symbol">(</a><a id="36311" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="36313" class="Symbol">(</a><a id="36314" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="36316" class="Symbol">(</a><a id="36317" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="36319" class="Symbol">(</a><a id="36320" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="36322" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="36323" class="Symbol">)))</a> <a id="36327" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="36329" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="36331" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a> <a id="36333" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="36335" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="36337" class="Symbol">(</a><a id="36338" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="36340" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="36341" class="Symbol">))))))</a>
      <a id="36354" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="36356" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a>
      <a id="36368" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="36370" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="36375" class="Symbol">(</a><a id="36376" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="36381" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="36386" class="Symbol">)))</a>
   <a id="36393" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="36397" href="/PLFA-zh/DeBruijn/#25047" class="InductiveConstructor">ξ-suc</a> <a id="36403" class="Symbol">(</a><a id="36404" href="/PLFA-zh/DeBruijn/#25047" class="InductiveConstructor">ξ-suc</a> <a id="36410" class="Symbol">(</a><a id="36411" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="36416" class="Symbol">(</a><a id="36417" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="36422" href="/PLFA-zh/DeBruijn/#25533" class="InductiveConstructor">β-μ</a><a id="36425" class="Symbol">)))</a> <a id="36429" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="36435" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a>
    <a id="36444" class="Symbol">(</a><a id="36445" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a>
     <a id="36455" class="Symbol">((</a><a id="36457" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
       <a id="36466" class="Symbol">(</a><a id="36467" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
        <a id="36477" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="36482" class="Symbol">(</a><a id="36483" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="36485" class="Symbol">(</a><a id="36486" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="36488" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="36489" class="Symbol">))</a> <a id="36492" class="Symbol">(</a><a id="36493" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="36495" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="36496" class="Symbol">)</a>
        <a id="36506" class="Symbol">(</a><a id="36507" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a>
         <a id="36521" class="Symbol">((</a><a id="36523" href="/PLFA-zh/DeBruijn/#10942" class="InductiveConstructor Operator">μ</a>
           <a id="36536" class="Symbol">(</a><a id="36537" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
            <a id="36551" class="Symbol">(</a><a id="36552" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
             <a id="36567" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="36572" class="Symbol">(</a><a id="36573" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="36575" class="Symbol">(</a><a id="36576" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="36578" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="36579" class="Symbol">))</a> <a id="36582" class="Symbol">(</a><a id="36583" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="36585" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="36586" class="Symbol">)</a> <a id="36588" class="Symbol">(</a><a id="36589" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="36594" class="Symbol">(</a><a id="36595" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="36597" class="Symbol">(</a><a id="36598" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="36600" class="Symbol">(</a><a id="36601" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="36603" class="Symbol">(</a><a id="36604" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="36606" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="36607" class="Symbol">)))</a> <a id="36611" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="36613" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="36615" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a> <a id="36617" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="36619" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="36621" class="Symbol">(</a><a id="36622" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="36624" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="36625" class="Symbol">))))))</a>
          <a id="36642" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="36644" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="36646" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a>
          <a id="36658" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="36660" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="36662" class="Symbol">(</a><a id="36663" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="36665" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="36666" class="Symbol">)))))</a>
      <a id="36678" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="36680" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a>
      <a id="36692" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="36694" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="36699" class="Symbol">(</a><a id="36700" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="36705" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="36710" class="Symbol">)))</a>
   <a id="36717" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="36721" href="/PLFA-zh/DeBruijn/#25047" class="InductiveConstructor">ξ-suc</a> <a id="36727" class="Symbol">(</a><a id="36728" href="/PLFA-zh/DeBruijn/#25047" class="InductiveConstructor">ξ-suc</a> <a id="36734" class="Symbol">(</a><a id="36735" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="36740" class="Symbol">(</a><a id="36741" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="36745" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="36751" class="Symbol">)))</a> <a id="36755" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="36761" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a>
    <a id="36770" class="Symbol">(</a><a id="36771" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a>
     <a id="36781" class="Symbol">((</a><a id="36783" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
       <a id="36792" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="36797" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a> <a id="36803" class="Symbol">(</a><a id="36804" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="36806" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="36807" class="Symbol">)</a>
       <a id="36816" class="Symbol">(</a><a id="36817" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a>
        <a id="36830" class="Symbol">((</a><a id="36832" href="/PLFA-zh/DeBruijn/#10942" class="InductiveConstructor Operator">μ</a>
          <a id="36844" class="Symbol">(</a><a id="36845" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
           <a id="36858" class="Symbol">(</a><a id="36859" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
            <a id="36873" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="36878" class="Symbol">(</a><a id="36879" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="36881" class="Symbol">(</a><a id="36882" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="36884" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="36885" class="Symbol">))</a> <a id="36888" class="Symbol">(</a><a id="36889" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="36891" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="36892" class="Symbol">)</a> <a id="36894" class="Symbol">(</a><a id="36895" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="36900" class="Symbol">(</a><a id="36901" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="36903" class="Symbol">(</a><a id="36904" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="36906" class="Symbol">(</a><a id="36907" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="36909" class="Symbol">(</a><a id="36910" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="36912" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="36913" class="Symbol">)))</a> <a id="36917" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="36919" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="36921" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a> <a id="36923" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="36925" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="36927" class="Symbol">(</a><a id="36928" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="36930" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="36931" class="Symbol">))))))</a>
         <a id="36947" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="36949" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="36951" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a>
         <a id="36962" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="36964" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="36966" class="Symbol">(</a><a id="36967" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="36969" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="36970" class="Symbol">))))</a>
      <a id="36981" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="36983" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="36988" class="Symbol">(</a><a id="36989" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="36994" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="36999" class="Symbol">)))</a>
   <a id="37006" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="37010" href="/PLFA-zh/DeBruijn/#25047" class="InductiveConstructor">ξ-suc</a> <a id="37016" class="Symbol">(</a><a id="37017" href="/PLFA-zh/DeBruijn/#25047" class="InductiveConstructor">ξ-suc</a> <a id="37023" class="Symbol">(</a><a id="37024" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="37028" class="Symbol">(</a><a id="37029" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="37035" class="Symbol">(</a><a id="37036" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="37042" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="37048" class="Symbol">))))</a> <a id="37053" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="37059" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a>
    <a id="37068" class="Symbol">(</a><a id="37069" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a>
     <a id="37079" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="37084" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a> <a id="37090" class="Symbol">(</a><a id="37091" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="37096" class="Symbol">(</a><a id="37097" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="37102" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="37107" class="Symbol">))</a>
     <a id="37115" class="Symbol">(</a><a id="37116" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a>
      <a id="37127" class="Symbol">((</a><a id="37129" href="/PLFA-zh/DeBruijn/#10942" class="InductiveConstructor Operator">μ</a>
        <a id="37139" class="Symbol">(</a><a id="37140" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
         <a id="37151" class="Symbol">(</a><a id="37152" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
          <a id="37164" href="/PLFA-zh/DeBruijn/#10852" class="InductiveConstructor">case</a> <a id="37169" class="Symbol">(</a><a id="37170" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="37172" class="Symbol">(</a><a id="37173" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="37175" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="37176" class="Symbol">))</a> <a id="37179" class="Symbol">(</a><a id="37180" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="37182" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="37183" class="Symbol">)</a> <a id="37185" class="Symbol">(</a><a id="37186" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="37191" class="Symbol">(</a><a id="37192" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="37194" class="Symbol">(</a><a id="37195" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="37197" class="Symbol">(</a><a id="37198" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="37200" class="Symbol">(</a><a id="37201" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="37203" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="37204" class="Symbol">)))</a> <a id="37208" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="37210" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="37212" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a> <a id="37214" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="37216" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="37218" class="Symbol">(</a><a id="37219" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="37221" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="37222" class="Symbol">))))))</a>
       <a id="37236" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="37238" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="37240" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a>
       <a id="37249" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="37251" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="37256" class="Symbol">(</a><a id="37257" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="37262" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="37267" class="Symbol">))))</a>
   <a id="37275" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="37279" href="/PLFA-zh/DeBruijn/#25047" class="InductiveConstructor">ξ-suc</a> <a id="37285" class="Symbol">(</a><a id="37286" href="/PLFA-zh/DeBruijn/#25047" class="InductiveConstructor">ξ-suc</a> <a id="37292" href="/PLFA-zh/DeBruijn/#25285" class="InductiveConstructor">β-zero</a><a id="37298" class="Symbol">)</a> <a id="37300" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="37306" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="37311" class="Symbol">(</a><a id="37312" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="37317" class="Symbol">(</a><a id="37318" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="37323" class="Symbol">(</a><a id="37324" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="37329" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="37334" class="Symbol">)))</a>
   <a id="37341" href="/PLFA-zh/DeBruijn/#26395" class="InductiveConstructor Operator">∎</a><a id="37342" class="Symbol">)</a>
   <a id="37347" class="Symbol">(</a><a id="37348" href="/PLFA-zh/DeBruijn/#32196" class="InductiveConstructor">done</a> <a id="37353" class="Symbol">(</a><a id="37354" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="37360" class="Symbol">(</a><a id="37361" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="37367" class="Symbol">(</a><a id="37368" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="37374" class="Symbol">(</a><a id="37375" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="37381" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="37387" class="Symbol">)))))</a>
<a id="37393" class="Symbol">_</a> <a id="37395" class="Symbol">=</a> <a id="37397" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a></pre>

<p>And the corresponding term for Church numerals:</p>
<pre class="Agda"><a id="37475" href="/PLFA-zh/DeBruijn/#37475" class="Function">_</a> <a id="37477" class="Symbol">:</a> <a id="37479" href="/PLFA-zh/DeBruijn/#32715" class="Function">eval</a> <a id="37484" class="Symbol">(</a><a id="37485" href="/PLFA-zh/DeBruijn/#31986" class="InductiveConstructor">gas</a> <a id="37489" class="Number">100</a><a id="37492" class="Symbol">)</a> <a id="37494" class="Symbol">(</a><a id="37495" href="/PLFA-zh/DeBruijn/#14162" class="Function">plusᶜ</a> <a id="37501" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="37503" href="/PLFA-zh/DeBruijn/#14104" class="Function">twoᶜ</a> <a id="37508" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="37510" href="/PLFA-zh/DeBruijn/#14104" class="Function">twoᶜ</a> <a id="37515" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="37517" href="/PLFA-zh/DeBruijn/#14252" class="Function">sucᶜ</a> <a id="37522" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="37524" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="37529" class="Symbol">)</a> <a id="37531" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#83" class="Datatype Operator">≡</a>
  <a id="37535" href="/PLFA-zh/DeBruijn/#32530" class="InductiveConstructor">steps</a>
   <a id="37544" class="Symbol">((</a><a id="37546" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
     <a id="37553" class="Symbol">(</a><a id="37554" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
      <a id="37562" class="Symbol">(</a><a id="37563" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="37565" class="Symbol">(</a><a id="37566" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="37568" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="37570" class="Symbol">(</a><a id="37571" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="37573" class="Symbol">(</a><a id="37574" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="37576" class="Symbol">(</a><a id="37577" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="37579" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="37580" class="Symbol">)))</a> <a id="37584" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="37586" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="37588" class="Symbol">(</a><a id="37589" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="37591" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="37592" class="Symbol">)</a> <a id="37594" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="37596" class="Symbol">(</a><a id="37597" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="37599" class="Symbol">(</a><a id="37600" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="37602" class="Symbol">(</a><a id="37603" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="37605" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="37606" class="Symbol">))</a> <a id="37609" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="37611" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="37613" class="Symbol">(</a><a id="37614" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="37616" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="37617" class="Symbol">)</a> <a id="37619" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="37621" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="37623" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="37624" class="Symbol">)))))</a>
    <a id="37634" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="37636" class="Symbol">(</a><a id="37637" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="37639" class="Symbol">(</a><a id="37640" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="37642" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="37644" class="Symbol">(</a><a id="37645" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="37647" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="37648" class="Symbol">)</a> <a id="37650" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="37652" class="Symbol">(</a><a id="37653" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="37655" class="Symbol">(</a><a id="37656" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="37658" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="37659" class="Symbol">)</a> <a id="37661" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="37663" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="37665" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="37666" class="Symbol">)))</a>
    <a id="37674" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="37676" class="Symbol">(</a><a id="37677" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="37679" class="Symbol">(</a><a id="37680" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="37682" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="37684" class="Symbol">(</a><a id="37685" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="37687" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="37688" class="Symbol">)</a> <a id="37690" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="37692" class="Symbol">(</a><a id="37693" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="37695" class="Symbol">(</a><a id="37696" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="37698" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="37699" class="Symbol">)</a> <a id="37701" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="37703" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="37705" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="37706" class="Symbol">)))</a>
    <a id="37714" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="37716" class="Symbol">(</a><a id="37717" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="37719" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="37724" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="37726" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="37727" class="Symbol">)</a>
    <a id="37733" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="37735" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a>
   <a id="37744" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="37748" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="37753" class="Symbol">(</a><a id="37754" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="37759" class="Symbol">(</a><a id="37760" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="37765" class="Symbol">(</a><a id="37766" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="37770" href="/PLFA-zh/DeBruijn/#23951" class="InductiveConstructor">V-ƛ</a><a id="37773" class="Symbol">)))</a> <a id="37777" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="37783" class="Symbol">(</a><a id="37784" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
     <a id="37791" class="Symbol">(</a><a id="37792" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
      <a id="37800" class="Symbol">(</a><a id="37801" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
       <a id="37810" class="Symbol">(</a><a id="37811" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="37813" class="Symbol">(</a><a id="37814" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="37816" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="37818" class="Symbol">(</a><a id="37819" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="37821" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="37822" class="Symbol">)</a> <a id="37824" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="37826" class="Symbol">(</a><a id="37827" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="37829" class="Symbol">(</a><a id="37830" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="37832" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="37833" class="Symbol">)</a> <a id="37835" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="37837" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="37839" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="37840" class="Symbol">)))</a> <a id="37844" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="37846" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="37848" class="Symbol">(</a><a id="37849" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="37851" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="37852" class="Symbol">)</a> <a id="37854" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a>
       <a id="37863" class="Symbol">(</a><a id="37864" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="37866" class="Symbol">(</a><a id="37867" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="37869" class="Symbol">(</a><a id="37870" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="37872" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="37873" class="Symbol">))</a> <a id="37876" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="37878" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="37880" class="Symbol">(</a><a id="37881" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="37883" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="37884" class="Symbol">)</a> <a id="37886" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="37888" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="37890" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="37891" class="Symbol">))))</a>
    <a id="37900" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="37902" class="Symbol">(</a><a id="37903" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="37905" class="Symbol">(</a><a id="37906" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="37908" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="37910" class="Symbol">(</a><a id="37911" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="37913" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="37914" class="Symbol">)</a> <a id="37916" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="37918" class="Symbol">(</a><a id="37919" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="37921" class="Symbol">(</a><a id="37922" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="37924" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="37925" class="Symbol">)</a> <a id="37927" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="37929" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="37931" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="37932" class="Symbol">)))</a>
    <a id="37940" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="37942" class="Symbol">(</a><a id="37943" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="37945" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="37950" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="37952" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="37953" class="Symbol">)</a>
    <a id="37959" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="37961" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a>
   <a id="37970" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="37974" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="37979" class="Symbol">(</a><a id="37980" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="37985" class="Symbol">(</a><a id="37986" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="37990" href="/PLFA-zh/DeBruijn/#23951" class="InductiveConstructor">V-ƛ</a><a id="37993" class="Symbol">))</a> <a id="37996" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="38002" class="Symbol">(</a><a id="38003" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
     <a id="38010" class="Symbol">(</a><a id="38011" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
      <a id="38019" class="Symbol">(</a><a id="38020" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38022" class="Symbol">(</a><a id="38023" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38025" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38027" class="Symbol">(</a><a id="38028" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="38030" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38031" class="Symbol">)</a> <a id="38033" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38035" class="Symbol">(</a><a id="38036" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38038" class="Symbol">(</a><a id="38039" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="38041" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38042" class="Symbol">)</a> <a id="38044" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38046" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38048" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38049" class="Symbol">)))</a> <a id="38053" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38055" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38057" class="Symbol">(</a><a id="38058" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="38060" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38061" class="Symbol">)</a> <a id="38063" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a>
      <a id="38071" class="Symbol">((</a><a id="38073" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38075" class="Symbol">(</a><a id="38076" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38078" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38080" class="Symbol">(</a><a id="38081" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="38083" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38084" class="Symbol">)</a> <a id="38086" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38088" class="Symbol">(</a><a id="38089" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38091" class="Symbol">(</a><a id="38092" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="38094" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38095" class="Symbol">)</a> <a id="38097" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38099" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38101" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38102" class="Symbol">)))</a> <a id="38106" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38108" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38110" class="Symbol">(</a><a id="38111" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="38113" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38114" class="Symbol">)</a> <a id="38116" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38118" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38120" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38121" class="Symbol">)))</a>
    <a id="38129" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38131" class="Symbol">(</a><a id="38132" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38134" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="38139" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38141" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38142" class="Symbol">)</a>
    <a id="38148" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38150" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a>
   <a id="38159" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="38163" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="38168" class="Symbol">(</a><a id="38169" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="38173" href="/PLFA-zh/DeBruijn/#23951" class="InductiveConstructor">V-ƛ</a><a id="38176" class="Symbol">)</a> <a id="38178" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="38184" class="Symbol">(</a><a id="38185" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a>
     <a id="38192" class="Symbol">(</a><a id="38193" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38195" class="Symbol">(</a><a id="38196" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38198" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38200" class="Symbol">(</a><a id="38201" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="38203" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38204" class="Symbol">)</a> <a id="38206" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38208" class="Symbol">(</a><a id="38209" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38211" class="Symbol">(</a><a id="38212" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="38214" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38215" class="Symbol">)</a> <a id="38217" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38219" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38221" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38222" class="Symbol">)))</a> <a id="38226" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38228" class="Symbol">(</a><a id="38229" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38231" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="38236" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38238" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38239" class="Symbol">)</a> <a id="38241" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a>
     <a id="38248" class="Symbol">((</a><a id="38250" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38252" class="Symbol">(</a><a id="38253" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38255" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38257" class="Symbol">(</a><a id="38258" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="38260" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38261" class="Symbol">)</a> <a id="38263" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38265" class="Symbol">(</a><a id="38266" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38268" class="Symbol">(</a><a id="38269" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="38271" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38272" class="Symbol">)</a> <a id="38274" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38276" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38278" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38279" class="Symbol">)))</a> <a id="38283" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38285" class="Symbol">(</a><a id="38286" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38288" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="38293" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38295" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38296" class="Symbol">)</a> <a id="38298" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38300" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38302" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38303" class="Symbol">))</a>
    <a id="38310" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38312" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a>
   <a id="38321" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="38325" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="38329" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a> <a id="38336" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="38342" class="Symbol">(</a><a id="38343" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38345" class="Symbol">(</a><a id="38346" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38348" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38350" class="Symbol">(</a><a id="38351" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="38353" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38354" class="Symbol">)</a> <a id="38356" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38358" class="Symbol">(</a><a id="38359" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38361" class="Symbol">(</a><a id="38362" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="38364" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38365" class="Symbol">)</a> <a id="38367" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38369" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38371" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38372" class="Symbol">)))</a> <a id="38376" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38378" class="Symbol">(</a><a id="38379" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38381" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="38386" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38388" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38389" class="Symbol">)</a> <a id="38391" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a>
    <a id="38397" class="Symbol">((</a><a id="38399" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38401" class="Symbol">(</a><a id="38402" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38404" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38406" class="Symbol">(</a><a id="38407" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="38409" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38410" class="Symbol">)</a> <a id="38412" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38414" class="Symbol">(</a><a id="38415" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38417" class="Symbol">(</a><a id="38418" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="38420" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38421" class="Symbol">)</a> <a id="38423" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38425" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38427" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38428" class="Symbol">)))</a> <a id="38432" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38434" class="Symbol">(</a><a id="38435" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38437" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="38442" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38444" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38445" class="Symbol">)</a> <a id="38447" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38449" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="38454" class="Symbol">)</a>
   <a id="38459" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="38463" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="38468" class="Symbol">(</a><a id="38469" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="38473" href="/PLFA-zh/DeBruijn/#23951" class="InductiveConstructor">V-ƛ</a><a id="38476" class="Symbol">)</a> <a id="38478" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="38484" class="Symbol">(</a><a id="38485" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38487" class="Symbol">(</a><a id="38488" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38490" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="38495" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38497" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38498" class="Symbol">)</a> <a id="38500" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38502" class="Symbol">((</a><a id="38504" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38506" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="38511" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38513" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38514" class="Symbol">)</a> <a id="38516" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38518" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38520" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38521" class="Symbol">))</a> <a id="38524" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a>
    <a id="38530" class="Symbol">((</a><a id="38532" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38534" class="Symbol">(</a><a id="38535" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38537" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38539" class="Symbol">(</a><a id="38540" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="38542" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38543" class="Symbol">)</a> <a id="38545" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38547" class="Symbol">(</a><a id="38548" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38550" class="Symbol">(</a><a id="38551" href="/PLFA-zh/DeBruijn/#9351" class="InductiveConstructor Operator">S</a> <a id="38553" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38554" class="Symbol">)</a> <a id="38556" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38558" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38560" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38561" class="Symbol">)))</a> <a id="38565" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38567" class="Symbol">(</a><a id="38568" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38570" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="38575" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38577" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38578" class="Symbol">)</a> <a id="38580" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38582" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="38587" class="Symbol">)</a>
   <a id="38592" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="38596" href="/PLFA-zh/DeBruijn/#24811" class="InductiveConstructor">ξ-·₂</a> <a id="38601" href="/PLFA-zh/DeBruijn/#23951" class="InductiveConstructor">V-ƛ</a> <a id="38605" class="Symbol">(</a><a id="38606" href="/PLFA-zh/DeBruijn/#24700" class="InductiveConstructor">ξ-·₁</a> <a id="38611" class="Symbol">(</a><a id="38612" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="38616" href="/PLFA-zh/DeBruijn/#23951" class="InductiveConstructor">V-ƛ</a><a id="38619" class="Symbol">))</a> <a id="38622" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="38628" class="Symbol">(</a><a id="38629" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38631" class="Symbol">(</a><a id="38632" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38634" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="38639" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38641" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38642" class="Symbol">)</a> <a id="38644" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38646" class="Symbol">((</a><a id="38648" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38650" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="38655" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38657" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38658" class="Symbol">)</a> <a id="38660" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38662" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38664" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38665" class="Symbol">))</a> <a id="38668" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a>
    <a id="38674" class="Symbol">((</a><a id="38676" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38678" class="Symbol">(</a><a id="38679" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38681" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="38686" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38688" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38689" class="Symbol">)</a> <a id="38691" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38693" class="Symbol">((</a><a id="38695" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38697" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="38702" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38704" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38705" class="Symbol">)</a> <a id="38707" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38709" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38711" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38712" class="Symbol">))</a> <a id="38715" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38717" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="38722" class="Symbol">)</a>
   <a id="38727" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="38731" href="/PLFA-zh/DeBruijn/#24811" class="InductiveConstructor">ξ-·₂</a> <a id="38736" href="/PLFA-zh/DeBruijn/#23951" class="InductiveConstructor">V-ƛ</a> <a id="38740" class="Symbol">(</a><a id="38741" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="38745" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="38751" class="Symbol">)</a> <a id="38753" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="38759" class="Symbol">(</a><a id="38760" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38762" class="Symbol">(</a><a id="38763" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38765" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="38770" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38772" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38773" class="Symbol">)</a> <a id="38775" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38777" class="Symbol">((</a><a id="38779" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38781" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="38786" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38788" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38789" class="Symbol">)</a> <a id="38791" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38793" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38795" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38796" class="Symbol">))</a> <a id="38799" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a>
    <a id="38805" class="Symbol">((</a><a id="38807" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38809" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="38814" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38816" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38817" class="Symbol">)</a> <a id="38819" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38821" class="Symbol">((</a><a id="38823" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38825" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="38830" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38832" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38833" class="Symbol">)</a> <a id="38835" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38837" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="38842" class="Symbol">))</a>
   <a id="38848" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="38852" href="/PLFA-zh/DeBruijn/#24811" class="InductiveConstructor">ξ-·₂</a> <a id="38857" href="/PLFA-zh/DeBruijn/#23951" class="InductiveConstructor">V-ƛ</a> <a id="38861" class="Symbol">(</a><a id="38862" href="/PLFA-zh/DeBruijn/#24811" class="InductiveConstructor">ξ-·₂</a> <a id="38867" href="/PLFA-zh/DeBruijn/#23951" class="InductiveConstructor">V-ƛ</a> <a id="38871" class="Symbol">(</a><a id="38872" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="38876" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="38882" class="Symbol">))</a> <a id="38885" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="38891" class="Symbol">(</a><a id="38892" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38894" class="Symbol">(</a><a id="38895" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38897" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="38902" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38904" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38905" class="Symbol">)</a> <a id="38907" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38909" class="Symbol">((</a><a id="38911" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38913" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="38918" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38920" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38921" class="Symbol">)</a> <a id="38923" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38925" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38927" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38928" class="Symbol">))</a> <a id="38931" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a>
    <a id="38937" class="Symbol">((</a><a id="38939" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="38941" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="38946" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="38948" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="38949" class="Symbol">)</a> <a id="38951" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="38953" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="38958" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="38963" class="Symbol">)</a>
   <a id="38968" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="38972" href="/PLFA-zh/DeBruijn/#24811" class="InductiveConstructor">ξ-·₂</a> <a id="38977" href="/PLFA-zh/DeBruijn/#23951" class="InductiveConstructor">V-ƛ</a> <a id="38981" class="Symbol">(</a><a id="38982" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="38986" class="Symbol">(</a><a id="38987" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="38993" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="38999" class="Symbol">))</a> <a id="39002" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="39008" class="Symbol">(</a><a id="39009" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="39011" class="Symbol">(</a><a id="39012" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="39014" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="39019" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="39021" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="39022" class="Symbol">)</a> <a id="39024" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="39026" class="Symbol">((</a><a id="39028" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="39030" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="39035" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="39037" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="39038" class="Symbol">)</a> <a id="39040" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="39042" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="39044" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="39045" class="Symbol">))</a> <a id="39048" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="39050" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="39055" class="Symbol">(</a><a id="39056" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="39061" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="39066" class="Symbol">)</a>
   <a id="39071" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="39075" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="39079" class="Symbol">(</a><a id="39080" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="39086" class="Symbol">(</a><a id="39087" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="39093" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="39099" class="Symbol">))</a> <a id="39102" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="39108" class="Symbol">(</a><a id="39109" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="39111" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="39116" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="39118" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="39119" class="Symbol">)</a> <a id="39121" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="39123" class="Symbol">((</a><a id="39125" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="39127" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="39132" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="39134" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="39135" class="Symbol">)</a> <a id="39137" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="39139" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="39144" class="Symbol">(</a><a id="39145" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="39150" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="39155" class="Symbol">))</a>
   <a id="39161" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="39165" href="/PLFA-zh/DeBruijn/#24811" class="InductiveConstructor">ξ-·₂</a> <a id="39170" href="/PLFA-zh/DeBruijn/#23951" class="InductiveConstructor">V-ƛ</a> <a id="39174" class="Symbol">(</a><a id="39175" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="39179" class="Symbol">(</a><a id="39180" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="39186" class="Symbol">(</a><a id="39187" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="39193" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="39199" class="Symbol">)))</a> <a id="39203" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="39209" class="Symbol">(</a><a id="39210" href="/PLFA-zh/DeBruijn/#10599" class="InductiveConstructor Operator">ƛ</a> <a id="39212" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="39217" href="/PLFA-zh/DeBruijn/#10544" class="InductiveConstructor Operator">`</a> <a id="39219" href="/PLFA-zh/DeBruijn/#9303" class="InductiveConstructor">Z</a><a id="39220" class="Symbol">)</a> <a id="39222" href="/PLFA-zh/DeBruijn/#10670" class="InductiveConstructor Operator">·</a> <a id="39224" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="39229" class="Symbol">(</a><a id="39230" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="39235" class="Symbol">(</a><a id="39236" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="39241" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="39246" class="Symbol">))</a>
   <a id="39252" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">—→⟨</a> <a id="39256" href="/PLFA-zh/DeBruijn/#24933" class="InductiveConstructor">β-ƛ</a> <a id="39260" class="Symbol">(</a><a id="39261" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="39267" class="Symbol">(</a><a id="39268" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="39274" class="Symbol">(</a><a id="39275" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="39281" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="39287" class="Symbol">)))</a> <a id="39291" href="/PLFA-zh/DeBruijn/#26451" class="InductiveConstructor Operator">⟩</a>
    <a id="39297" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="39302" class="Symbol">(</a><a id="39303" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="39308" class="Symbol">(</a><a id="39309" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="39314" class="Symbol">(</a><a id="39315" href="/PLFA-zh/DeBruijn/#10795" class="InductiveConstructor Operator">`suc</a> <a id="39320" href="/PLFA-zh/DeBruijn/#10748" class="InductiveConstructor">`zero</a><a id="39325" class="Symbol">)))</a>
   <a id="39332" href="/PLFA-zh/DeBruijn/#26395" class="InductiveConstructor Operator">∎</a><a id="39333" class="Symbol">)</a>
   <a id="39338" class="Symbol">(</a><a id="39339" href="/PLFA-zh/DeBruijn/#32196" class="InductiveConstructor">done</a> <a id="39344" class="Symbol">(</a><a id="39345" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="39351" class="Symbol">(</a><a id="39352" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="39358" class="Symbol">(</a><a id="39359" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="39365" class="Symbol">(</a><a id="39366" href="/PLFA-zh/DeBruijn/#24104" class="InductiveConstructor">V-suc</a> <a id="39372" href="/PLFA-zh/DeBruijn/#24038" class="InductiveConstructor">V-zero</a><a id="39378" class="Symbol">)))))</a>
<a id="39384" class="Symbol">_</a> <a id="39386" class="Symbol">=</a> <a id="39388" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Equality.html#140" class="InductiveConstructor">refl</a></pre>

<p>We omit the proof that reduction is deterministic, since it is
tedious and almost identical to the previous proof.</p>

<h4 id="exercise-mul-example-recommended">Exercise <code class="highlighter-rouge">mul-example</code> (recommended)</h4>

<p>Using the evaluator, confirm that two times two is four.</p>

<pre class="Agda"><a id="39636" class="Comment">-- Your code goes here</a></pre>

<h2 id="inherently-typed-is-golden">Inherently-typed is golden</h2>

<p>Counting the lines of code is instructive.  While this chapter
covers the same formal development as the previous two
chapters, it has much less code.  Omitting all the examples,
and all proofs that appear in Properties but not DeBruijn
(such as the proof that reduction is deterministic), the
number of lines of code is as follows:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Lambda                      216
Properties                  235
DeBruijn                    275
</code></pre></div></div>

<p>The relation between the two approaches approximates the
golden ratio: raw terms with a separate typing relation
require about 1.6 times as much code as inherently-typed terms
with de Bruijn indices.</p>

<h2 id="unicode">Unicode</h2>

<p>This chapter uses the following unicode:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>σ  U+03C3  GREEK SMALL LETTER SIGMA (\Gs or \sigma)
₀  U+2080  SUBSCRIPT ZERO (\_0)
₃  U+20B3  SUBSCRIPT THREE (\_3)
₄  U+2084  SUBSCRIPT FOUR (\_4)
₅  U+2085  SUBSCRIPT FIVE (\_5)
₆  U+2086  SUBSCRIPT SIX (\_6)
₇  U+2087  SUBSCRIPT SEVEN (\_7)
≠  U+2260  NOT EQUAL TO (\=n)
</code></pre></div></div>

  </div>

  <p style="text-align:center;">
    
    <a alt="Previous chapter" href="/PLFA-zh/Properties/">前一章</a>
    &bullet;
    
    
    <a alt="Source code" href="https://github.com/roger-uw/PLFA-zh/blob/dev/src/plfa/DeBruijn.lagda">源代码</a>
    
    
    &bullet;
    <a alt="Next chapter" href="/PLFA-zh/More/">后一章</a>
    
</p>


</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/PLFA-zh/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">编程语言基础：Agda 描述
</h2>

    <h3 class="footer-heading">原作者：</h3><div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Philip Wadler</li>
          <li><a class="u-email" href="mailto:wadler@inf.ed.ac.uk">wadler@inf.ed.ac.uk</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/wadler"><svg class="svg-icon"><use xlink:href="/PLFA-zh/assets/minima-social-icons.svg#github"></use></svg> <span class="username">wadler</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3"></div>
    </div><div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Wen Kokke</li>
          <li><a class="u-email" href="mailto:wen.kokke@ed.ac.uk">wen.kokke@ed.ac.uk</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/wenkokke"><svg class="svg-icon"><use xlink:href="/PLFA-zh/assets/minima-social-icons.svg#github"></use></svg> <span class="username">wenkokke</span></a></li><li><a href="https://www.twitter.com/wenkokke"><svg class="svg-icon"><use xlink:href="/PLFA-zh/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">wenkokke</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3"></div>
    </div><h3 class="footer-heading">本章暂无翻译</h3>本作品采用<a rel="license" href="http://creativecommons.org/licenses/by/4.0/">知识共享署名 4.0 国际许可协议</a>进行许可。<br />
    This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>
  </div>
</footer>
<!-- Import jQuery -->
<script type="text/javascript" src="/PLFA-zh/assets/jquery.js"></script>

<!-- Script which draws background for progress tags -->
<script type="text/javascript">
$('span.progress').each(function(){
    const progress = parseInt($(this).text());
    $(this).css({
        'border-style': 'solid',
        'border-radius': '5px',
        'border-width': 'thin',
        'border-color': progress === 100 ? 'limegreen' : 'dimgray',
        'font-size': '70%',
        'padding': '0% 0.5% 0% 0.5%',
        'margin': '0em 0em 0em 0.5em',
        'box-sizing': 'border-box',
        'vertical-align': '10%'
    });
    $(this).text(progress.toString() + " %");
})
</script>

<!-- Script which allows for foldable code blocks -->
<script type="text/javascript">
 $('div.foldable pre').each(function(){
     var autoHeight = $(this).height();
     var lineHeight = parseFloat($(this).css('line-height'));

     var plus    = $("<div></div>");
     var horLine = $("<div></div>");
     var verLine = $("<div></div>");
     $(this).prepend(plus);
     plus.css({
         'position'         : 'relative',
         'float'            : 'right',
         'right'            : '-' + (0.5 * lineHeight - 1.5) + 'px',
         'width'            : lineHeight,
         'height'           : lineHeight});
     verLine.css({
         'position'         : 'relative',
         'height'           : lineHeight,
         'width'            : '3px',
         'background-color' : '#C1E0FF'});
     horLine.css({
         'position'         : 'relative',
         'top'              : '-' + (0.5 * lineHeight + 1.5) + 'px',
         'left'             : '-' + (0.5 * lineHeight - 1.5) + 'px',
         'height'           : '3px',
         'width'            : lineHeight,
         'background-color' : '#C1E0FF'});
     plus.append(verLine);
     plus.append(horLine);

     $(this).height(2.0 * lineHeight);
     $(this).css('overflow','hidden');

     $(this).click(function(){
         if ($(this).height() == autoHeight) {
             $(this).height(2.0 * lineHeight);
             plus.show();
         }
         else {
             $(this).height('auto');
             plus.hide();
         }
     });
 });
</script>

<!-- Import KaTeX -->
<script type="text/javascript" src="/PLFA-zh/assets/katex.js"></script>

<!-- Script which renders TeX using KaTeX -->
<script type="text/javascript">
 $("script[type='math/tex']").replaceWith(
     function(){
         var tex = $(this).text();
         return "<span class=\"inline-equation\">" +
                katex.renderToString(tex) +
                "</span>";
     });
 $("script[type='math/tex; mode=display']").replaceWith(
     function(){
         var tex = $(this).text().replace(/%.*?(\n|$)/g,"");
         return "<div class=\"equation\">" +
                katex.renderToString("\\displaystyle "+tex) +
                "</div>";
     });
</script>
</body>

</html>
